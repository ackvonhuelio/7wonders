<!DOCTYPE html>
<!--Credit to vexcess for pjs in html script which i copied -->
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>7 wonders</title>
        <style>
            :root {
                --background-color: #000000;
            }

            html, body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0px;
                padding: 0px;
                background-color: var(--background-color);
                display: flex;
                justify-content: center;
                align-items: center;
            }

            #wrapper {
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            canvas {
                position: absolute;
                transform-origin: center;
            }
        </style>
    </head>
    <body id="wrapper">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- jQuery plugin file -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.4.1/jquery.timeago.min.js"></script>
    <script id="PJS_code" type="data" data-width="600" data-height="600">
    // decrease if loading crashes ya
var textureLoadSpeed = 10;

/*

                Seven Wonders
        
    A game about building a city over 3 ages (time)
    
    The most awarded board game of all time
    
    The definitive KA board game experience
    
    A pretty good KA card game experience
    
    By Ackvonhey
    
    
- Made in about 2 months
(sorry for the kind of small tutorial)

- Fully playable with just a mouse
- Fully playable with just a keyboard 
(arrow keys, space, z)

- Complete functional remake of the original board game
(but its against bots because KA can't do multiplayer)


How victory points are calculated:
{

cards/wonder stages that give you victory points

military wins/losses (higher ages give more points)

extra gold / 3 (rounded down)

7 points for each set of compass, tablet, and cog

x^2 points where x is the number of compasses
same for tablets and cogs

}


- FOR RULES CLARIFICATION, 
JUST LOOK UP THE ACTUAL 7 WONDERS RULES

- hover over top right corner for framerate (click to lock)


Credits:
Repos production for the physical board game 7 wonders, which I remade on Khan Academy

Ackvonhey for nearly all the code
Ackvonhey's graphics tool (which was made entirely within the time frame of the contest)

Daniel Eppley for a several-year-old texture graphic which I modified for one of the textures in this game.

Someone (bob lyon?) for the KA memory leak fix
*/

// just how good the easy bots are
// more negative = more bad
// more positive = more good
var easyBotWeight = 2;



textFont(createFont("monospace"));

// memory leak fix
//{
Object.constructor.prototype.create = function () {
        var obj = Object.create(this.prototype);
        this.apply(obj, arguments);
        return obj;
    };
// (function NewFix () {
//   (function () { return this; })().Processing.instances[0].PJSCodeInjector.applyInstance = function (constructor) {
//     return function () {
//       return this.Reflect.construct(constructor, arguments);
//     };
//   };
// })();
//}


/*

TODO

nada

*/


var scene = 'loading';
var pScene = scene;
var lastFrameScene = scene;

// set to false for a node refresh
var initializedNodes = false;

var nodeNavigating = false;
var frameRateViewLock = false;

background(255, 255, 255);
fill(0,0,0);
textSize(20);
textAlign(CENTER,BASELINE);
text("â–ˆ",10,40,60,60);
var a = get(40,30);
var needTextWidthDown = false;
var appleD = false;
if(a.toString() !== "-1"){
    appleD = true;
}

function textCompatible(t,x,y,w,h){
    if(!w){
        text(t,x,y);
    }else{
        if(appleD){
        text(t,x,y,w,h);
        }else{
        text(t,x,y-5,w,h);
        }
    }
}

var easyBots = false;
var viewBotScores = !true;
var revealAll = !true;
var enhancedCardGraphics = false;
var liveSymbols = false;
var skipping = false;
var skipTimer = 0;

var tutorialData;

var capitalizedCache = {};
function capitalize(s){
    //return s;
    if(capitalizedCache[s]){
        return capitalizedCache[s];
    }
    var ret = "";
    for(var i = 0; i < s.length; i++){
        if(i === 0 ||(i > 0 && s[i-1] === " ")){
            ret += s[i].toUpperCase();
        }else{
            ret += s[i];
        }
    }
    capitalizedCache[s] = ret;
    return ret;
}
noSmooth();


// rock texture, credit to Daniel Eppley for the original program which I modified
// https://www.khanacademy.org/profile/kaid_295287800819144240639403
//var lavaImg = get(0,0,600*0.7,600);
var textureLoads = [
    ["rock",
    function(ind){
    if(ind === 0){
    background(255, 255, 255);
    background(255, 255, 255, 0);
    }
var rockiness = 7;
var nScale = 0.020;
var pNoiseSeed = 1000;
var calcNoise = function(x,y,noiseScale,seed){
    return noise((x+seed+0.01)*noiseScale,(y+seed+0.01)*noiseScale);
};
var drawDensity = 1;
strokeWeight(drawDensity*2);
    for(var dx = drawDensity*(ind)*(textureLoadSpeed); dx < constrain(drawDensity*(ind+1)*(textureLoadSpeed),0,600*0.7); dx += drawDensity){
        for(var dy = 0; dy < 600; dy += drawDensity){
            var cx = dx;
            var cy = dy;
            var n = map(calcNoise(cx,cy,nScale,pNoiseSeed),0,1,0,255);
            
            var nAbove = map(calcNoise(cx,cy-rockiness,nScale,pNoiseSeed),0,1,0,255);
            var amount = map(constrain(n-nAbove,-50,50),-50,50,0,255);
            stroke(amount,amount,amount,15);
            point(cx,cy);
        }
    }
    if(dx >= 600*0.7){
        return true;
    }
    }],
    ["lava",
    function(ind){
    if(ind === 0){
    background(255, 255, 255);
    background(255, 255, 255, 0);
    }
var randomizer = 189;
var xTime = randomizer+(0.01*ind*textureLoadSpeed);
for(var x = ind*textureLoadSpeed; x < constrain((ind+1)*textureLoadSpeed,0,600*0.7); x++) {
    var yTime = randomizer;
    for(var y = 0; y < 600; y++) {
        var a = map(noise(xTime, yTime), 0, 1, 255, 0)%50;
        strokeWeight(1);
        stroke(a,a,a,80);
        point(x, y);
        
        yTime += 0.01;
    }
    xTime += 0.01;
}
if(x >= 600*0.7){
return true;
}
    }],
    ["marble",
    function(ind){
    if(ind === 0){
    background(255, 255, 255);
    background(255, 255, 255, 0);
    }
var zoom = [0.01, 0.01];
var seed = 40;
var contrast = 200;
var colorOffset = 0;
var density = 1;
strokeWeight(density*2);
for(var x = ind*textureLoadSpeed*density; x < constrain((ind+1)*textureLoadSpeed*density,0,600*0.7); x+=density) {
    for(var y = 0; y < 600; y+=density) {
            var a = map(noise(x*zoom[0],y*zoom[1],seed),0,1,127.5-contrast,127.5+contrast)+colorOffset;
            stroke(a,a,a,15);
        point(x, y);
    }
}
if(x >= 600*0.7){
return true;
}
    }],
    ["wood",
    function(ind){
    if(ind === 0){
    background(255, 255, 255);
    background(255, 255, 255, 0);
    }
var zoom = [0.01, 0.1];
var seed = 40;
var contrast = 150;
var colorOffset = 0;
var density = 1;
strokeWeight(density*2);
for(var x = ind*textureLoadSpeed*density; x < constrain((ind+1)*textureLoadSpeed*density,0,600*0.7); x+=density) {
    for(var y = 0; y < 600; y+=density) {
            var a = map(noise(x*zoom[0],y*zoom[1],seed),0,1,127.5-contrast,127.5+contrast)+colorOffset;
            stroke(a,a,a,15);
        point(x, y);
    }
}
if(x >= 600*0.7){
return true;
}
    }],
    ];
background(255, 255, 255);
background(255, 255, 255, 0);
var nothingImg = get();
var textures = {
rock:nothingImg,
lava:nothingImg,
marble:nothingImg,
wood:nothingImg,
};


var wonderLoads = [
    ["the colossus of rhodes",
    function(){
    noStroke();
    //smooth();
    //noSmooth();
    pushMatrix();
    translate(50,0);
    scale(1.5);
    scale(5/6);
    
    translate(-52,-10);
translate(200,200);
scale(1.6);
translate(-200,-200);
fill(-7167068);
beginShape();
vertex(259,81);
vertex(277,104);
vertex(285,122);
vertex(287,135);
vertex(286,158);
vertex(283,179);
vertex(251,238);
vertex(237,269);
vertex(258,281);
vertex(277,256);
vertex(288,235);
vertex(304,198);
vertex(312,162);
vertex(311,127);
vertex(307,105);
vertex(284,71);
endShape(CLOSE);
fill(-11637908);
beginShape();
vertex(259,78);
vertex(277,96);
vertex(290,130);
vertex(287,156);
vertex(283,179);
vertex(286,136);
vertex(274,100);
vertex(259,83);
endShape(CLOSE);
fill(-7298397);
beginShape();
vertex(258,78);
vertex(262,81);
vertex(285,72);
vertex(282,68);
endShape(CLOSE);
fill(-12169135);
beginShape();
vertex(237,269);
vertex(236,275);
vertex(261,285);
vertex(260,278);
endShape(CLOSE);
fill(-2036500);
beginShape();
vertex(259,277);
vertex(260,285);
vertex(273,269);
vertex(286,247);
vertex(297,222);
vertex(305,195);
vertex(283,243);
vertex(270,264);
endShape(CLOSE);
fill(-10125954);
beginShape();
vertex(284,75);
vertex(294,90);
vertex(301,106);
vertex(304,123);
vertex(305,146);
vertex(300,181);
vertex(279,234);
vertex(267,253);
vertex(266,257);
vertex(273,260);
vertex(280,249);
vertex(296,220);
vertex(308,185);
vertex(311,159);
vertex(312,129);
vertex(308,104);
vertex(298,83);
vertex(290,73);
vertex(284,69);
endShape(CLOSE);
fill(-10850450);
beginShape();
vertex(252,258);
vertex(262,257);
vertex(266,257);
vertex(272,260);
vertex(259,278);
vertex(237,269);
vertex(243,253);
endShape(CLOSE);
fill(-11640986);
beginShape();
vertex(139,330);
vertex(173,315);
vertex(205,299);
vertex(222,318);
vertex(203,332);
endShape(CLOSE);
fill(-14078673);
beginShape();
vertex(173,314);
vertex(176,332);
vertex(187,332);
endShape(CLOSE);
fill(-4337456);
beginShape();
vertex(222,317);
vertex(224,327);
vertex(216,332);
vertex(201,332);
endShape(CLOSE);
fill(-7963008);
beginShape();
vertex(332,132);
vertex(262,221);
vertex(264,223);
vertex(329,139);
endShape(CLOSE);
fill(-10271937);
beginShape();
vertex(344,118);
vertex(339,118);
vertex(329,132);
vertex(321,150);
vertex(318,174);
vertex(304,200);
vertex(292,213);
vertex(275,222);
vertex(259,226);
vertex(259,230);
vertex(274,230);
vertex(290,222);
vertex(303,210);
vertex(316,191);
vertex(322,174);
vertex(328,148);
vertex(333,133);
endShape(CLOSE);

fill(-7447977);
beginShape();
vertex(240,256);
vertex(240,267);
vertex(243,270);
vertex(262,276);
vertex(264,272);
vertex(263,269);
vertex(253,264);
vertex(252,253);
vertex(250,248);
endShape(CLOSE);
fill(-12045775);
beginShape();
vertex(239,256);
vertex(239,264);
vertex(239,267);
vertex(242,270);
vertex(261,275);
vertex(248,267);
vertex(245,262);
vertex(246,253);
endShape(CLOSE);
fill(-13292503);
beginShape();
vertex(242,262);
vertex(251,261);
vertex(258,254);
vertex(263,245);
vertex(237,256);
endShape(CLOSE);
fill(-9025210);
beginShape();
vertex(206,292);
vertex(202,300);
vertex(201,310);
vertex(205,317);
vertex(207,326);
vertex(204,325);
vertex(197,324);
vertex(193,314);
vertex(194,306);
vertex(200,290);
endShape(CLOSE);
fill(-13358550);
beginShape();
vertex(197,324);
vertex(188,312);
vertex(191,302);
vertex(197,290);
vertex(206,286);
vertex(205,296);
vertex(201,301);
vertex(197,305);
vertex(194,313);
endShape(CLOSE);
fill(-10665925);
beginShape();
vertex(200,300);
vertex(210,293);
vertex(220,284);
vertex(224,277);
vertex(223,271);
vertex(213,268);
vertex(206,273);
vertex(200,291);
endShape(CLOSE);
fill(-13818845);
beginShape();
vertex(200,301);
vertex(198,292);
vertex(197,286);
vertex(198,278);
vertex(201,272);
vertex(207,269);
vertex(207,278);
vertex(205,286);
vertex(207,290);
vertex(204,293);
endShape(CLOSE);
fill(-8695219);
beginShape();
vertex(213,261);
vertex(212,273);
vertex(216,278);
vertex(222,279);
vertex(229,275);
vertex(235,269);
vertex(241,261);
vertex(242,253);
vertex(217,253);
endShape(CLOSE);
fill(-14410984);
beginShape();
vertex(204,271);
vertex(201,273);
vertex(200,281);
vertex(204,283);
vertex(207,290);
vertex(215,286);
vertex(215,267);
vertex(219,261);
vertex(226,249);
vertex(216,245);
vertex(209,254);
vertex(208,267);
endShape(CLOSE);
fill(-15065570);
beginShape();
vertex(227,218);
vertex(206,217);
vertex(216,229);
vertex(227,229);
endShape(CLOSE);
fill(-13355466);
beginShape();
vertex(207,217);
vertex(215,230);
vertex(214,239);
vertex(221,225);
endShape(CLOSE);
fill(-14276828);
beginShape();
vertex(212,219);
vertex(206,217);
vertex(202,220);
vertex(196,220);
vertex(203,222);
vertex(189,224);
vertex(202,226);
vertex(186,228);
vertex(205,230);
vertex(191,233);
vertex(203,232);
vertex(193,236);
vertex(215,236);
vertex(215,228);
endShape(CLOSE);
fill(-8826296);
beginShape();
vertex(223,198);
vertex(223,207);
vertex(226,219);
vertex(224,231);
vertex(245,241);
vertex(267,226);
vertex(268,208);
vertex(260,210);
vertex(244,211);
vertex(229,203);
endShape(CLOSE);
fill(-15265006);
beginShape();
vertex(214,199);
vertex(224,188);
vertex(230,195);
vertex(231,210);
vertex(226,239);
vertex(223,232);
vertex(225,219);
vertex(216,210);
vertex(217,205);
endShape(CLOSE);
fill(-12373199);
beginShape();
vertex(242,225);
vertex(244,229);
vertex(244,237);
vertex(254,233);
vertex(247,228);
vertex(243,222);
endShape(CLOSE);
fill(-11453640);
beginShape();
vertex(222,225);
vertex(228,231);
vertex(238,237);
vertex(251,239);
vertex(243,261);
vertex(231,265);
vertex(219,264);
vertex(210,255);
vertex(217,241);
endShape(CLOSE);
fill(-9943228);
beginShape();
vertex(214,237);
vertex(219,255);
vertex(228,259);
vertex(240,261);
vertex(255,254);
vertex(263,248);
vertex(266,241);
vertex(270,235);
vertex(270,212);
vertex(259,224);
vertex(243,232);
vertex(234,236);
endShape(CLOSE);
fill(-14738921);
beginShape();
vertex(212,258);
vertex(217,238);
vertex(219,258);
vertex(224,235);
vertex(220,221);
vertex(215,237);
vertex(208,250);
vertex(209,260);
endShape(CLOSE);
fill(-8366518);
beginShape();
vertex(278,168);
vertex(280,176);
vertex(285,184);
vertex(290,203);
vertex(293,215);
vertex(290,217);
vertex(286,216);
vertex(284,207);
vertex(277,199);
vertex(269,196);
vertex(270,181);
endShape(CLOSE);
fill(-12177878);
beginShape();
vertex(270,193);
vertex(279,198);
vertex(284,203);
vertex(288,210);
vertex(289,217);
vertex(286,215);
vertex(284,210);
vertex(279,204);
vertex(271,200);
endShape(CLOSE);
fill(-5085857);
beginShape();
vertex(271,195);
vertex(284,202);
vertex(279,190);
vertex(271,189);
endShape(CLOSE);
fill(-10073272);
beginShape();
vertex(288,224);
vertex(289,226);
vertex(293,225);
vertex(296,223);
vertex(295,214);
vertex(293,216);
vertex(294,220);
vertex(291,217);
vertex(286,219);
endShape(CLOSE);
fill(-13360097);
beginShape();
vertex(273,192);
vertex(279,191);
vertex(277,179);
vertex(272,169);
endShape(CLOSE);
fill(-3504512);
beginShape();
vertex(277,187);
vertex(283,181);
vertex(280,176);
vertex(278,166);
vertex(272,168);
endShape(CLOSE);
fill(-6526624);
beginShape();
vertex(266,154);
vertex(277,166);
vertex(278,155);
vertex(276,146);
vertex(270,137);
vertex(262,136);
vertex(246,149);
endShape(CLOSE);
fill(-8827834);
beginShape();
vertex(229,212);
vertex(244,217);
vertex(257,215);
vertex(267,209);
vertex(273,195);
vertex(275,177);
vertex(273,161);
vertex(269,150);
vertex(262,154);
vertex(258,165);
vertex(251,167);
vertex(242,157);
vertex(237,158);
vertex(226,157);
vertex(216,163);
vertex(212,171);
vertex(217,188);
vertex(227,191);
endShape(CLOSE);
fill(-8431024);
beginShape();
vertex(243,214);
vertex(244,218);
vertex(250,221);
vertex(257,221);
vertex(260,218);
vertex(262,210);
vertex(261,209);
vertex(255,212);
vertex(247,212);
vertex(241,210);
endShape(CLOSE);
fill(-12965852);
beginShape();
vertex(227,214);
vertex(231,217);
vertex(241,220);
vertex(236,216);
vertex(238,214);
vertex(237,210);
vertex(243,209);
vertex(240,205);
vertex(235,203);
vertex(234,197);
vertex(227,199);
vertex(225,209);
endShape(CLOSE);
fill(-8167856);
beginShape();
vertex(221,174);
vertex(233,170);
vertex(247,169);
vertex(256,171);
vertex(258,181);
vertex(258,190);
vertex(254,195);
vertex(248,197);
vertex(229,188);
endShape(CLOSE);

fill(-2579056);
beginShape();
vertex(257,171);
vertex(255,175);
vertex(254,183);
vertex(255,193);
vertex(259,191);
vertex(262,186);
vertex(262,176);
endShape(CLOSE);
fill(-15001580);
beginShape();
vertex(224,177);
vertex(234,182);
vertex(244,191);
vertex(250,197);
vertex(242,199);
vertex(233,197);
vertex(226,191);
vertex(221,186);
endShape(CLOSE);
fill(-12835035);
beginShape();
vertex(246,195);
vertex(247,192);
vertex(251,193);
vertex(251,196);
vertex(248,197);
endShape(CLOSE);
fill(-10797769);
beginShape();
vertex(239,251);
vertex(244,249);
vertex(250,241);
vertex(253,235);
vertex(255,238);
vertex(248,250);
vertex(242,255);
vertex(235,253);
endShape(CLOSE);
fill(-11190984);
beginShape();
vertex(225,241);
vertex(237,246);
vertex(242,247);
vertex(234,252);
vertex(224,252);
vertex(221,244);
endShape(CLOSE);
fill(-12045264);
beginShape();
vertex(246,238);
vertex(257,234);
vertex(263,225);
vertex(252,233);
vertex(243,236);
endShape(CLOSE);
fill(-7575456);
beginShape();
vertex(268,220);
vertex(268,229);
vertex(266,237);
vertex(261,239);
vertex(264,234);
vertex(267,217);
endShape(CLOSE);
fill(-5136751);
beginShape();
vertex(265,217);
vertex(265,208);
vertex(269,201);
vertex(272,193);
vertex(273,198);
vertex(268,208);
vertex(267,217);
endShape(CLOSE);
fill(-2907239);
beginShape();
vertex(257,228);
vertex(267,221);
vertex(269,211);
vertex(269,205);
vertex(264,219);
endShape(CLOSE);
fill(-7771806);
beginShape();
vertex(261,197);
vertex(256,202);
vertex(250,204);
vertex(246,206);
vertex(254,208);
vertex(260,206);
vertex(263,201);
endShape(CLOSE);
fill(-10470342);
beginShape();
vertex(262,199);
vertex(264,202);
vertex(261,208);
vertex(263,218);
vertex(264,209);
vertex(267,202);
vertex(266,197);
vertex(267,195);
vertex(269,196);
vertex(268,193);
vertex(266,192);
vertex(263,195);
endShape(CLOSE);
fill(-7248296);
beginShape();
vertex(258,170);
vertex(262,161);
vertex(263,153);
vertex(269,151);
vertex(273,161);
vertex(273,169);
vertex(274,182);
vertex(270,186);
vertex(263,183);
vertex(262,174);
endShape(CLOSE);
fill(-3366251);
beginShape();
vertex(269,153);
vertex(269,161);
vertex(272,165);
vertex(270,171);
vertex(275,173);
vertex(274,159);
vertex(270,150);
endShape(CLOSE);
fill(-8368317);
beginShape();
vertex(272,178);
vertex(270,180);
vertex(272,183);
vertex(273,180);
endShape(CLOSE);
fill(-6654612);
beginShape();
vertex(266,188);
vertex(270,187);
vertex(273,185);
vertex(273,189);
vertex(269,191);
vertex(265,190);
endShape(CLOSE);
fill(-8429990);
beginShape();
vertex(257,204);
vertex(251,202);
vertex(244,201);
vertex(247,206);
vertex(250,207);
endShape(CLOSE);
fill(-2576992);
beginShape();
vertex(277,166);
vertex(279,164);
vertex(278,146);
vertex(275,140);
vertex(271,139);
vertex(276,148);
endShape(CLOSE);
fill(-12043465);
beginShape();
vertex(259,144);
vertex(268,141);
vertex(269,138);
vertex(263,133);
vertex(255,135);
endShape(CLOSE);
fill(-8299957);
beginShape();
vertex(214,174);
vertex(227,171);
vertex(234,167);
vertex(230,164);
vertex(223,161);
vertex(212,165);
vertex(210,171);
endShape(CLOSE);
fill(-4752528);
beginShape();
vertex(227,172);
vertex(236,170);
vertex(241,168);
vertex(229,164);
vertex(226,167);
endShape(CLOSE);
fill(-7840169);
beginShape();
vertex(231,159);
vertex(234,161);
vertex(234,164);
vertex(245,165);
vertex(242,158);
vertex(236,156);
endShape(CLOSE);
fill(-7117478);
beginShape();
vertex(210,179);
vertex(218,181);
vertex(225,183);
vertex(225,189);
vertex(223,196);
vertex(216,202);
vertex(210,207);
vertex(204,212);
vertex(198,218);
vertex(186,218);
vertex(181,221);
vertex(177,212);
vertex(182,205);
vertex(189,198);
vertex(199,196);
endShape(CLOSE);
fill(-1264734);
beginShape();
vertex(203,200);
vertex(201,209);
vertex(204,207);
vertex(210,198);
vertex(217,192);
vertex(222,191);
vertex(226,188);
vertex(227,182);
vertex(224,179);
vertex(219,185);
vertex(213,187);
vertex(207,195);
endShape(CLOSE);
fill(-4420988);
beginShape();
vertex(184,220);
vertex(188,217);
vertex(192,216);
vertex(196,211);
vertex(203,209);
vertex(200,206);
vertex(191,210);
vertex(190,210);
endShape(CLOSE);
fill(-9415607);
beginShape();
vertex(211,172);
vertex(211,184);
vertex(222,179);
vertex(227,178);
vertex(225,175);
endShape(CLOSE);
fill(-13227225);
beginShape();
vertex(177,205);
vertex(184,207);
vertex(190,201);
vertex(194,194);
vertex(195,203);
vertex(199,203);
vertex(203,196);
vertex(206,191);
vertex(212,183);
vertex(216,179);
vertex(215,175);
vertex(212,173);
vertex(213,169);
vertex(218,167);
vertex(224,162);
vertex(233,164);
vertex(235,160);
vertex(229,158);
vertex(245,157);
vertex(246,151);
vertex(239,144);
vertex(234,146);
vertex(231,147);
vertex(223,156);
vertex(221,155);
vertex(218,156);
vertex(213,159);
vertex(209,165);
vertex(206,171);
vertex(204,177);
vertex(199,184);
vertex(196,190);
vertex(189,192);
vertex(180,201);
endShape(CLOSE);
fill(-12240841);
beginShape();
vertex(172,232);
vertex(170,237);
vertex(175,241);
vertex(178,237);
vertex(177,232);
vertex(175,230);
endShape(CLOSE);
fill(-14672866);
beginShape();
vertex(170,233);
vertex(175,234);
vertex(178,233);
vertex(180,230);
vertex(177,225);
vertex(175,230);
vertex(172,230);
vertex(169,229);
endShape(CLOSE);
fill(-9943230);
beginShape();
vertex(168,231);
vertex(175,230);
vertex(178,225);
vertex(177,222);
vertex(173,223);
vertex(173,218);
vertex(173,216);
vertex(164,212);
vertex(163,218);
vertex(165,226);
vertex(169,229);
endShape(CLOSE);
fill(-12571608);
beginShape();
vertex(162,214);
vertex(169,217);
vertex(170,220);
vertex(164,221);
vertex(169,223);
vertex(171,226);
vertex(166,228);
vertex(171,228);
vertex(173,230);
vertex(170,232);
vertex(164,227);
vertex(162,219);
endShape(CLOSE);
fill(-14082276);
beginShape();
vertex(167,210);
vertex(162,209);
vertex(160,214);
vertex(160,220);
vertex(163,221);
vertex(162,226);
vertex(165,228);
vertex(167,232);
vertex(172,232);
vertex(169,229);
vertex(167,227);
vertex(168,225);
vertex(165,223);
vertex(165,219);
vertex(163,218);
vertex(165,214);
vertex(172,214);
vertex(177,211);
vertex(172,203);
endShape(CLOSE);
fill(-10862531);
beginShape();
vertex(175,213);
vertex(173,215);
vertex(173,220);
vertex(177,224);
vertex(180,224);
vertex(181,215);
vertex(186,210);
vertex(184,204);
vertex(179,203);
vertex(174,203);
endShape(CLOSE);
fill(-12110541);
beginShape();
vertex(174,213);
vertex(173,215);
vertex(174,222);
vertex(177,224);
vertex(178,217);
endShape(CLOSE);
fill(-15330287);
beginShape();
vertex(163,197);
vertex(163,205);
vertex(166,208);
vertex(173,210);
vertex(179,208);
vertex(183,204);
vertex(182,195);
vertex(172,182);
endShape(CLOSE);
fill(-6787223);
beginShape();
vertex(167,208);
vertex(174,209);
vertex(178,208);
vertex(183,204);
vertex(182,208);
vertex(176,211);
vertex(168,210);
vertex(165,209);
vertex(163,204);
endShape(CLOSE);
fill(-8630721);
beginShape();
vertex(155,180);
vertex(154,187);
vertex(160,190);
vertex(171,193);
vertex(181,191);
vertex(188,187);
vertex(190,185);
vertex(188,178);
endShape(CLOSE);
fill(-10797256);
beginShape();
vertex(155,188);
vertex(154,191);
vertex(156,192);
vertex(158,189);
vertex(159,191);
vertex(158,195);
vertex(162,194);
vertex(163,192);
vertex(165,193);
vertex(165,196);
vertex(168,197);
vertex(170,193);
vertex(173,193);
vertex(172,198);
vertex(175,197);
vertex(177,193);
vertex(179,192);
vertex(181,197);
vertex(182,196);
vertex(183,192);
vertex(185,191);
vertex(187,195);
vertex(189,194);
vertex(188,189);
vertex(189,185);
vertex(183,189);
vertex(174,191);
vertex(160,188);
vertex(156,186);
endShape(CLOSE);
fill(-5546683);
beginShape();
vertex(151,166);
vertex(153,180);
vertex(159,184);
vertex(171,187);
vertex(182,186);
vertex(188,184);
vertex(192,181);
vertex(194,173);
vertex(195,167);
vertex(194,164);
endShape(CLOSE);
fill(-3317437);
beginShape();
vertex(150,158);
vertex(151,164);
vertex(156,169);
vertex(163,171);
vertex(177,173);
vertex(185,172);
vertex(193,167);
vertex(196,163);
vertex(196,157);
vertex(192,152);
vertex(184,148);
vertex(160,148);
vertex(154,152);
endShape(CLOSE);
fill(-2782382);
beginShape();
vertex(150,162);
vertex(151,167);
vertex(159,172);
vertex(171,174);
vertex(180,174);
vertex(190,172);
vertex(195,167);
vertex(198,164);
vertex(199,161);
vertex(197,155);
vertex(192,150);
vertex(188,148);
vertex(189,151);
vertex(194,156);
vertex(196,160);
vertex(194,166);
vertex(188,170);
vertex(181,172);
vertex(166,171);
vertex(163,171);
vertex(154,166);
vertex(151,161);
vertex(151,157);
endShape(CLOSE);
fill(-2324385);
beginShape();
vertex(158,149);
vertex(152,151);
vertex(147,149);
vertex(147,142);
vertex(150,134);
vertex(152,123);
vertex(159,120);
vertex(165,125);
vertex(173,126);
vertex(175,132);
vertex(180,145);
endShape(CLOSE);
fill(-1191801);
beginShape();
vertex(165,169);
vertex(161,165);
vertex(165,163);
vertex(157,158);
vertex(155,149);
vertex(156,141);
vertex(159,137);
vertex(162,136);
vertex(163,135);
vertex(168,130);
vertex(168,134);
vertex(166,138);
vertex(168,146);
vertex(173,146);
vertex(172,139);
vertex(177,142);
vertex(178,145);
vertex(181,141);
vertex(182,134);
vertex(186,137);
vertex(185,141);
vertex(190,144);
vertex(193,146);
vertex(193,152);
vertex(190,156);
vertex(189,160);
vertex(189,163);
vertex(186,166);
vertex(185,169);
vertex(183,171);
vertex(184,172);
vertex(165,171);
endShape(CLOSE);
fill(-986420);
beginShape();
vertex(168,167);
vertex(166,164);
vertex(171,163);
vertex(169,160);
vertex(174,160);
vertex(175,161);
vertex(180,161);
vertex(179,166);
vertex(182,167);
vertex(179,170);
vertex(173,172);
vertex(168,169);
endShape(CLOSE);
fill(-1856151);
beginShape();
vertex(176,156);
vertex(172,156);
vertex(171,153);
vertex(167,151);
vertex(172,150);
vertex(175,152);
endShape(CLOSE);
fill(-1853591);
beginShape();
vertex(168,159);
vertex(168,156);
vertex(168,153);
vertex(165,153);
vertex(163,157);
vertex(165,159);
endShape(CLOSE);
fill(-1859745);
beginShape();
vertex(161,150);
vertex(164,149);
vertex(163,147);
vertex(162,142);
vertex(158,142);
vertex(159,147);
endShape(CLOSE);
fill(-1852556);
beginShape();
vertex(181,158);
vertex(183,157);
vertex(185,154);
vertex(183,151);
vertex(179,148);
vertex(178,151);
vertex(180,153);
endShape(CLOSE);
fill(-1990271);
beginShape();
vertex(193,138);
vertex(194,141);
vertex(198,143);
vertex(201,141);
vertex(200,137);
vertex(197,132);
vertex(185,119);
vertex(187,126);
vertex(192,132);
endShape(CLOSE);
fill(-928869);
beginShape();
vertex(157,110);
vertex(157,120);
vertex(162,127);
vertex(166,128);
vertex(167,122);
vertex(172,118);
vertex(169,114);
vertex(160,114);
endShape(CLOSE);
fill(-2787758);
beginShape();
vertex(175,135);
vertex(178,134);
vertex(180,130);
vertex(179,123);
vertex(174,117);
vertex(174,124);
vertex(176,130);
vertex(173,130);
endShape(CLOSE);
fill(-1467796);
beginShape();
vertex(160,91);
vertex(163,99);
vertex(168,105);
vertex(173,108);
vertex(177,105);
vertex(178,102);
vertex(173,99);
vertex(168,98);
endShape(CLOSE);
fill(-1595801);
beginShape();
vertex(166,162);
vertex(160,153);
vertex(164,155);
vertex(159,144);
vertex(170,155);
vertex(173,150);
vertex(173,156);
vertex(178,149);
vertex(177,156);
vertex(185,152);
vertex(180,159);
vertex(169,158);
endShape(CLOSE);
fill(-7053227);
beginShape();
vertex(244,146);
vertex(242,155);
vertex(252,165);
vertex(255,164);
vertex(255,156);
vertex(257,145);
vertex(255,136);
endShape(CLOSE);
fill(-11783379);
beginShape();
vertex(241,151);
vertex(247,151);
vertex(249,154);
vertex(246,159);
vertex(250,161);
vertex(253,164);
vertex(255,162);
vertex(256,156);
vertex(259,154);
vertex(262,154);
vertex(259,160);
vertex(258,164);
vertex(257,169);
vertex(250,167);
vertex(240,158);
endShape(CLOSE);
fill(-1850709);
beginShape();
vertex(256,142);
vertex(255,150);
vertex(254,159);
vertex(257,153);
vertex(259,144);
vertex(257,136);
endShape(CLOSE);
fill(-6066331);
beginShape();
vertex(234,120);
vertex(232,135);
vertex(235,139);
vertex(235,148);
vertex(237,152);
vertex(243,154);
vertex(248,153);
vertex(253,146);
vertex(260,137);
vertex(263,128);
vertex(258,111);
vertex(240,108);
endShape(CLOSE);
fill(-12833755);
beginShape();
vertex(241,127);
vertex(246,126);
vertex(240,125);
vertex(237,121);
vertex(233,123);
vertex(229,120);
vertex(227,120);
vertex(228,130);
vertex(229,130);
vertex(229,132);
vertex(228,134);
vertex(228,138);
vertex(229,139);
vertex(232,139);
vertex(233,143);
vertex(235,150);
vertex(239,155);
vertex(241,154);
vertex(237,149);
vertex(237,143);
vertex(236,139);
vertex(234,136);
vertex(232,131);
vertex(232,126);
vertex(235,126);
endShape(CLOSE);
fill(-1657695);
beginShape();
vertex(246,154);
vertex(250,151);
vertex(259,141);
vertex(259,139);
vertex(261,139);
vertex(264,134);
vertex(263,129);
vertex(262,126);
vertex(259,132);
vertex(256,133);
vertex(255,137);
vertex(252,143);
vertex(249,149);
vertex(247,152);
vertex(243,153);
endShape(CLOSE);
fill(-11846346);
beginShape();
vertex(238,146);
vertex(241,145);
vertex(243,145);
vertex(245,145);
vertex(247,146);
vertex(242,147);
endShape(CLOSE);
fill(-12767954);
// beginShape();
// vertex(238,147);
// vertex(237,146);
// vertex(241,147);
// vertex(243,147);
// vertex(248,146);
// vertex(245,148);
// vertex(240,148);
endShape(CLOSE);
fill(-11979987);
beginShape();
vertex(233,129);
vertex(241,129);
vertex(242,137);
vertex(242,143);
vertex(239,140);
vertex(240,139);
vertex(240,133);
vertex(238,130);
vertex(233,130);
vertex(233,127);
vertex(243,128);
vertex(242,133);
endShape(CLOSE);
fill(-4618372);
beginShape();
vertex(244,142);
vertex(246,141);
vertex(244,139);
vertex(245,132);
vertex(246,129);
vertex(244,126);
vertex(242,129);
vertex(242,143);
endShape(CLOSE);
fill(-9483710);
beginShape();
vertex(246,131);
vertex(251,130);
vertex(256,129);
vertex(256,127);
vertex(244,128);
endShape(CLOSE);
fill(-10468548);
beginShape();
vertex(247,132);
vertex(250,132);
vertex(247,130);
vertex(246,130);
endShape(CLOSE);
fill(-9286330);
beginShape();
vertex(253,129);
vertex(254,131);
vertex(254,132);
vertex(251,132);
endShape(CLOSE);

fill(-6001052);
beginShape();
vertex(232,125);
vertex(232,126);
vertex(242,128);
vertex(246,126);
vertex(239,123);
vertex(230,123);
endShape(CLOSE);

fill(-9418169);
beginShape();
vertex(230,127);
vertex(233,129);
vertex(234,123);
vertex(238,125);
vertex(242,120);
vertex(240,118);
vertex(244,115);
vertex(248,116);
vertex(247,122);
vertex(249,123);
vertex(251,120);
vertex(251,123);
vertex(254,122);
vertex(258,126);
vertex(260,131);
vertex(263,132);
vertex(264,129);
vertex(265,122);
vertex(264,112);
vertex(256,105);
vertex(246,104);
vertex(237,112);
vertex(234,120);
endShape(CLOSE);
fill(-12965344);
beginShape();
vertex(228,127);
vertex(232,126);
vertex(235,120);
vertex(238,116);
vertex(239,111);
vertex(247,106);
vertex(255,106);
vertex(263,112);
vertex(261,106);
vertex(253,102);
vertex(241,101);
vertex(235,105);
vertex(229,116);
vertex(228,121);
endShape(CLOSE);

fill(-13227483);
beginShape();
vertex(231,133);
vertex(233,133);
vertex(234,127);
vertex(232,124);
vertex(228,125);
endShape(CLOSE);
fill(-10270659);
beginShape();
vertex(191,198);
vertex(196,199);
vertex(194,193);
endShape(CLOSE);
fill(-9416886);
beginShape();
vertex(169,215);
vertex(175,218);
vertex(173,212);
endShape(CLOSE);
fill(-10928581);
beginShape();
vertex(173,224);
vertex(177,222);
vertex(171,218);
endShape(CLOSE);
fill(-13883870);
beginShape();
vertex(168,215);
vertex(175,214);
vertex(177,210);
vertex(170,212);
endShape(CLOSE);
fill(-10601419);
beginShape();
vertex(253,161);
vertex(256,161);
vertex(258,157);
vertex(265,154);
vertex(256,151);
endShape(CLOSE);
fill(-11190726);
beginShape();
vertex(256,165);
vertex(259,166);
vertex(263,155);
vertex(260,155);
endShape(CLOSE);
fill(-7316145);
beginShape();
vertex(275,167);
vertex(278,167);
vertex(276,160);
vertex(274,162);
vertex(275,172);
vertex(275,181);
vertex(277,187);
vertex(279,188);
vertex(284,183);
vertex(278,167);
endShape(CLOSE);

    
    popMatrix();
    }],
    ["the statue of zeus in olympia",
    function(){
pushMatrix();
translate(-135,-120);
scale(1.45);
noStroke();
fill(-3030111);
beginShape();
vertex(205,393);
vertex(204,119);
vertex(209,87);
vertex(220,65);
vertex(229,53);
vertex(239,47);
vertex(245,43);
vertex(266,32);
vertex(297,27);
vertex(330,31);
vertex(357,41);
vertex(370,52);
vertex(384,67);
vertex(394,86);
vertex(398,119);

vertex(399,407);
vertex(397,410);
vertex(206,411);
endShape(CLOSE);
fill(-5464195);
beginShape();
vertex(228,405);
vertex(227,200);
vertex(225,158);
vertex(226,143);
vertex(235,124);
vertex(251,106);
vertex(273,93);
vertex(306,89);
vertex(330,94);
vertex(352,107);
vertex(366,125);
vertex(373,140);
vertex(375,170);
vertex(376,406);
endShape(CLOSE);
fill(-11581647);
beginShape();
vertex(266,366);
vertex(360,363);
vertex(353,266);
vertex(321,246);
vertex(263,263);
vertex(249,313);
vertex(253,373);
endShape(CLOSE);
fill(-5401005);
beginShape();
vertex(251,241);
vertex(260,242);
vertex(259,169);
vertex(340,170);
vertex(341,241);
vertex(352,242);
vertex(353,274);
vertex(251,275);
endShape(CLOSE);
fill(-6782391);
beginShape();
vertex(257,173);
vertex(272,174);
vertex(272,259);
vertex(257,258);
endShape(CLOSE);
fill(-7177142);
beginShape();
vertex(326,173);
vertex(342,174);
vertex(342,258);
vertex(325,257);
endShape(CLOSE);

fill(-5401521);
beginShape();
vertex(256,158);
vertex(256,169);
vertex(342,171);
vertex(342,158);
endShape(CLOSE);
fill(-4741793);
beginShape();
vertex(252,169);
vertex(255,174);
vertex(342,176);
vertex(346,170);
endShape(CLOSE);
fill(-7111362);
beginShape();
vertex(253,160);
vertex(256,155);
vertex(345,156);
vertex(348,161);
endShape(CLOSE);

fill(-6519736);
beginShape();
vertex(258,150);
vertex(258,158);
vertex(270,158);
vertex(270,150);
endShape(CLOSE);
fill(-6585272);
beginShape();
vertex(328,150);
vertex(328,158);
vertex(340,158);
vertex(340,150);
endShape(CLOSE);
fill(-4742572);
beginShape();
vertex(258,133);
vertex(258,147);
vertex(270,146);
vertex(270,133);
endShape(CLOSE);
fill(-5860274);
beginShape();
vertex(327,132);
vertex(328,148);
vertex(341,148);
vertex(341,132);
endShape(CLOSE);

fill(-5008054);
beginShape();
vertex(254,146);
vertex(255,150);
vertex(272,150);

vertex(274,147);
vertex(273,146);
endShape(CLOSE);
fill(-7242941);
beginShape();
vertex(324,148);
vertex(326,151);
vertex(342,151);
vertex(344,148);
vertex(343,147);
vertex(325,146);
endShape(CLOSE);

fill(-6452667);
beginShape();
vertex(253,126);
vertex(257,136);
vertex(272,136);
vertex(274,126);
endShape(CLOSE);
fill(-6977728);
beginShape();
vertex(324,126);
vertex(326,136);
vertex(343,136);
vertex(347,126);
endShape(CLOSE);

pushMatrix();
translate(-4,0);
fill(-3689879);
beginShape();
vertex(306,154);
vertex(298,155);
vertex(299,100);
vertex(308,100);
vertex(308,148);
endShape(CLOSE);
fill(-2700138);
beginShape();
vertex(298,113);
vertex(296,104);
vertex(297,100);
vertex(303,98);
vertex(309,100);
vertex(310,104);
vertex(308,113);
endShape(CLOSE);

fill(-6781882);
beginShape();
vertex(290,102);
vertex(298,110);
vertex(300,105);
vertex(303,110);
vertex(306,105);
vertex(308,110);
vertex(316,102);
vertex(311,116);
vertex(313,118);
vertex(311,120);
vertex(295,120);
vertex(293,118);
vertex(295,116);
endShape(CLOSE);

fill(-5137825);
beginShape();
vertex(296,120);
vertex(300,120);
vertex(300,167);
vertex(296,168);
endShape(CLOSE);
fill(-4347808);
beginShape();
vertex(279,155);
vertex(286,148);
vertex(300,142);
vertex(311,146);
vertex(318,148);
vertex(323,159);
endShape(CLOSE);


fill(-6059961);
beginShape();
vertex(324,161);
vertex(328,161);
vertex(326,150);
vertex(319,144);
vertex(319,136);
vertex(314,142);
vertex(309,141);
vertex(303,140);
vertex(297,141);
vertex(292,142);
vertex(287,136);
vertex(287,144);
vertex(280,150);
vertex(278,161);
vertex(282,161);
endShape(CLOSE);
popMatrix();

fill(-5992887);
beginShape();
vertex(253,157);
vertex(257,153);
vertex(344,153);
vertex(348,157);
endShape(CLOSE);
fill(-5729199);
beginShape();
vertex(273,156);
vertex(273,176);
vertex(325,178);
vertex(326,158);
endShape(CLOSE);

fill(-6913729);
beginShape();
vertex(273,169);
vertex(325,169);
vertex(325,172);
vertex(273,172);
endShape(CLOSE);
fill(-6911935);
beginShape();
vertex(276,206);
vertex(273,211);
vertex(269,220);
vertex(273,226);
vertex(278,224);
vertex(283,214);
vertex(284,206);
endShape(CLOSE);
fill(-3622811);
beginShape();
vertex(274,211);
vertex(278,210);
vertex(284,203);
vertex(286,200);
vertex(289,211);
vertex(287,221);
vertex(287,226);
vertex(286,235);
vertex(294,239);
vertex(307,239);
vertex(316,237);
vertex(320,233);
vertex(320,226);
vertex(320,217);
vertex(320,211);
vertex(323,206);
vertex(329,203);
vertex(331,195);
vertex(329,191);
vertex(321,189);
vertex(310,189);
vertex(304,180);
vertex(300,180);
vertex(295,188);
vertex(289,190);
vertex(284,189);
vertex(278,189);
vertex(272,194);
vertex(271,206);
endShape(CLOSE);
fill(-5991602);
beginShape();
vertex(282,209);
vertex(283,205);
vertex(286,199);
vertex(289,199);
vertex(293,203);
vertex(296,206);
vertex(296,208);
vertex(286,213);
endShape(CLOSE);
fill(-10334682);
beginShape();
vertex(273,210);
vertex(269,208);
vertex(269,200);
vertex(270,194);
vertex(273,189);
vertex(279,186);
vertex(286,185);
vertex(292,186);
vertex(295,186);
vertex(298,180);
vertex(297,174);
vertex(300,167);
vertex(304,175);
vertex(301,186);
vertex(294,189);
vertex(291,189);
vertex(283,188);
vertex(276,194);
vertex(274,204);
endShape(CLOSE);
fill(-7900612);
beginShape();
vertex(273,211);
vertex(271,209);
vertex(270,207);
vertex(266,218);
vertex(266,225);
vertex(271,225);
endShape(CLOSE);
fill(-4216492);
beginShape();
vertex(271,226);
vertex(266,221);
vertex(260,221);
vertex(256,222);
vertex(251,221);
vertex(246,217);
vertex(239,215);
vertex(245,222);
vertex(257,227);
vertex(271,234);
endShape(CLOSE);
fill(-9939925);
beginShape();
vertex(270,233);
vertex(268,230);
vertex(265,226);
vertex(262,226);
vertex(257,226);
vertex(252,224);
vertex(248,221);
vertex(246,219);
vertex(240,213);
vertex(236,214);
vertex(237,223);
vertex(240,225);
vertex(249,228);
vertex(254,228);
vertex(260,233);
vertex(264,236);
vertex(267,236);
endShape(CLOSE);
fill(-9873625);
beginShape();
vertex(270,226);
vertex(272,230);
vertex(277,223);
vertex(272,221);
vertex(273,215);
vertex(272,209);
vertex(270,209);
vertex(267,218);
vertex(266,221);
vertex(271,223);
endShape(CLOSE);
fill(-6057658);
beginShape();
vertex(246,203);
vertex(240,213);
vertex(240,219);
vertex(249,220);
vertex(253,220);
vertex(254,214);
vertex(251,208);
vertex(248,204);
vertex(248,198);
vertex(246,193);
vertex(244,193);
vertex(243,202);
endShape(CLOSE);
fill(-11781081);
beginShape();
vertex(246,200);
vertex(245,206);
vertex(240,212);
vertex(239,216);
vertex(244,218);
vertex(251,221);
vertex(248,223);
vertex(245,225);
vertex(240,226);
vertex(239,224);
vertex(236,222);
vertex(235,215);
vertex(237,209);
vertex(240,205);
endShape(CLOSE);
fill(-1845888);
beginShape();
vertex(249,207);
vertex(248,209);
vertex(252,215);
vertex(255,214);
vertex(250,206);
endShape(CLOSE);
fill(-7638213);
beginShape();
vertex(249,185);
vertex(244,180);
vertex(240,176);
vertex(234,167);
vertex(234,176);
vertex(239,182);
vertex(226,177);
vertex(230,184);
vertex(240,187);
vertex(248,191);
endShape(CLOSE);
fill(-7439557);
beginShape();
vertex(244,184);
vertex(244,188);
vertex(244,193);
vertex(246,197);
vertex(245,201);
vertex(243,203);
vertex(239,205);
vertex(239,206);
vertex(244,208);
vertex(247,208);
vertex(250,205);
vertex(251,203);
vertex(249,194);
vertex(251,187);
vertex(247,186);
endShape(CLOSE);
fill(-4083612);
beginShape();
vertex(244,182);
vertex(245,188);
vertex(248,189);
vertex(251,187);
vertex(249,181);
vertex(246,180);
endShape(CLOSE);
fill(-1319292);
beginShape();
vertex(248,191);
vertex(250,189);
vertex(252,187);
vertex(254,189);
vertex(247,193);
endShape(CLOSE);
fill(-6057658);
beginShape();
vertex(247,195);
vertex(248,199);
vertex(248,203);
vertex(250,203);
vertex(251,199);
vertex(250,193);
vertex(248,193);
endShape(CLOSE);
fill(-8361422);
beginShape();
vertex(246,183);
vertex(248,181);
vertex(248,179);
vertex(242,180);
vertex(244,184);
endShape(CLOSE);
fill(-4808896);
beginShape();
vertex(302,196);
vertex(306,205);
vertex(311,207);
vertex(308,213);
vertex(304,213);
vertex(303,212);
endShape(CLOSE);
fill(-528717);
beginShape();
vertex(282,197);
vertex(282,200);
vertex(288,197);
vertex(294,201);
vertex(300,204);
vertex(301,195);
vertex(305,194);
vertex(312,199);
vertex(318,196);
vertex(321,193);
vertex(314,190);
vertex(312,186);
vertex(307,180);
vertex(304,176);
vertex(305,183);
vertex(303,188);
vertex(301,189);
vertex(295,191);
vertex(286,191);
vertex(282,194);
endShape(CLOSE);
fill(-4611238);
beginShape();
vertex(331,189);
vertex(326,194);
vertex(320,201);
vertex(326,208);
vertex(338,206);
vertex(344,205);
vertex(346,197);
vertex(346,191);
vertex(337,189);
endShape(CLOSE);
fill(-3298217);
beginShape();
vertex(348,182);
vertex(348,186);
vertex(346,193);
vertex(342,197);
vertex(341,201);
vertex(343,206);
vertex(348,210);
vertex(351,207);
vertex(352,193);
endShape(CLOSE);
fill(-4480169);
beginShape();
vertex(352,171);
vertex(347,170);
vertex(345,178);
vertex(348,181);
vertex(352,183);
vertex(352,180);
endShape(CLOSE);
fill(-5660077);
beginShape();
vertex(348,142);
vertex(349,251);
vertex(354,252);
vertex(351,142);
endShape(CLOSE);
fill(-7900074);
beginShape();
vertex(353,172);
vertex(350,173);
vertex(350,177);
vertex(353,181);
endShape(CLOSE);
fill(-1583498);
beginShape();
vertex(329,195);
vertex(333,197);
vertex(338,194);
vertex(341,193);
vertex(342,192);
vertex(332,191);
endShape(CLOSE);
fill(-1580399);
beginShape();
vertex(314,187);
vertex(318,186);
vertex(324,186);
vertex(329,188);
vertex(329,192);
vertex(321,193);
vertex(313,191);
vertex(310,188);
endShape(CLOSE);
fill(-5268140);
beginShape();
vertex(303,216);
vertex(296,220);
vertex(295,238);
vertex(294,236);
vertex(293,220);
vertex(302,214);
endShape(CLOSE);
fill(-5598377);
beginShape();
vertex(306,213);
vertex(306,216);
vertex(311,220);
vertex(309,246);
vertex(313,246);
vertex(311,246);
vertex(313,220);
endShape(CLOSE);
fill(-2767249);
beginShape();
vertex(302,220);
vertex(302,246);
vertex(300,246);
vertex(300,221);
endShape(CLOSE);
fill(-3821473);
beginShape();
vertex(304,216);
vertex(301,218);
vertex(302,229);
vertex(304,230);
endShape(CLOSE);
fill(-5268119);
beginShape();
vertex(288,182);
vertex(288,185);
vertex(292,187);
vertex(294,183);
vertex(297,173);
vertex(298,162);
vertex(305,161);
vertex(308,172);
vertex(309,181);
vertex(310,184);
vertex(312,184);
vertex(316,182);
vertex(313,178);
vertex(313,158);
vertex(305,155);
vertex(300,154);
vertex(294,156);
vertex(292,160);
vertex(290,164);
vertex(290,179);
endShape(CLOSE);
fill(-3622300);
beginShape();
vertex(298,177);
vertex(299,183);
vertex(302,186);
vertex(308,184);
vertex(309,176);
vertex(309,168);
vertex(309,164);
vertex(306,160);
vertex(301,157);
vertex(298,162);
vertex(296,166);
endShape(CLOSE);
fill(-6190011);
beginShape();
vertex(294,168);
vertex(294,174);
vertex(296,184);
vertex(297,186);
vertex(300,186);
vertex(300,181);
vertex(298,180);
vertex(300,178);
vertex(303,176);
vertex(303,170);
vertex(300,172);
vertex(296,170);
vertex(296,166);
endShape(CLOSE);
fill(-5136566);
beginShape();
vertex(296,166);
vertex(301,166);
vertex(302,169);
vertex(302,172);
vertex(306,172);
vertex(305,167);
vertex(304,165);
vertex(312,165);
vertex(311,163);
vertex(295,163);
endShape(CLOSE);
fill(-4280213);
beginShape();
vertex(299,176);
vertex(302,173);
vertex(304,173);
vertex(307,174);
vertex(308,175);
vertex(307,180);
vertex(305,185);
vertex(301,184);
endShape(CLOSE);
fill(-1187436);
beginShape();
vertex(306,177);
vertex(305,179);
vertex(305,183);
vertex(307,184);
vertex(309,181);
vertex(309,177);
endShape(CLOSE);
fill(-7965896);
beginShape();
vertex(301,176);
vertex(300,177);
vertex(299,181);
vertex(301,184);
vertex(303,185);
vertex(302,180);
endShape(CLOSE);
fill(-3424118);
beginShape();
vertex(295,163);
vertex(296,166);
vertex(299,162);
vertex(301,160);
vertex(304,159);
vertex(306,162);
vertex(309,164);
vertex(312,163);
vertex(308,158);
vertex(304,156);
vertex(298,156);
endShape(CLOSE);
fill(-5728959);
beginShape();
vertex(296,164);
vertex(312,164);
vertex(312,166);
vertex(300,166);
endShape(CLOSE);

fill(-9871564);
beginShape();
vertex(345,237);
vertex(346,250);
vertex(363,251);
vertex(368,241);
vertex(369,237);
vertex(343,236);
endShape(CLOSE);

fill(-6515870);
beginShape();
vertex(344,238);
vertex(369,238);
vertex(370,234);
vertex(341,234);
endShape(CLOSE);
fill(-11713753);
beginShape();
//vertex(349,226);
// vertex(347,226);
vertex(346,238);
vertex(341,234);
vertex(340,245);
vertex(333,259);
vertex(335,278);
vertex(334,294);
vertex(341,305);
vertex(346,290);
vertex(346,269);
// vertex(360,287);
// vertex(361,273);
// vertex(362,255);
// vertex(364,251);
// vertex(358,252);
// vertex(353,245);
// vertex(352,235);
endShape(CLOSE);

fill(-6189493);
beginShape();
vertex(288,230);
vertex(277,238);
vertex(269,245);
vertex(264,251);
vertex(267,286);
vertex(268,301);
vertex(272,309);
vertex(284,312);
vertex(301,310);
vertex(308,306);
vertex(315,292);
vertex(324,290);
vertex(330,289);
vertex(337,301);
vertex(340,301);
vertex(336,282);
vertex(332,245);
vertex(329,237);
vertex(322,232);
vertex(316,236);
vertex(295,240);
vertex(286,236);
endShape(CLOSE);
fill(-1978507);
beginShape();
vertex(286,230);
vertex(285,235);
vertex(289,238);
vertex(296,240);
vertex(305,240);
vertex(312,238);
vertex(318,237);
vertex(321,234);
vertex(323,233);
vertex(321,232);
vertex(318,234);
vertex(313,236);
vertex(306,237);
vertex(299,238);
vertex(293,237);
vertex(289,234);
vertex(288,234);
vertex(288,230);
endShape(CLOSE);
fill(-4214948);
beginShape();
vertex(274,248);
vertex(275,261);
vertex(281,271);
vertex(285,274);
vertex(284,266);
vertex(280,256);
vertex(278,250);
endShape(CLOSE);
fill(-3425677);
beginShape();
vertex(277,240);
vertex(274,241);
vertex(276,244);
vertex(281,245);
vertex(289,249);
vertex(301,253);
vertex(308,253);
vertex(301,250);
vertex(296,248);
vertex(291,248);
vertex(283,244);
vertex(281,241);
endShape(CLOSE);
fill(-3491474);
beginShape();
vertex(282,236);
vertex(282,240);
vertex(285,241);
vertex(289,240);
vertex(296,244);
vertex(304,245);
vertex(310,244);
vertex(316,240);
vertex(310,240);
vertex(306,241);
vertex(303,242);
vertex(298,242);
vertex(293,241);
vertex(289,238);
vertex(288,236);
endShape(CLOSE);
fill(-7176889);
beginShape();
vertex(242,250);
vertex(242,308);
vertex(256,307);
vertex(254,249);
endShape(CLOSE);
fill(-8952007);
beginShape();
vertex(239,248);
vertex(242,253);
vertex(256,253);
vertex(257,248);
endShape(CLOSE);
fill(-9938387);
beginShape();
vertex(234,238);
vertex(241,249);
vertex(255,249);
vertex(256,243);
vertex(260,239);
endShape(CLOSE);
fill(-6452141);
beginShape();
vertex(254,245);
vertex(257,242);
vertex(259,302);
vertex(256,305);
endShape(CLOSE);
fill(-8885957);
beginShape();
vertex(254,252);
vertex(257,249);
vertex(257,246);
vertex(253,249);
endShape(CLOSE);
fill(-8886980);
beginShape();
vertex(266,250);
vertex(261,256);
vertex(259,262);
vertex(258,272);
vertex(258,278);
vertex(259,288);
vertex(259,306);
vertex(260,314);
vertex(264,317);
vertex(272,318);
vertex(278,318);
vertex(282,317);
vertex(284,313);
vertex(294,313);
vertex(301,311);
vertex(306,306);
vertex(311,300);
vertex(317,296);
vertex(325,284);
vertex(324,272);
vertex(324,256);
vertex(322,243);
vertex(319,238);
vertex(317,239);
vertex(314,243);
vertex(312,249);
vertex(312,254);
vertex(312,257);
vertex(311,261);
vertex(307,268);
vertex(303,273);
vertex(298,277);
vertex(291,280);
vertex(288,280);
vertex(285,285);
vertex(283,289);
vertex(284,300);
vertex(283,304);
vertex(275,307);
vertex(271,305);
vertex(272,290);
vertex(268,258);
endShape(CLOSE);
fill(-8688574);
beginShape();
vertex(269,278);
vertex(268,288);
vertex(271,295);
vertex(277,297);
vertex(278,292);
vertex(277,286);
vertex(276,276);
vertex(275,268);
vertex(272,266);
vertex(270,268);
endShape(CLOSE);
fill(-9938889);
beginShape();
vertex(268,291);
vertex(275,294);
vertex(278,292);
vertex(282,286);
vertex(284,284);
vertex(286,286);
vertex(288,295);
vertex(285,305);
vertex(281,310);
vertex(270,310);
vertex(265,305);
vertex(264,296);
vertex(265,292);
endShape(CLOSE);
fill(-8293559);
beginShape();
vertex(346,250);
vertex(345,306);
vertex(362,305);
vertex(362,250);
endShape(CLOSE);
fill(-12107490);
beginShape();
// vertex(346,252);
// vertex(345,247);
vertex(342,253);
vertex(363,254);
vertex(365,250);
vertex(342,249);
endShape(CLOSE);


fill(-5923989);
beginShape();
vertex(260,238);
vertex(256,240);
vertex(235,240);
vertex(233,236);
vertex(258,237);
endShape(CLOSE);

// fill(-10859220);
// beginShape();
// vertex(349,234);
// vertex(348,237);
// vertex(348,242);
// vertex(350,250);
// vertex(356,253);
// vertex(361,253);
// vertex(362,250);
// vertex(356,248);
// vertex(354,241);
// vertex(353,237);
// vertex(352,234);
// vertex(348,232);
// vertex(348,237);
// endShape(CLOSE);
fill(-6318772);
beginShape();
vertex(240,322);
vertex(232,334);
vertex(375,334);
vertex(376,331);
vertex(366,324);
endShape(CLOSE);
fill(-7767225);
beginShape();
vertex(228,330);
vertex(231,332);
vertex(233,345);
vertex(240,349);
vertex(370,349);
vertex(374,346);
vertex(378,331);
endShape(CLOSE);
fill(-9674945);
beginShape();
vertex(234,347);
vertex(236,352);
vertex(370,353);
vertex(375,347);
endShape(CLOSE);
fill(-9016503);
beginShape();
vertex(239,322);
vertex(232,330);
vertex(239,330);
vertex(241,325);
endShape(CLOSE);
fill(-7108266);
beginShape();
vertex(367,324);
vertex(370,331);
vertex(376,331);
vertex(370,325);
endShape(CLOSE);
fill(-8555961);
beginShape();
vertex(370,398);
vertex(238,397);
vertex(238,351);
vertex(368,351);
endShape(CLOSE);
fill(-9673401);
beginShape();
vertex(238,393);
vertex(228,413);
vertex(385,412);
vertex(370,393);
endShape(CLOSE);
fill(-11188691);
beginShape();
vertex(241,303);
vertex(242,318);
vertex(257,318);
vertex(255,303);
vertex(256,304);
endShape(CLOSE);
fill(-11517401);
beginShape();
vertex(255,305);
vertex(258,301);
vertex(259,318);
vertex(255,317);
endShape(CLOSE);
fill(-11318995);
beginShape();
vertex(240,322);
vertex(259,322);
vertex(260,316);
vertex(241,316);
endShape(CLOSE);
fill(-12238813);
beginShape();
vertex(265,317);
vertex(265,317);
vertex(264,322);
vertex(281,322);
vertex(281,318);
vertex(279,317);
vertex(274,314);
vertex(267,315);
endShape(CLOSE);
fill(-11056848);
beginShape();
vertex(320,293);
vertex(319,304);
vertex(321,312);
vertex(322,318);
vertex(323,324);
vertex(329,325);
vertex(333,324);
vertex(334,323);
vertex(334,318);
vertex(333,303);
vertex(330,292);
endShape(CLOSE);
fill(-10267085);
beginShape();
vertex(301,310);
vertex(307,311);
vertex(312,309);
vertex(316,301);
vertex(318,297);
vertex(326,297);
vertex(331,297);
vertex(336,302);
vertex(338,305);
vertex(340,304);
vertex(340,301);
vertex(336,294);
vertex(332,290);
vertex(326,289);
vertex(318,290);
vertex(313,294);
vertex(310,299);
vertex(306,305);
vertex(301,309);
endShape(CLOSE);
fill(-8753852);
beginShape();
vertex(325,321);
vertex(325,317);
vertex(328,315);
vertex(333,317);
vertex(335,322);
vertex(329,322);
endShape(CLOSE);
fill(-9543366);
beginShape();
vertex(321,320);
vertex(320,324);
vertex(324,324);
vertex(324,318);
vertex(322,314);
endShape(CLOSE);
fill(-6779823);
beginShape();
vertex(320,323);
vertex(337,323);
vertex(337,327);
vertex(321,328);
vertex(314,326);
vertex(306,328);
vertex(295,326);
vertex(291,323);
endShape(CLOSE);
fill(-10859216);
beginShape();
vertex(345,302);
vertex(344,303);
vertex(363,302);
vertex(363,324);
vertex(344,324);
endShape(CLOSE);
fill(-9279936);
beginShape();
vertex(344,324);
vertex(346,323);
vertex(347,302);
vertex(344,300);
vertex(344,300);
vertex(343,318);
vertex(343,324);
endShape(CLOSE);
fill(-7371961);
beginShape();
vertex(371,341);
vertex(372,334);
vertex(236,334);
vertex(238,341);
endShape(CLOSE);
fill(-7700652);
beginShape();
vertex(244,356);
vertex(361,357);
vertex(362,386);
vertex(244,386);
endShape(CLOSE);
fill(-8819135);
beginShape();
vertex(250,362);
vertex(356,362);
vertex(357,382);
vertex(250,381);
endShape(CLOSE);
fill(-6516148);
beginShape();
vertex(266,368);
vertex(268,374);
vertex(273,377);
vertex(274,369);
vertex(278,366);
vertex(280,364);
vertex(270,364);
endShape(CLOSE);
fill(-5200296);
beginShape();
vertex(292,370);
vertex(293,376);
vertex(294,376);
vertex(297,372);
vertex(301,369);
vertex(310,372);
vertex(313,372);
vertex(315,368);
vertex(310,365);
vertex(304,364);
vertex(298,364);
vertex(294,368);
endShape(CLOSE);
fill(-5398444);
beginShape();
vertex(326,368);
vertex(333,368);
vertex(338,368);
vertex(337,372);
vertex(331,376);
vertex(340,376);
vertex(342,373);
vertex(340,365);
vertex(332,364);
vertex(328,365);
endShape(CLOSE);
fill(-5857722);
beginShape();
vertex(345,368);
vertex(347,372);
vertex(351,376);
vertex(354,373);
vertex(354,370);
vertex(347,364);
endShape(CLOSE);
fill(-6581429);
beginShape();
vertex(320,374);
vertex(314,374);
vertex(311,377);
vertex(321,378);
vertex(325,376);
vertex(322,370);
endShape(CLOSE);
fill(-11120594);
beginShape();
vertex(284,369);
vertex(280,371);
vertex(281,376);
vertex(286,376);
vertex(290,371);
vertex(289,365);
endShape(CLOSE);
fill(-6646967);
beginShape();
vertex(264,368);
vertex(259,366);
vertex(257,365);
vertex(252,369);
vertex(254,377);
vertex(261,377);
vertex(258,372);
endShape(CLOSE);
fill(-3573161);
beginShape();
vertex(212,360);
vertex(211,354);
vertex(215,353);
vertex(214,338);
vertex(218,340);
vertex(218,326);
vertex(224,330);
vertex(228,328);
vertex(229,334);
vertex(232,337);
vertex(230,349);
vertex(236,352);
vertex(233,356);
vertex(230,361);
vertex(229,361);
endShape(CLOSE);
fill(-932756);
beginShape();
vertex(217,357);
vertex(217,349);
vertex(220,350);
vertex(221,338);
vertex(223,344);
vertex(225,344);
vertex(227,361);
vertex(216,361);
endShape(CLOSE);
fill(-8949433);
beginShape();
vertex(211,358);
vertex(234,359);
vertex(232,365);
vertex(224,368);
vertex(216,368);
vertex(216,365);
vertex(212,361);
endShape(CLOSE);
fill(-10988487);
beginShape();
vertex(215,362);
vertex(220,364);
vertex(224,368);
vertex(219,369);
vertex(215,367);
vertex(210,362);
vertex(209,360);
vertex(208,358);
vertex(212,358);
endShape(CLOSE);
fill(-9607353);
beginShape();
vertex(220,368);
vertex(220,410);
vertex(222,411);
vertex(223,409);
vertex(224,369);
endShape(CLOSE);
fill(-10594244);
beginShape();
vertex(220,368);
vertex(220,369);
vertex(222,369);
vertex(221,366);
endShape(CLOSE);
fill(-9673152);
beginShape();
vertex(386,367);
vertex(387,412);
vertex(389,414);
vertex(391,412);
vertex(389,366);
endShape(CLOSE);
fill(-3638437);
beginShape();
vertex(381,359);
vertex(377,342);
vertex(382,344);
vertex(383,336);
vertex(387,341);
vertex(389,329);
vertex(394,338);
vertex(398,337);
vertex(396,349);
vertex(400,350);
vertex(394,362);
endShape(CLOSE);
fill(-472988);
beginShape();
vertex(384,356);
vertex(382,349);
vertex(384,352);
vertex(386,345);
vertex(388,350);
vertex(391,342);
vertex(392,352);
vertex(393,352);
vertex(393,362);
vertex(384,360);
endShape(CLOSE);
fill(-5002910);
beginShape();
vertex(376,358);
vertex(400,359);
vertex(395,365);
vertex(390,368);
endShape(CLOSE);
fill(-10529225);
beginShape();
vertex(388,360);
vertex(393,363);
vertex(393,366);
vertex(390,368);
vertex(386,368);
vertex(378,365);
vertex(376,361);
vertex(375,358);
vertex(385,358);
endShape(CLOSE);
fill(-10660810);
beginShape();
vertex(202,420);
vertex(202,400);
vertex(402,400);
vertex(402,420);
endShape(CLOSE);
fill(-3165603);
beginShape();
vertex(329,143);
vertex(337,140);
vertex(340,134);
vertex(346,133);
vertex(348,137);
vertex(353,137);
vertex(356,133);
vertex(359,133);
vertex(362,139);
vertex(370,142);
vertex(364,144);
vertex(361,146);
vertex(355,144);
vertex(352,147);
vertex(352,155);
vertex(347,146);
vertex(346,144);
vertex(343,144);
vertex(340,146);
endShape(CLOSE);
fill(-7636154);
beginShape();
vertex(352,143);
vertex(354,141);
vertex(357,150);
vertex(351,146);
endShape(CLOSE);
fill(-7044016);
beginShape();
vertex(353,138);
vertex(354,138);
vertex(356,136);
vertex(360,138);
vertex(367,142);
vertex(372,142);
vertex(366,140);
vertex(361,134);
vertex(357,133);
vertex(354,133);
endShape(CLOSE);
popMatrix();
    }],
    ["the hanging gardens of babylon",
    function(){
    pushMatrix();
    translate(-25,-40);
    scale(13/12);
    noStroke();
//background(-9863021);

fill(-11506559);
beginShape();
vertex(20,215);
vertex(26,201);
vertex(45,200);
vertex(53,209);
vertex(72,214);
vertex(88,212);
vertex(101,206);
vertex(135,206);
vertex(160,213);
vertex(177,220);
vertex(206,242);
vertex(344,305);
vertex(488,357);
vertex(550,353);
vertex(581,360);
vertex(596,375);
vertex(580,411);
vertex(32,278);
endShape(CLOSE);


fill(-9341617);
beginShape();
vertex(381,222);
vertex(382,230);
vertex(387,237);
vertex(402,239);
vertex(414,241);
vertex(429,251);
vertex(430,233);
vertex(437,231);
vertex(440,223);
vertex(446,219);
vertex(444,213);
vertex(433,212);
vertex(430,217);
vertex(422,217);
vertex(416,213);
vertex(408,211);
vertex(403,211);
vertex(394,208);
vertex(387,213);
vertex(381,219);
endShape(CLOSE);
fill(-2577036);
beginShape();
vertex(126,260);
vertex(146,243);
vertex(168,240);
vertex(248,229);
vertex(314,246);
vertex(221,266);
endShape(CLOSE);
fill(-6065091);
beginShape();
vertex(480,296);
vertex(560,345);
vertex(516,363);
vertex(597,415);
vertex(597,440);
vertex(26,433);
vertex(13,263);
vertex(64,238);
vertex(108,259);
vertex(179,254);
vertex(247,227);
vertex(293,240);
vertex(319,227);
vertex(353,237);
vertex(368,240);
endShape(CLOSE);
fill(-2445979);
beginShape();
vertex(377,232);
vertex(493,258);
vertex(483,293);
vertex(346,254);
endShape(CLOSE);



fill(-9486057);
for(var i = 0; i < 8; i++){
    pushMatrix();
    translate(378+i*6,225+i*1.4);
    beginShape();
    vertex(0,0);
    vertex(3,2);
    vertex(3,12);
    vertex(0,10);
    endShape();
    popMatrix();
}
for(var i = 0; i < 8; i++){
    pushMatrix();
    translate(438+i*6,238+i*1.4);
    beginShape();
    vertex(0,-2);
    vertex(3,0);
    vertex(3,12);
    vertex(0,10);
    endShape();
    popMatrix();
}
for(var i = 4; i < 8; i++){
    pushMatrix();
    translate(317+i*6,221+i*1.4);
    beginShape();
    vertex(0,-2);
    vertex(3,0);
    vertex(3,12);
    vertex(0,10);
    endShape();
    popMatrix();
}
for(var i = 0; i < 5; i++){
    pushMatrix();
    translate(372-i*4.5,227+i*3.8);
    beginShape();
    vertex(0,0);
    vertex(3,2);
    vertex(3,12);
    vertex(0,10);
    endShape();
    popMatrix();
}


fill(-9670596);
beginShape();
vertex(282,239);
vertex(300,246);
vertex(315,249);
vertex(323,248);
vertex(333,252);
vertex(343,253);
vertex(346,248);
vertex(346,239);
vertex(340,233);
vertex(340,233);
vertex(333,226);
vertex(327,225);
vertex(324,227);
vertex(314,224);
vertex(306,225);
vertex(300,232);
vertex(294,233);
vertex(286,233);
endShape(CLOSE);

fill(-9486057);
for(var i = 0; i < 17; i++){
    pushMatrix();
    translate(253+i*8,220+i*2);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 0; i < 11; i++){
    pushMatrix();
    translate(219+i*8,229+i*2.2);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 0; i < 12; i++){
    pushMatrix();
    translate(359+i*8.4,277+i*2.3);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 0; i < 10; i++){
    pushMatrix();
    translate(282+i*13.1,273+i*5.1);
    beginShape();
    vertex(0,-2);
    vertex(5,0);
    vertex(5,23);
    vertex(0,20);
    endShape();
    popMatrix();
}

for(var i = 0; i < 4; i++){
    pushMatrix();
    translate(451-i*6.1,323+i*14.5);
    beginShape();
    vertex(0,-2);
    vertex(5,0);
    vertex(5,23);
    vertex(0,20);
    endShape();
    popMatrix();
}


for(var i = 0; i < 5; i++){
    pushMatrix();
    translate(289-i*9,263+i*4);
    beginShape();
    vertex(0,-2);
    vertex(5,0);
    vertex(5,22);
    vertex(0,20);
    endShape();
    popMatrix();
}
for(var i = 0; i < 5; i++){
    pushMatrix();
    translate(61+i*10,227+i*6);
    beginShape();
    vertex(0,-2);
    vertex(5,0);
    vertex(5,22);
    vertex(0,20);
    endShape();
    popMatrix();
}
for(var i = 0; i < 2; i++){
    pushMatrix();
    translate(42+i*10,237+i*6);
    beginShape();
    vertex(0,-2);
    vertex(5,0);
    vertex(5,22);
    vertex(0,20);
    endShape();
    popMatrix();
}

for(var i = 0; i < 5; i++){
    pushMatrix();
    translate(372-i*7,261+i*5);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 0; i < 10; i++){
    pushMatrix();
    translate(526+i*7,360+i*4.5);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 0; i < 8; i++){
    pushMatrix();
    translate(502+i*7,298+i*4.5);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 5; i < 8; i++){
    pushMatrix();
    translate(496+i*7,366-i*3.6);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,7);
    vertex(0,5);
    endShape();
    popMatrix();
}
for(var i = 0; i < 8; i++){
    pushMatrix();
    translate(473+i*7,374-i*2);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,12);
    vertex(0,10);
    endShape();
    popMatrix();
}

for(var i =0; i < 4; i++){
    pushMatrix();
    translate(211-i*9,229+i*4);
    beginShape();
    vertex(0,-2);
    vertex(4,0);
    vertex(4,17);
    vertex(0,15);
    endShape();
    popMatrix();
}
for(var i = 0; i < 2; i++){
    pushMatrix();
    translate(430-i*4.5,239+i*3.8);
    beginShape();
    vertex(0,0);
    vertex(3,2);
    vertex(3,12);
    vertex(0,10);
    endShape();
    popMatrix();
}

for(var i = 0; i < 10; i++){
    pushMatrix();
    translate(141-i*4.5,232+i*3.8);
    beginShape();
    vertex(0,0);
    vertex(3,2);
    vertex(3,24);
    vertex(0,30);
    endShape();
    popMatrix();
}
for(var i = 0; i < 9; i++){
    pushMatrix();
    translate(144+i*6.2,231-i*0.25);
    beginShape();
    vertex(0,0);
    vertex(3,2);
    vertex(3,12);
    vertex(0,10);
    endShape();
    popMatrix();
}
for(var i = 0; i < 13; i++){
    pushMatrix();
    translate(179+i*6.2,226-i*0.6);
    beginShape();
    vertex(0,0);
    vertex(3,2);
    vertex(3,17);
    vertex(0,15);
    endShape();
    popMatrix();
}




fill(-397666);
beginShape();
vertex(378,226);
vertex(381,225);
vertex(429,235);
vertex(445,220);
vertex(402,214);
vertex(404,212);
vertex(447,217);
vertex(449,221);
vertex(432,238);
endShape(CLOSE);
fill(-10328756);
beginShape();
vertex(380,224);
vertex(379,219);
vertex(382,216);
vertex(387,218);
vertex(388,214);
vertex(390,214);
vertex(390,210);
vertex(392,208);
vertex(397,210);
vertex(397,206);
vertex(399,207);
vertex(403,211);
vertex(402,218);
vertex(405,227);
endShape(CLOSE);
fill(-8618162);
beginShape();
vertex(386,226);
vertex(385,221);
vertex(390,223);
vertex(390,219);
vertex(393,220);
vertex(394,222);
vertex(397,222);
vertex(397,218);
vertex(403,218);
vertex(406,220);
vertex(406,215);
vertex(410,215);
vertex(411,221);
vertex(416,217);
vertex(419,222);
vertex(420,221);
vertex(421,224);
vertex(424,220);
vertex(433,220);
vertex(434,224);
vertex(436,220);
vertex(444,220);
vertex(429,234);
endShape(CLOSE);
fill(-204429);
beginShape();
vertex(255,220);
vertex(484,282);
vertex(500,248);
vertex(431,232);
vertex(429,235);
vertex(378,223);
vertex(368,230);
vertex(320,219);
vertex(320,221);
vertex(361,231);
vertex(345,239);
vertex(354,242);
vertex(378,227);
vertex(424,237);
vertex(409,252);
vertex(420,255);
vertex(438,237);
vertex(494,250);
vertex(480,276);
vertex(263,219);
endShape(CLOSE);
fill(-9736387);
beginShape();
vertex(294,227);
vertex(295,223);
vertex(298,221);
vertex(302,223);
vertex(304,219);
vertex(307,217);
vertex(313,219);
vertex(316,216);
vertex(321,215);
vertex(328,218);
vertex(329,223);
vertex(336,223);
vertex(339,227);
vertex(340,231);
vertex(344,233);
vertex(346,236);
vertex(344,240);
endShape(CLOSE);
fill(-12303051);
beginShape();
vertex(340,257);
vertex(340,238);
vertex(342,237);
vertex(343,258);
endShape(CLOSE);
fill(-12105923);
beginShape();
vertex(342,257);
vertex(343,238);
vertex(345,235);
vertex(347,239);
vertex(347,258);
endShape(CLOSE);
fill(-10460352);
beginShape();
vertex(308,229);
vertex(307,224);
vertex(313,222);
vertex(315,225);
vertex(317,220);
vertex(323,221);
vertex(324,224);
vertex(329,223);
vertex(325,230);
vertex(318,229);
vertex(319,232);
endShape(CLOSE);
fill(-9935293);
beginShape();
vertex(349,257);
vertex(349,234);
vertex(351,233);
vertex(353,236);
vertex(354,258);
vertex(356,262);
vertex(351,261);
endShape(CLOSE);
fill(-10329284);
beginShape();
vertex(360,262);
vertex(360,255);
vertex(359,242);
vertex(362,238);
vertex(363,257);
vertex(363,262);
vertex(362,268);
vertex(359,268);
endShape(CLOSE);
fill(-11580096);
beginShape();
vertex(365,262);
vertex(365,243);
vertex(368,240);
vertex(369,262);
endShape(CLOSE);
fill(-8092078);
beginShape();
vertex(371,261);
vertex(371,242);
vertex(372,239);
vertex(373,244);
vertex(375,257);
endShape(CLOSE);
fill(-9408185);
beginShape();
vertex(385,260);
vertex(388,254);
vertex(392,255);
vertex(396,258);
vertex(401,254);
vertex(408,252);
vertex(411,247);
vertex(418,252);
vertex(424,247);
vertex(430,248);
vertex(432,256);
vertex(435,261);
vertex(433,267);
vertex(438,262);
vertex(444,258);
vertex(449,261);
vertex(449,270);
vertex(457,266);
vertex(463,270);
vertex(468,276);
vertex(472,268);
vertex(476,269);
vertex(477,273);
vertex(482,266);
vertex(486,268);
vertex(487,274);
vertex(491,274);
vertex(491,278);
vertex(493,282);
vertex(494,287);
vertex(487,300);
vertex(391,272);
endShape(CLOSE);
fill(-9142709);
beginShape();
vertex(378,278);
vertex(379,268);
vertex(386,260);
vertex(390,264);
vertex(397,264);
vertex(399,259);
vertex(406,257);
vertex(418,258);
vertex(427,263);
vertex(432,267);
vertex(440,269);
vertex(441,278);
vertex(445,278);
vertex(451,280);
vertex(452,283);
vertex(456,287);
vertex(459,290);
vertex(467,286);
vertex(477,281);
vertex(480,281);
vertex(487,285);
vertex(489,285);
vertex(494,289);
vertex(492,298);
vertex(499,302);
vertex(487,306);
vertex(475,307);
endShape(CLOSE);
fill(-659569);
beginShape();
vertex(498,294);
vertex(495,297);
vertex(556,331);
vertex(542,336);
vertex(545,340);
vertex(567,334);
vertex(566,332);
endShape(CLOSE);
fill(-13553374);
beginShape();
vertex(494,299);
vertex(497,301);
vertex(499,301);
vertex(502,266);
vertex(499,266);
endShape(CLOSE);
fill(-13487329);
beginShape();
vertex(505,315);
vertex(508,313);
vertex(512,301);
vertex(512,295);
vertex(505,307);
endShape(CLOSE);
fill(-1385353);
beginShape();
vertex(468,373);
vertex(472,378);
vertex(524,358);
vertex(592,402);
vertex(595,399);
vertex(523,351);
endShape(CLOSE);
fill(-10656716);
beginShape();
vertex(472,325);
vertex(461,315);
vertex(464,310);
vertex(468,309);
vertex(467,299);
vertex(474,295);
vertex(478,298);
vertex(482,291);
vertex(488,287);
vertex(496,294);
vertex(493,300);
vertex(498,302);
vertex(503,305);
vertex(503,317);
vertex(509,313);
vertex(514,314);
vertex(519,319);
vertex(524,319);
vertex(528,325);
vertex(535,327);
vertex(538,332);
vertex(542,331);
vertex(544,336);
vertex(546,338);
vertex(546,350);
vertex(540,352);
vertex(520,349);
vertex(490,346);
endShape(CLOSE);
fill(-12170975);
beginShape();
vertex(461,316);
vertex(462,311);
vertex(465,310);
vertex(468,316);
vertex(473,313);
vertex(478,316);
vertex(482,327);
vertex(486,323);
vertex(490,329);
vertex(497,328);
vertex(502,331);
vertex(499,338);
vertex(508,339);
vertex(506,348);
vertex(511,349);
vertex(512,355);
vertex(494,358);
vertex(468,350);
vertex(456,341);
endShape(CLOSE);
fill(-14736876);
beginShape();
vertex(524,351);
vertex(517,344);
vertex(506,341);
vertex(504,349);
vertex(500,346);
vertex(490,345);
vertex(486,346);
vertex(487,337);
vertex(478,331);
vertex(471,335);
vertex(473,327);
vertex(463,328);
vertex(457,336);
vertex(460,354);
vertex(487,365);
endShape(CLOSE);
fill(-14804207);
beginShape();
vertex(484,369);
vertex(486,360);
vertex(480,349);
vertex(475,341);
vertex(469,342);
vertex(460,335);
vertex(454,336);
vertex(449,365);
vertex(450,378);
endShape(CLOSE);
fill(-9012434);
beginShape();
vertex(519,383);
vertex(511,376);
vertex(514,365);
vertex(520,350);
vertex(528,332);
vertex(540,309);
vertex(542,310);
vertex(534,349);
vertex(527,378);
vertex(524,383);
endShape(CLOSE);
fill(-11250397);
beginShape();
vertex(519,384);
vertex(513,380);
vertex(510,376);
vertex(520,348);
vertex(536,317);
vertex(526,352);
endShape(CLOSE);
fill(-11974881);
beginShape();
vertex(537,400);
vertex(537,394);
vertex(564,350);
vertex(557,377);
vertex(541,404);
endShape(CLOSE);
fill(-10854863);
beginShape();
vertex(550,407);
vertex(548,391);
vertex(580,346);
vertex(567,403);
vertex(561,411);
endShape(CLOSE);
fill(-12368607);
beginShape();
vertex(290,279);
vertex(291,267);
vertex(292,255);
vertex(295,263);
vertex(299,276);
vertex(295,281);
endShape(CLOSE);
fill(-13487324);

beginShape();
vertex(298,281);
vertex(297,270);
vertex(300,266);
vertex(304,269);
vertex(306,280);
endShape(CLOSE);
fill(-9210570);
beginShape();
vertex(305,280);
vertex(305,270);
vertex(306,263);
vertex(308,258);
vertex(311,271);
vertex(311,282);
endShape(CLOSE);
fill(-13422300);
beginShape();
vertex(312,282);
vertex(310,272);
vertex(316,272);
vertex(317,282);
vertex(315,284);
vertex(316,285);
endShape(CLOSE);
fill(-10264781);
beginShape();
vertex(318,283);
vertex(315,268);
vertex(317,255);
vertex(322,270);
vertex(324,283);
vertex(321,287);
endShape(CLOSE);
fill(-13487579);
beginShape();
vertex(326,286);
vertex(322,276);
vertex(323,270);
vertex(328,277);
vertex(329,285);
vertex(329,289);
endShape(CLOSE);
fill(-12763607);
beginShape();
vertex(331,282);
vertex(328,274);
vertex(328,257);
vertex(332,272);
vertex(335,284);
vertex(333,288);
endShape(CLOSE);
fill(-12895191);
beginShape();
vertex(339,281);
vertex(336,275);
vertex(339,261);
vertex(343,271);
vertex(345,279);
endShape(CLOSE);
fill(-11709391);
beginShape();
vertex(346,276);
vertex(344,271);
vertex(346,260);
vertex(350,273);
vertex(351,277);
endShape(CLOSE);
fill(-11053239);
beginShape();
vertex(481,257);
vertex(481,245);
vertex(485,235);
vertex(487,238);
vertex(483,254);
endShape(CLOSE);
fill(-11579328);
beginShape();
vertex(481,260);
vertex(484,264);
vertex(489,260);
vertex(493,231);
vertex(484,251);
endShape(CLOSE);
fill(-332412);
beginShape();
vertex(303,233);
vertex(279,244);
vertex(296,250);
vertex(245,275);
vertex(255,279);
vertex(272,271);
vertex(386,315);
vertex(308,407);
vertex(335,416);
vertex(407,314);
vertex(341,290);
vertex(359,275);
vertex(456,306);
vertex(422,366);
vertex(435,374);
vertex(472,302);
vertex(366,271);
vertex(384,254);
vertex(375,251);
vertex(333,287);
vertex(282,268);
vertex(313,250);
vertex(297,244);
vertex(314,235);
vertex(306,233);
endShape(CLOSE);
fill(-1582985);
beginShape();
vertex(260,218);
vertex(174,226);
vertex(171,228);
vertex(142,228);
vertex(116,247);
vertex(64,222);
vertex(32,236);
vertex(57,249);
vertex(62,243);
vertex(48,236);
vertex(62,229);
vertex(116,257);
vertex(145,233);
vertex(173,232);
vertex(178,228);
vertex(258,220);
endShape(CLOSE);
fill(-11644626);
beginShape();
vertex(263,236);
vertex(264,220);
vertex(261,219);
vertex(259,236);
endShape(CLOSE);
fill(-10986709);
beginShape();
vertex(258,235);
vertex(259,217);
vertex(257,213);
vertex(255,225);
vertex(254,211);
vertex(252,210);
vertex(251,232);
vertex(249,211);
vertex(246,209);
vertex(246,228);
vertex(244,214);
vertex(243,214);
vertex(242,228);
vertex(240,212);
vertex(237,212);
vertex(237,230);
endShape(CLOSE);
fill(-12828628);
beginShape();
vertex(211,229);
vertex(211,219);
vertex(209,212);
vertex(208,229);
vertex(204,230);
vertex(206,219);
vertex(202,210);
vertex(199,210);
vertex(202,233);
vertex(199,232);
vertex(196,217);
vertex(195,218);
vertex(196,235);
endShape(CLOSE);
fill(-12433112);
beginShape();
vertex(173,238);
vertex(171,223);
vertex(168,221);
vertex(170,242);
vertex(166,234);
vertex(165,222);
vertex(161,219);
vertex(162,239);
vertex(155,217);
vertex(152,218);
vertex(150,222);
vertex(156,239);
vertex(152,243);
vertex(148,241);
vertex(145,220);
vertex(143,218);
vertex(143,233);
vertex(146,248);
endShape(CLOSE);
fill(-12829152);
beginShape();
vertex(127,251);
vertex(132,251);
vertex(131,238);
vertex(125,228);
vertex(122,229);
vertex(126,255);
endShape(CLOSE);
fill(-11253203);
beginShape();
vertex(129,261);
vertex(126,254);
vertex(130,248);
vertex(140,250);
vertex(139,244);
vertex(149,240);
vertex(153,243);
vertex(154,238);
vertex(163,237);
vertex(170,238);
vertex(172,237);
vertex(173,241);
vertex(164,245);
endShape(CLOSE);
fill(-401038);
beginShape();
vertex(154,253);
vertex(160,255);
vertex(221,228);
vertex(281,245);
vertex(288,240);
vertex(221,224);
vertex(206,230);
vertex(175,229);
vertex(173,231);
vertex(199,232);
vertex(146,250);
endShape(CLOSE);
fill(-868258);
beginShape();
vertex(244,275);
vertex(255,280);
vertex(270,273);
vertex(384,316);
vertex(286,432);
vertex(326,433);
vertex(411,311);
vertex(270,262);
endShape(CLOSE);
fill(-8242612);
beginShape();
vertex(152,254);
vertex(157,246);
vertex(160,248);
vertex(161,244);
vertex(164,244);
vertex(166,247);
vertex(169,245);
vertex(171,248);
vertex(172,242);
vertex(174,244);
vertex(174,238);
vertex(177,246);
vertex(178,241);
vertex(182,245);
vertex(184,244);
vertex(186,231);
vertex(192,238);
vertex(194,240);
vertex(194,255);
endShape(CLOSE);
fill(-8107689);
beginShape();
vertex(204,235);
vertex(199,230);
vertex(196,230);
vertex(196,236);
vertex(200,240);
vertex(200,244);
vertex(203,246);
vertex(202,251);
vertex(206,246);
vertex(209,252);
vertex(213,254);
vertex(214,252);
vertex(213,247);
vertex(212,245);
vertex(209,244);
vertex(210,242);
vertex(204,239);
endShape(CLOSE);
fill(-5610118);
beginShape();
vertex(220,234);
vertex(220,239);
vertex(222,241);
vertex(222,246);
vertex(224,246);
vertex(225,240);
vertex(227,238);
vertex(221,233);
endShape(CLOSE);
fill(-8088754);
beginShape();
vertex(216,243);
vertex(222,240);
vertex(226,233);
vertex(232,242);
vertex(236,244);
vertex(230,250);
vertex(232,256);
vertex(229,262);
vertex(214,267);
vertex(206,261);
endShape(CLOSE);
fill(-7057055);
beginShape();
vertex(212,247);
vertex(216,251);
vertex(216,256);
vertex(207,253);
vertex(206,249);
vertex(211,240);
endShape(CLOSE);
fill(-7189165);
beginShape();
vertex(225,246);
vertex(220,250);
vertex(222,256);
vertex(230,257);
vertex(232,255);
vertex(232,247);
vertex(227,244);
vertex(226,236);
vertex(218,234);
vertex(219,244);
endShape(CLOSE);
fill(-9555908);
beginShape();
vertex(228,255);
vertex(226,252);
vertex(221,248);
vertex(218,254);
vertex(226,258);
endShape(CLOSE);
fill(-7715242);
beginShape();
vertex(244,239);
vertex(240,244);
vertex(240,256);
vertex(246,259);
vertex(248,257);
vertex(252,260);
vertex(256,257);
vertex(253,240);
vertex(251,244);
vertex(246,243);
endShape(CLOSE);
fill(-12113362);
beginShape();
vertex(241,246);
vertex(234,241);
vertex(233,246);
vertex(236,257);
vertex(241,262);
vertex(241,254);
endShape(CLOSE);
fill(-7054230);
beginShape();
vertex(258,248);
vertex(254,252);
vertex(258,260);
vertex(261,260);
vertex(268,258);
vertex(270,254);
vertex(262,252);
endShape(CLOSE);
fill(-9801951);
beginShape();
vertex(226,263);
vertex(230,258);
vertex(231,257);
vertex(231,248);
vertex(238,255);
vertex(239,258);
vertex(243,256);
vertex(248,258);
vertex(252,258);
vertex(258,256);
vertex(264,258);
vertex(271,258);
vertex(271,260);
vertex(264,264);
vertex(256,266);
vertex(254,265);
vertex(252,264);
vertex(248,266);
vertex(241,266);
vertex(237,263);
endShape(CLOSE);
fill(-11651794);
beginShape();
vertex(219,242);
vertex(217,246);
vertex(215,277);
vertex(218,278);
endShape(CLOSE);
fill(-12435176);
beginShape();
vertex(358,333);
vertex(351,319);
vertex(354,307);
vertex(357,286);
vertex(360,273);
vertex(366,284);
vertex(368,297);
vertex(369,322);
vertex(370,333);
vertex(366,337);
endShape(CLOSE);
fill(-10526169);
beginShape();
vertex(368,331);
vertex(364,316);
vertex(364,300);
vertex(372,268);
vertex(373,250);
vertex(376,247);
vertex(378,254);
vertex(379,273);
vertex(378,326);
vertex(370,334);
endShape(CLOSE);
fill(-11447268);
beginShape();
vertex(380,292);
vertex(383,290);
vertex(390,295);
vertex(394,294);
vertex(397,300);
vertex(404,302);
vertex(412,301);
vertex(420,308);
vertex(420,316);
vertex(427,310);
vertex(436,313);
vertex(437,320);
vertex(435,323);
vertex(437,316);
vertex(440,314);
vertex(444,320);
vertex(444,328);
vertex(440,335);
vertex(435,339);
vertex(431,334);
vertex(420,330);
vertex(414,324);
vertex(408,320);
vertex(409,316);
vertex(406,313);
vertex(378,303);
vertex(379,290);
endShape(CLOSE);
fill(-12434400);
beginShape();
vertex(406,335);
vertex(408,328);
vertex(411,323);
vertex(416,322);
vertex(422,328);
vertex(428,327);
vertex(436,332);
vertex(440,331);
vertex(436,338);
vertex(428,339);
vertex(427,343);
vertex(422,348);
vertex(408,345);
vertex(405,340);
endShape(CLOSE);
fill(-14671592);
beginShape();
vertex(410,334);
vertex(402,327);
vertex(391,326);
vertex(388,336);
vertex(392,346);
vertex(402,349);
vertex(412,349);
vertex(420,346);
vertex(425,343);
endShape(CLOSE);
fill(-13421285);
beginShape();
vertex(424,358);
vertex(416,346);
vertex(406,341);
vertex(392,341);
vertex(378,346);
vertex(371,350);
vertex(368,356);
vertex(358,352);
vertex(347,351);
vertex(342,355);
vertex(340,363);
vertex(346,369);
vertex(354,371);
vertex(357,376);
vertex(354,380);
vertex(346,384);
vertex(342,383);
vertex(336,380);
vertex(326,380);
vertex(324,388);
vertex(323,396);
vertex(318,400);
vertex(316,406);
vertex(303,407);
vertex(293,414);
vertex(300,420);
vertex(304,429);
vertex(520,438);
vertex(545,438);
vertex(546,408);
vertex(523,407);
vertex(509,398);
vertex(510,390);
vertex(510,384);
vertex(511,380);
vertex(499,374);
vertex(489,374);
vertex(484,379);
vertex(478,382);
vertex(470,376);
vertex(464,376);
vertex(456,380);
vertex(440,378);
vertex(428,370);
vertex(427,369);
endShape(CLOSE);
fill(-14145253);
beginShape();
vertex(352,430);
vertex(349,407);
vertex(362,401);
vertex(358,388);
vertex(366,376);
vertex(374,380);
vertex(375,384);
vertex(385,383);
vertex(388,394);
vertex(384,401);
vertex(392,404);
vertex(388,428);
vertex(384,437);
endShape(CLOSE);

fill(-14474727);
beginShape();
vertex(386,428);
vertex(378,416);
vertex(390,411);
vertex(388,394);
vertex(405,390);
vertex(415,382);
vertex(424,375);
vertex(434,382);
vertex(429,397);
vertex(424,404);
vertex(438,394);
vertex(450,396);
vertex(453,407);
vertex(448,420);
vertex(453,419);
vertex(462,431);
vertex(458,438);
vertex(384,435);
endShape(CLOSE);
fill(-16185080);
beginShape();
vertex(456,432);
vertex(460,422);
vertex(455,415);
vertex(450,409);
vertex(447,401);
vertex(450,392);
vertex(458,388);
vertex(463,400);
vertex(468,404);
vertex(471,398);
vertex(481,392);
vertex(485,395);
vertex(495,379);
vertex(502,383);
vertex(498,392);
vertex(492,398);
vertex(498,402);
vertex(515,402);
vertex(517,409);
vertex(509,413);
vertex(506,416);
vertex(512,423);
vertex(520,424);
vertex(520,430);
vertex(518,435);
vertex(467,436);
endShape(CLOSE);
fill(-15000813);
beginShape();
vertex(452,430);
vertex(442,422);
vertex(446,407);
vertex(460,405);
vertex(470,414);
vertex(474,426);
vertex(486,424);
vertex(488,433);
endShape(CLOSE);
fill(-12568286);
beginShape();
vertex(120,252);
vertex(122,243);
vertex(113,214);
vertex(108,210);
vertex(108,228);
vertex(117,252);
endShape(CLOSE);
fill(-13226213);
beginShape();
vertex(105,255);
vertex(104,244);
vertex(100,236);
vertex(101,230);
vertex(107,238);
vertex(110,240);
vertex(110,252);
endShape(CLOSE);
fill(-11646437);
beginShape();
vertex(96,256);
vertex(98,248);
vertex(90,240);
vertex(84,220);
vertex(79,216);
vertex(84,240);
vertex(86,262);
endShape(CLOSE);
fill(-11645146);
beginShape();
vertex(72,248);
vertex(77,255);
vertex(82,249);
vertex(78,236);
vertex(65,209);
vertex(62,212);
vertex(70,240);
endShape(CLOSE);
fill(-14144989);
beginShape();
vertex(56,251);
vertex(69,250);
vertex(64,238);
vertex(60,222);
vertex(56,212);
vertex(53,208);
vertex(50,206);
vertex(46,202);
vertex(41,204);
vertex(51,230);
endShape(CLOSE);
fill(-4493006);
beginShape();
vertex(64,252);
vertex(66,251);
vertex(73,247);
vertex(74,251);
vertex(73,256);
vertex(76,258);
vertex(81,251);
vertex(86,252);
vertex(81,260);
vertex(94,266);
vertex(90,272);
vertex(58,254);
endShape(CLOSE);
fill(-12895454);
beginShape();
vertex(45,247);
vertex(40,235);
vertex(37,223);
vertex(29,213);
vertex(30,226);
vertex(36,254);
endShape(CLOSE);
fill(-10922711);
beginShape();
vertex(27,245);
vertex(23,229);
vertex(20,215);
vertex(14,204);
vertex(8,208);
vertex(20,260);
endShape(CLOSE);
fill(-14606056);
beginShape();
vertex(11,247);
vertex(5,218);
vertex(2,204);
vertex(5,266);
endShape(CLOSE);
fill(-14803436);
beginShape();
vertex(3,224);
vertex(13,222);
vertex(31,229);
vertex(40,236);
vertex(46,250);
vertex(56,266);
vertex(42,281);
vertex(10,296);
vertex(0,298);
endShape(CLOSE);
fill(-11382741);
beginShape();
vertex(16,285);
vertex(16,272);
vertex(22,273);
vertex(28,278);
vertex(36,275);
vertex(38,260);
vertex(46,251);
vertex(56,250);
vertex(70,257);
vertex(73,264);
vertex(84,270);
vertex(91,270);
vertex(100,277);
vertex(98,290);
vertex(67,298);
vertex(54,298);
vertex(44,300);
vertex(36,295);
vertex(24,294);
vertex(18,292);
endShape(CLOSE);
fill(-9492422);
beginShape();
vertex(89,269);
vertex(88,263);
vertex(81,266);
vertex(84,270);
endShape(CLOSE);
fill(-9623498);
beginShape();
vertex(80,291);
vertex(75,288);
vertex(83,283);
vertex(86,282);
vertex(82,275);
vertex(89,273);
vertex(90,272);
vertex(89,267);
vertex(96,266);
vertex(96,265);
vertex(93,262);
vertex(100,256);
vertex(102,260);
vertex(107,258);
vertex(108,252);
vertex(112,248);
vertex(116,248);
vertex(119,254);
vertex(128,252);
vertex(130,255);
vertex(132,266);
endShape(CLOSE);
fill(-14474472);
beginShape();
vertex(75,284);
vertex(66,279);
vertex(62,268);
vertex(55,256);
vertex(54,268);
vertex(56,284);
vertex(51,290);
vertex(38,286);
vertex(14,284);
vertex(26,294);
vertex(16,298);
vertex(37,321);
vertex(44,312);
vertex(47,306);
vertex(61,318);
vertex(66,321);
vertex(84,307);
endShape(CLOSE);
fill(-13947368);
beginShape();
vertex(68,321);
vertex(64,314);
vertex(57,312);
vertex(63,309);
vertex(61,307);
vertex(67,308);
vertex(71,304);
vertex(75,308);
vertex(71,320);
endShape(CLOSE);
fill(-8166871);
beginShape();
vertex(67,307);
vertex(59,308);
vertex(60,305);
vertex(56,302);
vertex(58,300);
vertex(54,297);
vertex(60,296);
vertex(60,293);
vertex(64,295);
vertex(68,290);
vertex(68,294);
vertex(73,290);
vertex(74,296);
vertex(80,294);
vertex(73,308);
endShape(CLOSE);

fill(-12831714);
beginShape();
vertex(68,298);
vertex(60,305);
vertex(64,304);
vertex(67,306);
vertex(68,302);
vertex(71,301);
endShape(CLOSE);
fill(-1011897);
beginShape();
vertex(230,277);
vertex(324,321);
vertex(184,432);
vertex(73,355);
endShape(CLOSE);
fill(-11519190);
beginShape();
vertex(249,279);
vertex(323,312);
vertex(320,321);
vertex(241,285);
endShape(CLOSE);
fill(-10858196);
beginShape();
vertex(261,314);
vertex(268,314);
vertex(271,307);
vertex(264,300);
vertex(260,295);
vertex(251,295);
vertex(240,302);
vertex(244,312);
vertex(255,320);
vertex(260,319);
endShape(CLOSE);
fill(-13818090);
beginShape();
vertex(261,314);
vertex(266,314);
vertex(264,310);
vertex(263,300);
vertex(260,286);
vertex(258,288);
vertex(258,299);
vertex(257,311);
endShape(CLOSE);
fill(-13357285);
beginShape();
vertex(247,308);
vertex(254,314);
vertex(256,308);
vertex(252,303);
vertex(253,296);
vertex(256,296);
vertex(253,290);
vertex(254,284);
vertex(254,279);
vertex(250,275);
vertex(248,272);
vertex(246,280);
vertex(247,293);
vertex(248,302);
vertex(245,306);
endShape(CLOSE);
fill(-9480138);
beginShape();
vertex(322,312);
vertex(320,319);
vertex(275,356);
vertex(274,348);
endShape(CLOSE);
fill(-5606606);
beginShape();
vertex(249,377);
vertex(276,356);
vertex(296,394);
vertex(272,412);
endShape(CLOSE);
fill(-13028048);
beginShape();
vertex(274,349);
vertex(274,357);
vertex(298,397);
vertex(298,389);
endShape(CLOSE);
fill(-13490151);
beginShape();
vertex(300,368);
vertex(300,378);
vertex(302,380);
vertex(302,366);
endShape(CLOSE);
fill(-10343370);
beginShape();
vertex(300,373);
vertex(294,370);
vertex(298,367);
vertex(294,366);
vertex(297,363);
vertex(294,362);
vertex(300,354);
vertex(305,357);
vertex(307,362);
vertex(304,364);
vertex(308,365);
vertex(304,367);
vertex(308,370);
endShape(CLOSE);
fill(-13618914);
beginShape();
vertex(316,351);
vertex(312,357);
vertex(308,356);
vertex(308,366);
vertex(319,368);
vertex(322,364);
vertex(327,366);
vertex(330,360);
vertex(332,358);
vertex(326,353);
vertex(324,350);
endShape(CLOSE);
fill(-11124940);
beginShape();
vertex(312,370);
vertex(312,363);
vertex(314,355);
vertex(316,357);
vertex(319,363);
vertex(316,368);
vertex(314,370);
endShape(CLOSE);
fill(-16052215);
beginShape();
vertex(326,353);
vertex(322,327);
vertex(325,326);
vertex(330,348);
vertex(334,354);
endShape(CLOSE);
fill(-8046506);
beginShape();
vertex(324,332);
vertex(318,334);
vertex(316,337);
vertex(312,337);
vertex(325,338);
vertex(330,344);
vertex(331,336);
vertex(338,338);
vertex(338,334);
vertex(332,331);
vertex(336,328);
vertex(330,321);
vertex(328,324);
vertex(324,324);
endShape(CLOSE);
fill(-9030833);
beginShape();
vertex(324,344);
vertex(314,345);
vertex(316,348);
vertex(322,348);
vertex(326,346);
vertex(327,343);
endShape(CLOSE);
fill(-12633575);
beginShape();
vertex(84,347);
vertex(80,334);
vertex(72,320);
vertex(62,319);
vertex(56,318);
vertex(54,325);
vertex(78,368);
vertex(80,363);
endShape(CLOSE);
fill(-13487331);
beginShape();
vertex(69,336);
vertex(58,324);
vertex(58,329);
vertex(52,319);
vertex(43,306);
vertex(40,307);
vertex(40,318);
vertex(34,312);
vertex(32,314);
vertex(31,320);
vertex(33,324);
vertex(24,320);
vertex(22,324);
vertex(22,328);
vertex(18,323);
vertex(14,328);
vertex(17,333);
vertex(6,318);
vertex(2,327);
vertex(8,340);
vertex(10,347);
vertex(6,372);
vertex(10,382);
vertex(20,382);
vertex(38,385);
vertex(56,382);
vertex(73,375);
vertex(85,370);
vertex(86,362);
endShape(CLOSE);
fill(-15395564);
beginShape();
vertex(28,348);
vertex(34,346);
vertex(28,330);
vertex(39,336);
vertex(44,342);
vertex(50,341);
vertex(60,346);
vertex(68,357);
vertex(69,362);
vertex(62,361);
vertex(56,370);
vertex(48,374);
vertex(42,372);
vertex(30,369);
vertex(28,372);
endShape(CLOSE);
fill(-14342372);
beginShape();
vertex(28,367);
vertex(16,358);
vertex(20,350);
vertex(12,348);
vertex(4,349);
vertex(2,374);
vertex(6,395);
vertex(22,394);
vertex(36,383);
endShape(CLOSE);
fill(-1329830);
beginShape();
vertex(206,394);
vertex(228,390);
vertex(240,382);
vertex(257,354);
vertex(262,332);
vertex(260,321);
vertex(252,311);
vertex(239,306);
endShape(CLOSE);
fill(-1600437);
beginShape();
vertex(211,388);
vertex(224,384);
vertex(238,370);
vertex(251,353);
vertex(256,340);
vertex(256,324);
vertex(253,318);
vertex(250,311);
vertex(238,306);
vertex(229,306);
endShape(CLOSE);
fill(-8626389);
beginShape();
vertex(212,374);
vertex(222,370);
vertex(236,364);
vertex(245,354);
vertex(251,343);
vertex(254,332);
vertex(252,321);
vertex(248,313);
vertex(243,309);
vertex(232,306);
vertex(209,305);
vertex(175,308);
vertex(120,320);
vertex(96,330);
vertex(84,334);
vertex(82,346);
vertex(86,359);
vertex(100,371);
vertex(121,384);
vertex(158,388);
vertex(198,384);
endShape(CLOSE);
fill(-11847645);
beginShape();
vertex(95,368);
vertex(92,357);
vertex(84,335);
vertex(91,334);
vertex(108,383);
endShape(CLOSE);
fill(-11584219);
beginShape();
vertex(121,378);
vertex(115,351);
vertex(114,344);
vertex(122,345);
vertex(137,393);
vertex(126,405);
endShape(CLOSE);
fill(-10597839);
beginShape();
vertex(160,385);
vertex(150,345);
vertex(157,344);
vertex(173,394);
endShape(CLOSE);
fill(-10072785);
beginShape();
vertex(185,336);
vertex(198,392);
vertex(203,386);
vertex(192,326);
endShape(CLOSE);
fill(-9678542);
beginShape();
vertex(214,324);
vertex(221,374);
vertex(228,368);
vertex(220,312);
endShape(CLOSE);
fill(-3109573);
beginShape();
vertex(233,334);
vertex(230,336);
vertex(230,340);
vertex(236,342);
vertex(241,341);
vertex(245,337);
vertex(240,332);
endShape(CLOSE);
fill(-1931972);
beginShape();
vertex(237,320);
vertex(238,326);
vertex(244,328);
vertex(246,325);
vertex(246,321);
vertex(242,318);
endShape(CLOSE);
fill(-5407162);
beginShape();
vertex(233,336);
vertex(235,338);
vertex(238,338);
vertex(240,336);
vertex(235,303);
vertex(230,302);
endShape(CLOSE);
fill(-5467574);
beginShape();
vertex(240,323);
vertex(244,322);
vertex(243,294);
vertex(236,292);
vertex(239,323);
vertex(242,326);
vertex(244,322);
endShape(CLOSE);
fill(-9801676);
beginShape();
vertex(180,376);
vertex(182,366);
vertex(190,364);
vertex(198,362);
vertex(202,356);
vertex(212,358);
vertex(216,352);
vertex(224,358);
vertex(228,356);
vertex(232,343);
vertex(238,343);
vertex(235,350);
vertex(248,346);
vertex(252,349);
vertex(240,352);
vertex(250,354);
vertex(252,357);
vertex(238,358);
vertex(247,366);
vertex(248,367);
vertex(235,364);
vertex(228,370);
vertex(230,374);
vertex(225,381);
vertex(222,394);
vertex(196,411);
endShape(CLOSE);
fill(-14144998);
beginShape();
vertex(64,354);
vertex(70,346);
vertex(78,348);
vertex(83,345);
vertex(93,350);
vertex(96,364);
vertex(101,363);
vertex(107,385);
vertex(85,394);
vertex(65,388);
endShape(CLOSE);
fill(-14012132);
beginShape();
vertex(92,378);
vertex(98,372);
vertex(108,371);
vertex(117,377);
vertex(125,372);
vertex(132,381);
vertex(136,378);
vertex(140,382);
vertex(144,376);
vertex(150,378);
vertex(152,382);
vertex(158,376);
vertex(166,378);
vertex(166,383);
vertex(172,382);
vertex(175,374);
vertex(179,366);
vertex(184,366);
vertex(188,375);
vertex(189,366);
vertex(194,364);
vertex(198,367);
vertex(208,364);
vertex(204,370);
vertex(209,373);
vertex(202,392);
vertex(106,393);
endShape(CLOSE);
fill(-11050707);
beginShape();
vertex(202,374);
vertex(209,368);
vertex(218,366);
vertex(224,372);
vertex(224,379);
vertex(216,380);
vertex(208,378);
endShape(CLOSE);
fill(-9411553);
beginShape();
vertex(180,392);
vertex(181,379);
vertex(187,370);
vertex(190,374);
vertex(191,383);
vertex(196,378);
vertex(200,382);
vertex(200,386);
vertex(204,380);
vertex(207,381);
vertex(208,394);
vertex(200,400);
vertex(186,398);
endShape(CLOSE);
fill(-13488878);
beginShape();
vertex(236,354);
vertex(239,350);
vertex(245,348);
vertex(250,351);
vertex(242,353);
endShape(CLOSE);
fill(-10464991);
beginShape();
vertex(236,358);
vertex(235,350);
vertex(236,345);
vertex(234,346);
vertex(231,353);
vertex(233,360);
endShape(CLOSE);
fill(-8813761);
beginShape();
vertex(212,362);
vertex(208,358);
vertex(214,358);
vertex(217,356);
vertex(224,360);
vertex(224,364);
vertex(218,362);
vertex(222,368);
vertex(215,365);
vertex(207,369);
endShape(CLOSE);
fill(-12633302);
beginShape();
vertex(204,408);
vertex(200,401);
vertex(241,372);
vertex(246,374);
vertex(251,380);
endShape(CLOSE);
fill(-12829395);
beginShape();
vertex(246,376);
vertex(276,418);
vertex(260,418);
vertex(245,383);
endShape(CLOSE);
fill(-14670567);
beginShape();
vertex(209,407);
vertex(206,400);
vertex(216,398);
vertex(214,394);
vertex(219,390);
vertex(222,396);
vertex(224,387);
vertex(227,387);
vertex(232,388);
vertex(233,384);
vertex(237,382);
vertex(242,384);
vertex(242,376);
vertex(244,374);
vertex(250,379);
vertex(250,382);
vertex(254,381);
vertex(260,385);
vertex(258,395);
vertex(267,381);
vertex(270,384);
vertex(264,398);
vertex(268,398);
vertex(268,405);
vertex(252,414);
endShape(CLOSE);
fill(-7845275);
beginShape();
vertex(201,406);
vertex(204,401);
vertex(206,404);
vertex(209,401);
vertex(212,402);
vertex(214,404);
vertex(219,401);
vertex(226,402);
vertex(229,404);
vertex(224,396);
vertex(228,399);
vertex(230,394);
vertex(233,400);
vertex(235,398);
vertex(239,398);
vertex(240,400);
vertex(238,391);
vertex(244,390);
vertex(245,380);
vertex(248,383);
vertex(249,390);
vertex(250,396);
vertex(253,394);
vertex(253,386);
vertex(256,384);
vertex(258,392);
vertex(260,398);
vertex(263,397);
vertex(266,412);
vertex(210,416);
endShape(CLOSE);
fill(-6992275);
beginShape();
vertex(261,398);
vertex(258,399);
vertex(259,408);
vertex(264,408);
vertex(265,400);
endShape(CLOSE);
fill(-7256733);
beginShape();
vertex(269,399);
vertex(264,404);
vertex(272,410);
vertex(277,408);
vertex(276,401);
endShape(CLOSE);
fill(-12434904);
beginShape();
vertex(261,420);
vertex(263,412);
vertex(256,405);
vertex(251,396);
vertex(248,405);
vertex(242,399);
vertex(238,403);
vertex(242,408);
vertex(236,406);
vertex(234,400);
vertex(231,404);
vertex(231,408);
vertex(229,402);
vertex(226,404);
vertex(226,410);
vertex(220,405);
vertex(221,412);
vertex(222,410);
vertex(212,404);
vertex(207,408);
vertex(208,411);
vertex(202,403);
vertex(197,407);
vertex(198,401);
vertex(193,397);
vertex(189,401);
vertex(188,409);
vertex(191,392);
vertex(183,389);
vertex(180,396);
vertex(177,389);
vertex(170,390);
vertex(170,394);
vertex(162,385);
vertex(156,390);
vertex(152,382);
vertex(147,388);
vertex(148,391);
vertex(137,387);
vertex(138,394);
vertex(127,393);
vertex(127,407);
vertex(122,412);
vertex(118,420);
vertex(118,431);
vertex(124,436);
vertex(263,435);
endShape(CLOSE);
fill(-11712741);
beginShape();
vertex(136,399);
vertex(146,405);
vertex(151,396);
vertex(160,398);
vertex(164,392);
vertex(169,397);
vertex(172,392);
vertex(181,397);
vertex(190,398);
vertex(192,392);
vertex(186,388);
vertex(189,381);
vertex(187,372);
vertex(179,379);
vertex(180,387);
vertex(172,385);
vertex(166,384);
vertex(162,386);
vertex(158,390);
vertex(150,384);
vertex(143,384);
vertex(140,387);
vertex(133,386);
vertex(131,391);
endShape(CLOSE);
fill(-15856116);
beginShape();
vertex(236,436);
vertex(239,428);
vertex(244,427);
vertex(244,421);
vertex(249,426);
vertex(249,430);
vertex(252,421);
vertex(260,417);
vertex(264,422);
vertex(262,427);
vertex(264,418);
vertex(272,417);
vertex(269,410);
vertex(269,410);
vertex(270,404);
vertex(272,402);
vertex(280,406);
vertex(284,409);
vertex(291,409);
vertex(290,414);
vertex(299,416);
vertex(298,419);
vertex(313,419);
vertex(320,428);
vertex(322,437);
endShape(CLOSE);
fill(-14868967);
beginShape();
vertex(300,419);
vertex(294,416);
vertex(298,413);
vertex(294,407);
vertex(298,408);
vertex(302,408);
vertex(298,400);
vertex(302,398);
vertex(304,399);
vertex(308,392);
vertex(308,399);
vertex(314,403);
vertex(311,396);
vertex(315,390);
vertex(316,395);
vertex(321,392);
vertex(320,402);
vertex(328,398);
vertex(327,388);
vertex(330,381);
vertex(339,386);
vertex(338,397);
vertex(352,380);
vertex(359,386);
vertex(348,398);
vertex(354,407);
vertex(340,414);
vertex(349,426);
vertex(339,429);
vertex(312,428);
vertex(304,426);
endShape(CLOSE);
fill(-13421789);
beginShape();
vertex(310,434);
vertex(308,423);
vertex(314,419);
vertex(326,420);
vertex(326,424);
vertex(337,418);
vertex(352,424);
vertex(355,428);
vertex(370,425);
vertex(374,430);
vertex(375,438);
endShape(CLOSE);
fill(-15395311);
beginShape();
vertex(128,411);
vertex(128,404);
vertex(120,389);
vertex(103,386);
vertex(96,388);
vertex(95,400);
vertex(104,414);
vertex(101,428);
vertex(110,434);
vertex(118,436);
vertex(122,432);
endShape(CLOSE);
fill(-12631248);
beginShape();
vertex(14,389);
vertex(10,404);
vertex(21,412);
vertex(31,402);
vertex(39,396);
vertex(48,403);
vertex(54,402);
vertex(61,397);
vertex(71,404);
vertex(75,397);
vertex(77,396);
vertex(85,406);
vertex(94,408);
vertex(95,403);
vertex(87,397);
vertex(84,386);
vertex(88,384);
vertex(90,375);
vertex(80,369);
vertex(73,371);
vertex(67,362);
vertex(60,364);
vertex(56,364);
vertex(51,362);
vertex(46,366);
vertex(45,369);
vertex(36,364);
vertex(28,366);
vertex(22,370);
vertex(24,379);
vertex(18,387);
vertex(9,387);
endShape(CLOSE);
fill(-12632278);
beginShape();
vertex(11,396);
vertex(4,410);
vertex(4,420);
vertex(4,433);
vertex(9,437);
vertex(14,431);
vertex(18,432);
vertex(29,438);
vertex(49,438);
vertex(84,438);
vertex(110,434);
vertex(104,421);
vertex(100,406);
vertex(88,403);
vertex(80,394);
vertex(74,399);
vertex(72,406);
vertex(60,396);
vertex(53,403);
vertex(52,408);
vertex(42,394);
vertex(24,400);
endShape(CLOSE);
fill(-15527153);
beginShape();
vertex(44,401);
vertex(44,410);
vertex(54,414);
vertex(58,409);
vertex(70,414);
vertex(82,409);
vertex(87,404);
vertex(76,395);
vertex(64,395);
vertex(52,394);
endShape(CLOSE);
fill(-14803176);
beginShape();
vertex(6,408);
vertex(20,400);
vertex(10,387);
vertex(6,386);
endShape(CLOSE);
fill(-5733558);
beginShape();
vertex(72,306);
vertex(70,318);
vertex(71,327);
vertex(74,334);
vertex(81,342);
vertex(94,348);
vertex(118,352);
vertex(144,350);
vertex(188,342);
vertex(224,325);
vertex(240,310);
vertex(246,300);
vertex(248,291);
vertex(246,280);
vertex(240,273);
vertex(133,286);
endShape(CLOSE);
fill(-11194342);
beginShape();
vertex(72,312);
vertex(73,320);
vertex(80,332);
vertex(92,341);
vertex(113,344);
vertex(132,344);
vertex(171,338);
vertex(190,334);
vertex(225,317);
vertex(241,299);
vertex(245,290);
vertex(245,280);
vertex(240,272);
vertex(123,286);
vertex(75,301);
endShape(CLOSE);
fill(-531345);
beginShape();
vertex(76,300);
vertex(76,310);
vertex(86,322);
vertex(102,332);
vertex(118,334);
vertex(142,333);
vertex(168,330);
vertex(206,315);
vertex(234,296);
vertex(241,278);
vertex(240,272);
vertex(230,264);
vertex(205,254);
vertex(183,250);
vertex(152,250);
vertex(125,258);
vertex(103,268);
vertex(86,282);
endShape(CLOSE);
fill(-3821694);
beginShape();
vertex(385,248);
vertex(387,248);
vertex(390,249);
vertex(390,239);
vertex(388,240);
vertex(387,246);
endShape(CLOSE);
fill(-13948653);
beginShape();
vertex(91,316);
vertex(100,318);
vertex(105,310);
vertex(111,306);
vertex(115,302);
vertex(148,276);
vertex(201,275);
vertex(205,272);
vertex(197,265);
vertex(200,264);
vertex(202,259);
vertex(190,255);
vertex(176,253);
vertex(150,252);
vertex(126,261);
vertex(120,259);
vertex(112,263);
vertex(91,275);
vertex(93,280);
vertex(88,287);
vertex(88,288);
vertex(80,292);
vertex(85,298);
vertex(80,304);
vertex(86,307);
vertex(91,316);
endShape(CLOSE);
fill(-5136032);
beginShape();
vertex(128,274);
vertex(138,269);
vertex(152,266);
vertex(165,266);
vertex(177,266);
vertex(188,268);
vertex(195,273);
vertex(198,281);
vertex(196,288);
vertex(187,298);
vertex(170,308);
vertex(150,310);
vertex(124,308);
vertex(111,299);
vertex(111,289);
vertex(114,284);
vertex(121,278);
endShape(CLOSE);
fill(-13349301);
beginShape();
vertex(93,297);
vertex(100,299);
vertex(100,296);
vertex(104,298);
vertex(110,294);
vertex(101,287);
vertex(95,289);
vertex(98,292);
endShape(CLOSE);
fill(-13349301);
beginShape();
vertex(122,264);
vertex(124,265);
vertex(127,263);
vertex(130,264);
vertex(132,262);
vertex(126,258);
vertex(122,260);
endShape(CLOSE);
fill(-13349301);
beginShape();
vertex(114,268);
vertex(114,273);
vertex(116,274);
vertex(118,270);
vertex(117,266);
endShape(CLOSE);
fill(-10717047);
beginShape();
vertex(98,280);
vertex(103,284);
vertex(106,284);
vertex(106,280);
vertex(103,276);
vertex(97,278);
endShape(CLOSE);
fill(-11709148);
beginShape();
vertex(194,262);
vertex(198,271);
vertex(201,274);
vertex(195,272);
vertex(194,281);
vertex(194,286);
vertex(189,292);
vertex(177,302);
vertex(163,306);
vertex(147,305);
vertex(138,308);
vertex(129,307);
vertex(122,304);
vertex(117,300);
vertex(112,300);
vertex(104,305);
vertex(100,304);
vertex(94,306);
vertex(94,312);
vertex(96,318);
vertex(96,325);
vertex(99,326);
vertex(101,320);
vertex(106,323);
vertex(110,322);
vertex(115,320);
vertex(120,322);
vertex(120,329);
vertex(122,330);
vertex(123,322);
vertex(131,323);
vertex(141,322);
vertex(144,326);
vertex(145,336);
vertex(148,337);
vertex(149,335);
vertex(150,323);
vertex(153,323);
vertex(159,325);
vertex(160,329);
vertex(162,324);
vertex(169,323);
vertex(177,320);
vertex(179,324);
vertex(183,318);
vertex(189,316);
vertex(195,315);
vertex(194,310);
vertex(194,308);
vertex(198,306);
vertex(203,308);
vertex(205,305);
vertex(202,303);
vertex(204,298);
vertex(215,302);
vertex(212,296);
vertex(213,292);
vertex(218,291);
vertex(222,295);
vertex(220,288);
vertex(216,285);
vertex(216,280);
vertex(218,278);
vertex(213,275);
vertex(218,274);
vertex(217,272);
vertex(212,271);
vertex(214,266);
vertex(212,261);
vertex(206,259);
vertex(204,260);
vertex(202,265);
vertex(200,264);
vertex(197,260);
endShape(CLOSE);
fill(-9862764);
beginShape();
vertex(196,263);
vertex(201,268);
vertex(207,263);
vertex(206,257);
vertex(199,261);
endShape(CLOSE);
fill(-4338501);
beginShape();
vertex(167,258);
vertex(165,254);
vertex(173,255);
vertex(172,260);
endShape(CLOSE);
fill(-13159402);
beginShape();
vertex(119,314);
vertex(124,317);
vertex(128,314);
vertex(135,318);
vertex(133,310);
vertex(128,307);
vertex(123,311);
endShape(CLOSE);
fill(-14737135);
beginShape();
vertex(161,310);
vertex(162,314);
vertex(160,318);
vertex(164,322);
vertex(168,320);
vertex(170,323);
vertex(177,320);
vertex(176,316);
vertex(171,310);
vertex(167,308);
endShape(CLOSE);
fill(-12696807);
beginShape();
vertex(179,302);
vertex(185,305);
vertex(190,305);
vertex(194,298);
vertex(198,294);
vertex(199,288);
vertex(203,284);
vertex(202,280);
vertex(198,280);
vertex(193,282);
vertex(192,288);
vertex(180,297);
endShape(CLOSE);
fill(-12702963);
beginShape();
vertex(107,309);
vertex(110,304);
vertex(109,301);
vertex(114,302);
vertex(116,304);
vertex(116,310);
vertex(114,312);
vertex(108,312);
endShape(CLOSE);
fill(-12632552);
beginShape();
vertex(136,309);
vertex(143,311);
vertex(148,312);
vertex(152,320);
vertex(158,319);
vertex(158,311);
vertex(154,306);
vertex(144,305);
vertex(136,306);
endShape(CLOSE);
fill(-14935024);
beginShape();
vertex(139,256);
vertex(138,262);
vertex(145,262);
vertex(148,264);
vertex(152,260);
vertex(147,256);
vertex(144,256);
endShape(CLOSE);
fill(-12240085);
beginShape();
vertex(146,288);
vertex(142,289);
vertex(137,293);
vertex(135,296);
vertex(141,295);
vertex(146,291);
endShape(CLOSE);
fill(-14605291);
beginShape();
vertex(168,275);
vertex(166,274);
vertex(163,276);
vertex(158,280);
vertex(161,281);
vertex(169,277);
endShape(CLOSE);
fill(-14149102);
beginShape();
vertex(162,286);
vertex(158,286);
vertex(158,288);
vertex(160,290);
vertex(166,290);
vertex(164,286);
endShape(CLOSE);
fill(-14409200);
beginShape();
vertex(148,284);
vertex(143,283);
vertex(141,282);
vertex(140,278);
vertex(146,279);
endShape(CLOSE);
fill(-10865132);
beginShape();
vertex(157,282);
vertex(151,282);
vertex(147,284);
vertex(148,288);
vertex(153,288);
vertex(157,286);
vertex(159,283);
endShape(CLOSE);
fill(-10200262);
beginShape();
vertex(180,269);
vertex(178,272);
vertex(178,276);
vertex(180,283);
vertex(180,287);
vertex(175,292);
vertex(164,298);
vertex(154,301);
vertex(141,300);
vertex(133,301);
vertex(126,302);
vertex(128,296);
vertex(128,284);
vertex(134,276);
vertex(142,273);
vertex(154,270);
vertex(163,270);
vertex(170,271);
vertex(174,272);
vertex(172,276);
vertex(167,279);
vertex(171,274);
vertex(168,272);
vertex(158,273);
vertex(151,274);
vertex(145,275);
vertex(134,279);
vertex(130,286);
vertex(130,298);
vertex(135,298);
vertex(148,297);
vertex(154,298);
vertex(165,294);
vertex(175,288);
vertex(177,282);
vertex(175,270);
vertex(170,269);
endShape(CLOSE);
fill(-11646423);
beginShape();
vertex(186,275);
vertex(183,276);
vertex(186,280);
vertex(185,282);
vertex(182,286);
vertex(188,288);
vertex(190,284);
vertex(191,281);
vertex(190,276);
vertex(190,275);
endShape(CLOSE);
fill(-13487082);
beginShape();
vertex(119,285);
vertex(116,292);
vertex(116,296);
vertex(117,296);
vertex(122,297);
vertex(125,295);
vertex(120,291);
vertex(124,286);
endShape(CLOSE);
fill(-15656687);
beginShape();
vertex(256,418);
vertex(263,423);
vertex(270,418);
vertex(260,413);
endShape(CLOSE);
fill(-14014180);
beginShape();
vertex(116,391);
vertex(122,388);
vertex(126,391);
vertex(129,404);
vertex(120,404);
vertex(116,401);
endShape(CLOSE);
fill(-12370661);
beginShape();
vertex(102,394);
vertex(98,388);
vertex(88,385);
vertex(81,392);
vertex(83,401);
vertex(88,408);
vertex(92,414);
vertex(91,420);
vertex(99,425);
vertex(106,426);
vertex(109,422);
vertex(109,417);
vertex(107,408);
vertex(106,406);
vertex(102,401);
endShape(CLOSE);
fill(-9275075);
beginShape();
vertex(2,328);
vertex(10,338);
vertex(20,336);
vertex(24,328);
vertex(35,328);
vertex(36,316);
vertex(36,304);
vertex(35,288);
vertex(22,283);
vertex(10,286);
vertex(2,293);
vertex(1,308);
endShape(CLOSE);
fill(-12633310);
beginShape();
vertex(58,323);
vertex(64,319);
vertex(60,313);
vertex(47,304);
vertex(45,301);
vertex(40,299);
vertex(36,304);
vertex(38,310);
vertex(34,311);
vertex(31,316);
vertex(40,323);
vertex(49,328);
vertex(54,332);
vertex(59,332);
vertex(64,327);
vertex(62,324);
endShape(CLOSE);
fill(-9471176);
beginShape();
vertex(113,255);
vertex(107,254);
vertex(116,255);
vertex(111,240);
vertex(122,235);
vertex(129,245);
vertex(139,247);
vertex(130,253);
endShape(CLOSE);
pushMatrix();
translate(0,-18);
fill(47, 54, 40);
beginShape();
vertex(5,446);
vertex(25,454);
vertex(58,448);
vertex(91,448);
vertex(122,441);
vertex(186,440);
vertex(230,446);
vertex(289,434);
vertex(354,440);
vertex(409,452);
vertex(445,445);
vertex(522,437);
vertex(560,433);
vertex(596,441);
vertex(599,452);
vertex(599,462);
vertex(0,461);
endShape(CLOSE);
popMatrix();
popMatrix();
    }],
    ["the pyramids of giza",
    function(){
    
pushMatrix();
scale(1.52);
translate(-5,-100);


noStroke();
fill(-1540808);
beginShape();
vertex(295,301);
vertex(325,240);
vertex(388,306);
endShape(CLOSE);
fill(-8506086);
beginShape();
vertex(266,306);
vertex(325,241);
vertex(360,305);
endShape(CLOSE);
fill(-1014216);
beginShape();
vertex(47,311);
vertex(160,172);
vertex(295,309);
endShape(CLOSE);
fill(-8900326);
beginShape();
vertex(15,305);
vertex(160,172);
vertex(160,318);
endShape(CLOSE);
fill(-11790317);
beginShape();
vertex(279,292);
vertex(299,315);
vertex(333,298);
vertex(322,294);
vertex(317,296);
vertex(309,294);
vertex(301,283);
vertex(296,287);
vertex(286,286);
vertex(285,285);
endShape(CLOSE);
fill(-10409708);
beginShape();
vertex(300,282);
vertex(301,286);
vertex(305,284);
vertex(313,273);
vertex(318,274);
vertex(322,266);
vertex(320,262);
vertex(303,274);
endShape(CLOSE);
fill(-3903698);
beginShape();
vertex(355,289);
vertex(357,300);
vertex(360,300);
vertex(360,293);
vertex(366,292);
vertex(366,288);
vertex(360,287);
endShape(CLOSE);
fill(-8440036);
beginShape();
vertex(48,306);
vertex(53,292);
vertex(60,295);
vertex(76,294);
vertex(84,293);
vertex(88,285);
vertex(100,273);
vertex(120,263);
vertex(122,270);
vertex(130,261);
vertex(133,253);
vertex(137,248);
vertex(144,245);
vertex(148,253);
vertex(153,260);
vertex(158,261);
vertex(158,310);
endShape(CLOSE);
fill(-11395820);
beginShape();
vertex(71,302);
vertex(75,295);
vertex(86,291);
vertex(93,295);
vertex(101,287);
vertex(109,289);
vertex(114,294);
vertex(120,296);
vertex(127,296);
vertex(132,293);
vertex(137,289);
vertex(146,286);
vertex(154,293);
vertex(160,297);
vertex(161,346);
endShape(CLOSE);
fill(-2132432);
beginShape();
vertex(264,301);
vertex(246,272);
vertex(233,262);
vertex(221,265);
vertex(209,260);
vertex(203,254);
vertex(188,258);
vertex(178,255);
vertex(166,251);
vertex(160,256);
vertex(160,327);
vertex(271,324);
endShape(CLOSE);
fill(-2725334);
beginShape();
vertex(240,307);
vertex(233,287);
vertex(225,281);
vertex(215,282);
vertex(205,278);
vertex(190,277);
vertex(179,276);
vertex(166,272);
vertex(160,270);
vertex(160,338);
vertex(237,339);
endShape(CLOSE);
fill(-1670330);
beginShape();
vertex(187,204);
vertex(183,195);
vertex(172,190);
vertex(160,190);
vertex(160,205);
vertex(180,206);
endShape(CLOSE);


fill(-9814501);
rect(0,304,600,170);


fill(-7649495);
beginShape();
vertex(26,301);
vertex(35,301);
vertex(35,311);
vertex(26,313);
endShape(CLOSE);
fill(-5401509);
beginShape();
vertex(33,301);
vertex(34,304);
vertex(36,303);
vertex(37,306);
vertex(40,305);
vertex(40,300);
endShape(CLOSE);
fill(-6790334);
beginShape();
vertex(43,302);
vertex(42,307);
vertex(46,306);
vertex(46,301);
vertex(42,301);
endShape(CLOSE);
fill(-5928365);
beginShape();
vertex(46,301);
vertex(46,305);
vertex(47,305);
vertex(48,302);
vertex(52,303);
vertex(52,301);
endShape(CLOSE);
fill(-8043997);
beginShape();
vertex(36,322);
vertex(37,305);
vertex(46,305);
vertex(48,303);
vertex(52,303);
vertex(54,325);
endShape(CLOSE);
fill(-1914249);
beginShape();
vertex(52,304);
vertex(52,315);
vertex(65,315);
vertex(64,304);
endShape(CLOSE);
fill(-8702175);
beginShape();
vertex(70,304);
vertex(68,318);
vertex(78,318);
vertex(79,304);
endShape(CLOSE);
fill(-3626662);
beginShape();
vertex(79,304);
vertex(79,309);
vertex(76,310);
vertex(77,312);
vertex(80,311);
vertex(80,309);
vertex(81,309);
vertex(81,308);
vertex(84,307);
vertex(84,304);
endShape(CLOSE);
fill(-4748202);
beginShape();
vertex(86,304);
vertex(85,308);
vertex(88,307);
vertex(88,306);
vertex(90,305);
vertex(90,302);
endShape(CLOSE);
fill(-9227236);
beginShape();
vertex(86,302);
vertex(83,302);
vertex(82,301);
vertex(74,300);
vertex(73,303);
vertex(62,303);
vertex(61,301);
vertex(55,300);
vertex(53,304);
vertex(83,304);
vertex(86,305);
vertex(90,302);
vertex(82,301);
endShape(CLOSE);
fill(-8702694);
beginShape();
vertex(88,310);
vertex(87,311);
vertex(87,306);
vertex(98,307);
vertex(99,321);
vertex(87,320);
endShape(CLOSE);
fill(-3296156);
beginShape();
vertex(94,306);
vertex(93,310);
vertex(98,310);
vertex(99,319);
vertex(107,320);
vertex(108,311);
vertex(103,308);
vertex(98,310);
vertex(98,307);
endShape(CLOSE);
fill(-8570592);
beginShape();
vertex(38,324);
vertex(39,311);
vertex(56,311);
vertex(57,313);
vertex(64,314);
vertex(66,326);
endShape(CLOSE);
fill(-8111576);
beginShape();
vertex(62,312);
vertex(63,327);
vertex(88,328);
vertex(86,314);
endShape(CLOSE);
fill(-2242709);
beginShape();
vertex(86,314);
vertex(86,321);
vertex(86,327);
vertex(90,328);
vertex(90,321);
vertex(93,321);
vertex(95,320);
vertex(95,313);
endShape(CLOSE);
fill(-9556452);
beginShape();
vertex(90,302);
vertex(89,305);
vertex(98,307);
vertex(99,310);
vertex(103,308);
vertex(108,311);
vertex(122,310);
vertex(122,307);
vertex(118,307);
vertex(118,303);
vertex(111,304);
vertex(110,301);
endShape(CLOSE);
fill(-9817839);
beginShape();
vertex(123,303);
vertex(123,313);
vertex(135,313);
vertex(135,306);
vertex(129,306);
vertex(129,303);
endShape(CLOSE);
fill(-6787770);
beginShape();
vertex(109,301);
vertex(109,305);
vertex(114,305);
vertex(114,301);
endShape(CLOSE);
fill(-6134210);
beginShape();
vertex(118,304);
vertex(118,307);
vertex(123,307);
vertex(123,304);
endShape(CLOSE);
fill(-6328495);
beginShape();
vertex(130,303);
vertex(129,306);
vertex(132,306);
vertex(132,304);
vertex(134,303);
endShape(CLOSE);
fill(-8506339);
beginShape();
vertex(107,308);
vertex(107,332);
vertex(125,332);
vertex(125,317);
vertex(123,308);
endShape(CLOSE);
fill(-2246286);
beginShape();
vertex(121,309);
vertex(122,317);
vertex(127,317);
vertex(128,312);
vertex(130,311);
vertex(131,308);
endShape(CLOSE);
fill(-9424349);
beginShape();
vertex(135,306);
vertex(141,306);
vertex(140,313);
vertex(135,314);
endShape(CLOSE);
fill(-2904199);
beginShape();
vertex(141,306);
vertex(141,309);
vertex(145,308);
vertex(150,304);
vertex(146,303);
vertex(146,306);
endShape(CLOSE);
fill(-9556455);
beginShape();
vertex(127,311);
vertex(142,310);
vertex(141,308);
vertex(150,309);
vertex(151,325);
vertex(128,324);
endShape(CLOSE);
fill(-9359586);
beginShape();
vertex(120,316);
vertex(133,316);
vertex(135,328);
vertex(120,327);
endShape(CLOSE);
fill(-2445706);
beginShape();
vertex(125,321);
vertex(129,321);
vertex(130,319);
vertex(129,316);
vertex(125,316);
endShape(CLOSE);
fill(-9884134);
beginShape();
vertex(159,312);
vertex(160,297);
vertex(168,297);
vertex(168,303);
vertex(180,303);
vertex(180,299);
vertex(189,299);
vertex(189,301);
vertex(192,302);
vertex(192,300);
vertex(201,300);
vertex(202,302);
vertex(205,302);
vertex(206,298);
vertex(216,298);
vertex(217,302);
vertex(220,302);
vertex(219,300);
vertex(221,300);
vertex(222,302);
vertex(236,302);
vertex(240,316);
endShape(CLOSE);
fill(-2897297);
beginShape();
vertex(150,309);
vertex(151,325);
vertex(157,324);
vertex(156,309);
endShape(CLOSE);
fill(-9292503);
beginShape();
vertex(153,317);
vertex(153,327);
vertex(172,327);
vertex(173,317);
vertex(165,315);
vertex(165,309);
vertex(158,304);
vertex(158,312);
endShape(CLOSE);
fill(-5539776);
beginShape();
vertex(162,300);
vertex(162,305);
vertex(164,304);
vertex(164,301);
endShape(CLOSE);
fill(-8440284);
beginShape();
vertex(171,299);
vertex(173,299);
vertex(174,308);
vertex(170,309);
endShape(CLOSE);
fill(-3834046);
beginShape();
vertex(188,300);
vertex(191,300);
vertex(191,303);
vertex(188,304);
endShape(CLOSE);
fill(-10344419);
beginShape();
vertex(165,311);
vertex(165,317);
vertex(172,317);
vertex(172,324);
vertex(184,325);
vertex(185,312);
endShape(CLOSE);
fill(-9883361);
beginShape();
vertex(179,299);
vertex(189,300);
vertex(188,323);
vertex(180,322);
endShape(CLOSE);
fill(-9819877);
beginShape();
vertex(185,312);
vertex(186,324);
vertex(205,324);
vertex(207,306);
vertex(203,304);
vertex(195,303);
vertex(191,307);
vertex(191,311);
endShape(CLOSE);
fill(-10737636);
beginShape();
vertex(207,307);
vertex(216,307);
vertex(215,315);
vertex(228,315);
vertex(229,324);
vertex(207,324);
endShape(CLOSE);
fill(-11197416);
beginShape();
vertex(199,313);
vertex(199,325);
vertex(229,327);
vertex(229,324);
vertex(209,322);
vertex(209,313);
endShape(CLOSE);
fill(-5667000);
beginShape();
vertex(214,307);
vertex(214,317);
vertex(216,316);
vertex(216,308);
endShape(CLOSE);
fill(-9814501);
beginShape();
vertex(208,313);
vertex(208,323);
vertex(211,322);
vertex(211,314);
endShape(CLOSE);
fill(-5666745);
beginShape();
vertex(223,302);
vertex(222,305);
vertex(224,306);
vertex(224,309);
vertex(226,309);
vertex(227,311);
vertex(230,311);
vertex(230,309);
vertex(227,309);
vertex(227,305);
vertex(224,306);
vertex(224,303);
endShape(CLOSE);
fill(-9555687);
beginShape();
vertex(45,315);
vertex(45,318);
vertex(47,318);
vertex(47,315);
endShape(CLOSE);
fill(-10602454);
beginShape();
vertex(47,322);
vertex(48,327);
vertex(50,326);
vertex(50,321);
endShape(CLOSE);
fill(-8373978);
beginShape();
vertex(52,315);
vertex(52,318);
vertex(55,319);
vertex(55,315);
endShape(CLOSE);
fill(-10083053);
beginShape();
vertex(68,323);
vertex(71,323);
vertex(71,317);
vertex(68,317);
endShape(CLOSE);
fill(-10146794);
beginShape();
vertex(76,317);
vertex(76,324);
vertex(80,324);
vertex(80,317);
endShape(CLOSE);
fill(-10015721);
beginShape();
vertex(52,315);
vertex(53,320);
vertex(55,319);
vertex(55,315);
endShape(CLOSE);
fill(-9622247);
beginShape();
vertex(106,324);
vertex(107,327);
vertex(109,327);
vertex(109,324);
endShape(CLOSE);
fill(-9687785);
beginShape();
vertex(114,314);
vertex(113,317);
vertex(116,317);
vertex(117,313);
vertex(114,313);
endShape(CLOSE);
fill(-11198964);
beginShape();
vertex(116,323);
vertex(116,326);
vertex(119,326);
vertex(119,323);
endShape(CLOSE);
fill(-11459567);
beginShape();
vertex(135,312);
vertex(134,315);
vertex(138,317);
vertex(138,312);
endShape(CLOSE);
fill(-11591400);
beginShape();
vertex(140,319);
vertex(140,323);
vertex(143,323);
vertex(144,319);
endShape(CLOSE);
fill(-10868706);
beginShape();
vertex(144,314);
vertex(144,316);
vertex(146,316);
vertex(146,312);
endShape(CLOSE);
fill(-11000550);
beginShape();
vertex(177,316);
vertex(177,318);
vertex(180,319);
vertex(180,316);
endShape(CLOSE);
fill(-12182769);
beginShape();
vertex(193,317);
vertex(193,322);
vertex(197,322);
vertex(197,317);
endShape(CLOSE);
fill(-12116718);
beginShape();
vertex(195,309);
vertex(196,311);
vertex(198,311);
vertex(198,309);
endShape(CLOSE);
fill(-10671332);
beginShape();
vertex(180,305);
vertex(179,309);
vertex(185,309);
vertex(184,305);
endShape(CLOSE);
fill(-11591402);
beginShape();
vertex(213,318);
vertex(214,321);
vertex(217,321);
vertex(217,319);
endShape(CLOSE);
fill(-11525092);
beginShape();
vertex(209,308);
vertex(209,311);
vertex(212,311);
vertex(212,309);
endShape(CLOSE);
fill(-10409701);
beginShape();
vertex(229,298);
vertex(228,329);
vertex(258,332);
vertex(262,299);
endShape(CLOSE);
fill(-9885409);
beginShape();
vertex(249,295);
vertex(282,295);
vertex(281,334);
vertex(250,333);
endShape(CLOSE);
fill(-6797020);
beginShape();
vertex(267,295);
vertex(283,295);
vertex(284,312);
vertex(267,315);
endShape(CLOSE);
fill(-10409957);
beginShape();
vertex(282,297);
vertex(280,349);
vertex(326,354);
vertex(324,299);
endShape(CLOSE);
fill(-1347010);
beginShape();
vertex(324,299);
vertex(321,350);
vertex(344,346);
vertex(344,319);
vertex(340,299);
endShape(CLOSE);
fill(-9294309);
beginShape();
vertex(343,302);
vertex(374,302);
vertex(374,295);
vertex(411,297);
vertex(408,351);
vertex(344,350);
vertex(344,321);
vertex(340,302);
endShape(CLOSE);
fill(-11460326);
beginShape();
vertex(344,319);
vertex(381,317);
vertex(382,351);
vertex(344,356);
endShape(CLOSE);
fill(-9684952);
beginShape();
vertex(345,320);
vertex(382,317);
vertex(354,313);
vertex(342,313);
vertex(344,322);
endShape(CLOSE);
fill(-8703976);
beginShape();
vertex(325,299);
vertex(325,293);
vertex(354,294);
vertex(357,302);
vertex(340,302);
vertex(340,299);
endShape(CLOSE);
fill(-8110043);
beginShape();
vertex(356,298);
vertex(355,303);
vertex(375,302);
vertex(374,298);
endShape(CLOSE);
fill(-3578826);
beginShape();
vertex(354,295);
vertex(354,302);
vertex(370,298);
vertex(369,293);
endShape(CLOSE);
fill(-6534104);
beginShape();
vertex(374,295);
vertex(374,302);
vertex(412,301);
vertex(410,294);
endShape(CLOSE);
fill(-11656166);
beginShape();
vertex(221,317);
vertex(222,329);
vertex(238,330);
vertex(238,318);
endShape(CLOSE);
fill(-12838894);
beginShape();
vertex(228,322);
vertex(228,327);
vertex(234,328);
vertex(232,328);
vertex(233,323);
endShape(CLOSE);
fill(-13626610);
beginShape();
vertex(237,301);
vertex(237,306);
vertex(240,306);
vertex(240,302);
endShape(CLOSE);
fill(-13626610);
beginShape();
vertex(236,311);
vertex(235,314);
vertex(234,314);
vertex(234,311);
endShape(CLOSE);
fill(-12181481);
beginShape();
vertex(239,319);
vertex(239,324);
vertex(242,323);
vertex(241,319);
endShape(CLOSE);
fill(-11526373);
beginShape();
vertex(261,301);
vertex(261,308);
vertex(263,307);
vertex(263,301);
endShape(CLOSE);
fill(-11526373);
beginShape();
vertex(253,302);
vertex(255,302);
vertex(255,308);
vertex(253,308);
endShape(CLOSE);
fill(-12116197);
beginShape();
vertex(287,304);
vertex(287,308);
vertex(289,308);
vertex(289,305);
endShape(CLOSE);
fill(-11854314);
beginShape();
vertex(296,306);
vertex(296,308);
vertex(301,309);
vertex(300,306);
endShape(CLOSE);
fill(-12314346);
beginShape();
vertex(286,320);
vertex(286,324);
vertex(289,324);
vertex(289,320);
endShape(CLOSE);
fill(-12575977);
beginShape();
vertex(294,337);
vertex(301,337);
vertex(301,345);
vertex(294,345);
endShape(CLOSE);
fill(-13691884);
beginShape();
vertex(355,331);
vertex(355,343);
vertex(357,342);
vertex(357,332);
endShape(CLOSE);
fill(-13888999);
beginShape();
vertex(366,332);
vertex(366,340);
vertex(369,339);
vertex(369,332);
endShape(CLOSE);
fill(-13626608);
beginShape();
vertex(375,331);
vertex(375,340);
vertex(377,339);
vertex(379,339);
vertex(378,338);
vertex(378,331);
endShape(CLOSE);
fill(-12051947);
beginShape();
vertex(268,315);
vertex(282,312);
vertex(281,334);
vertex(267,335);
vertex(267,315);
endShape(CLOSE);
fill(-15329261);
beginShape();
vertex(244,331);
vertex(239,329);
vertex(236,324);
vertex(233,325);
vertex(236,331);
vertex(237,336);
vertex(242,337);
vertex(245,341);
vertex(250,342);
vertex(253,341);
vertex(255,342);
vertex(257,336);
vertex(261,338);
vertex(263,333);
vertex(262,333);
vertex(252,331);
vertex(248,329);
endShape(CLOSE);
fill(-15198193);
beginShape();
vertex(245,325);
vertex(245,329);
vertex(248,332);
vertex(253,326);
vertex(247,322);
endShape(CLOSE);
fill(-13163498);
beginShape();
vertex(256,327);
vertex(255,330);
vertex(258,332);
vertex(261,329);
vertex(264,327);
vertex(262,327);
vertex(261,325);
vertex(256,324);
vertex(254,329);
vertex(255,335);
vertex(264,334);
endShape(CLOSE);
fill(-14804977);
beginShape();
vertex(259,333);
vertex(261,337);
vertex(267,337);
vertex(271,339);
vertex(275,336);
vertex(272,332);
vertex(268,333);
vertex(267,332);
vertex(262,329);
endShape(CLOSE);
fill(-13098213);
beginShape();
vertex(140,324);
vertex(137,327);
vertex(140,329);
vertex(148,327);
vertex(145,323);
endShape(CLOSE);
fill(-15329266);
beginShape();
vertex(150,324);
vertex(146,324);
vertex(144,327);
vertex(149,330);
vertex(152,327);
endShape(CLOSE);
fill(-14411505);
beginShape();
vertex(158,322);
vertex(155,322);
vertex(151,325);
vertex(153,330);
vertex(159,331);
vertex(160,329);
vertex(164,332);
vertex(169,330);
vertex(172,327);
vertex(171,325);
vertex(167,322);
vertex(164,324);
vertex(163,325);
endShape(CLOSE);
fill(-13688301);
beginShape();
vertex(171,325);
vertex(169,325);
vertex(167,329);
vertex(173,333);
vertex(177,331);
vertex(181,332);
vertex(183,329);
vertex(188,331);
vertex(188,329);
vertex(185,327);
vertex(183,323);
vertex(182,322);
vertex(180,325);
vertex(174,321);
endShape(CLOSE);
fill(-12380146);
beginShape();
vertex(147,331);
vertex(148,336);
vertex(149,335);
vertex(149,330);
vertex(148,328);
endShape(CLOSE);
fill(-13167349);
beginShape();
vertex(174,335);
vertex(177,335);
vertex(177,330);
vertex(175,330);
endShape(CLOSE);
fill(-11657704);
beginShape();
vertex(164,330);
vertex(164,336);
vertex(166,336);
vertex(166,329);
endShape(CLOSE);
fill(-13887728);
beginShape();
vertex(57,331);
vertex(54,334);
vertex(59,337);
vertex(68,337);
vertex(68,334);
vertex(63,330);
endShape(CLOSE);
fill(-14345967);
beginShape();
vertex(70,330);
vertex(67,334);
vertex(71,338);
vertex(73,337);
vertex(76,334);
vertex(73,328);
endShape(CLOSE);
fill(-15001835);
beginShape();
vertex(82,328);
vertex(77,329);
vertex(78,334);
vertex(79,337);
vertex(82,336);
vertex(82,338);
vertex(87,335);
vertex(89,331);
vertex(86,326);
endShape(CLOSE);
fill(-14740466);
beginShape();
vertex(91,330);
vertex(87,334);
vertex(88,340);
vertex(90,338);
vertex(90,340);
vertex(94,339);
vertex(96,339);
vertex(98,333);
vertex(93,333);
endShape(CLOSE);
fill(-14149359);
beginShape();
vertex(99,327);
vertex(96,331);
vertex(99,338);
vertex(101,334);
vertex(102,328);
endShape(CLOSE);
fill(-14214895);
beginShape();
vertex(102,330);
vertex(100,336);
vertex(102,338);
vertex(108,341);
vertex(111,336);
vertex(111,333);
vertex(109,330);
endShape(CLOSE);
fill(-14018545);
beginShape();
vertex(114,328);
vertex(110,331);
vertex(114,336);
vertex(110,339);
vertex(114,340);
vertex(120,340);
vertex(120,337);
vertex(117,333);
endShape(CLOSE);
fill(-13558763);
beginShape();
vertex(126,331);
vertex(121,331);
vertex(116,335);
vertex(120,337);
vertex(126,335);
endShape(CLOSE);
fill(-14082029);
beginShape();
vertex(128,335);
vertex(124,337);
vertex(126,339);
vertex(130,340);
vertex(133,341);
vertex(135,340);
vertex(132,337);
vertex(129,334);
endShape(CLOSE);
fill(-10275037);
beginShape();
vertex(61,336);
vertex(61,343);
vertex(63,343);
vertex(63,335);
endShape(CLOSE);
fill(-10408424);
beginShape();
vertex(70,335);
vertex(71,343);
vertex(72,343);
vertex(72,336);
endShape(CLOSE);
fill(-9161180);
beginShape();
vertex(82,336);
vertex(82,343);
vertex(83,342);
vertex(84,337);
endShape(CLOSE);
fill(-11722996);
beginShape();
vertex(92,339);
vertex(93,344);
vertex(94,344);
vertex(94,339);
endShape(CLOSE);
fill(-14872049);
beginShape();
vertex(99,336);
vertex(99,339);
vertex(100,339);
vertex(99,334);
endShape(CLOSE);
fill(-9753316);
beginShape();
vertex(106,339);
vertex(106,346);
vertex(107,346);
vertex(107,339);
endShape(CLOSE);
fill(-11657971);
beginShape();
vertex(113,339);
vertex(113,345);
vertex(114,346);
vertex(116,339);
endShape(CLOSE);
fill(-10079714);
beginShape();
vertex(129,339);
vertex(130,347);
vertex(131,346);
vertex(132,340);
endShape(CLOSE);
fill(-13755884);
beginShape();
vertex(156,326);
vertex(155,334);
vertex(157,335);
vertex(158,328);
endShape(CLOSE);
fill(-12114667);
beginShape();
vertex(183,329);
vertex(182,333);
vertex(184,332);
vertex(184,329);
endShape(CLOSE);
fill(-13230317);
beginShape();
vertex(242,334);
vertex(241,342);
vertex(240,342);
vertex(240,335);
endShape(CLOSE);
fill(-12510193);
beginShape();
vertex(247,341);
vertex(247,347);
vertex(250,345);
vertex(250,339);
endShape(CLOSE);
fill(-11853031);
beginShape();
vertex(259,337);
vertex(258,345);
vertex(260,344);
vertex(261,337);
endShape(CLOSE);
fill(-12577261);
beginShape();
vertex(264,337);
vertex(264,345);
vertex(266,344);
vertex(267,337);
endShape(CLOSE);
fill(-6137282);
beginShape();
vertex(4,332);
vertex(61,337);
vertex(62,367);
vertex(45,379);
vertex(1,371);
endShape(CLOSE);
fill(-10996687);
beginShape();
vertex(2,338);
vertex(44,339);
vertex(44,380);
vertex(0,371);
endShape(CLOSE);
fill(-5415114);
beginShape();
vertex(43,338);
vertex(54,338);
vertex(56,336);
vertex(34,329);
vertex(30,310);
vertex(21,294);
vertex(20,287);
vertex(5,294);
vertex(4,331);
endShape(CLOSE);
fill(-12774124);
beginShape();
vertex(43,339);
vertex(33,334);
vertex(24,332);
vertex(20,318);
vertex(18,316);
vertex(16,294);
vertex(7,291);
vertex(2,295);
vertex(0,324);
vertex(4,333);
vertex(20,336);
vertex(22,338);
vertex(23,339);
endShape(CLOSE);
fill(-12052201);
beginShape();
vertex(30,332);
vertex(37,334);
vertex(46,335);
vertex(51,338);
vertex(53,336);
vertex(46,333);
endShape(CLOSE);
fill(-6859977);
beginShape();
vertex(21,311);
vertex(28,309);
vertex(32,318);
vertex(32,328);
vertex(29,317);
vertex(23,314);
endShape(CLOSE);
fill(-5480643);
beginShape();
vertex(5,294);
vertex(13,296);
vertex(20,295);
vertex(23,289);
vertex(26,288);
vertex(27,276);
vertex(23,269);
vertex(18,266);
vertex(13,266);
vertex(2,281);
endShape(CLOSE);
fill(-12511211);
beginShape();
vertex(12,297);
vertex(16,295);
vertex(17,294);
vertex(20,294);
vertex(23,289);
vertex(26,288);
vertex(26,286);
vertex(23,285);
vertex(21,281);
vertex(18,277);
vertex(18,275);
vertex(20,275);
vertex(23,278);
vertex(24,283);
vertex(27,277);
vertex(21,272);
vertex(14,267);
vertex(13,275);
vertex(11,276);
vertex(10,287);
vertex(9,291);
vertex(6,289);
vertex(2,297);
vertex(2,299);
endShape(CLOSE);
fill(-12576745);
beginShape();
vertex(2,296);
vertex(13,266);
vertex(6,267);
vertex(0,274);
endShape(CLOSE);
fill(-11591397);
beginShape();
vertex(6,290);
vertex(5,288);
vertex(2,295);
vertex(9,295);
vertex(8,287);
endShape(CLOSE);
fill(-8305359);
beginShape();
vertex(49,341);
vertex(50,353);
vertex(49,363);
vertex(53,354);
vertex(55,350);
vertex(51,347);
endShape(CLOSE);
fill(-11589082);
beginShape();
vertex(29,342);
vertex(27,346);
vertex(28,351);
vertex(28,356);
vertex(31,350);
vertex(30,347);
vertex(31,344);
endShape(CLOSE);
fill(-11329770);
beginShape();
vertex(191,334);
vertex(197,329);
vertex(234,330);
vertex(232,333);
vertex(240,333);
vertex(239,347);
vertex(191,346);
endShape(CLOSE);
fill(-3229063);
beginShape();
vertex(233,330);
vertex(230,333);
vertex(234,333);
vertex(235,330);
endShape(CLOSE);
fill(-13166575);
beginShape();
vertex(193,338);
vertex(192,339);
vertex(196,339);
vertex(195,349);
vertex(193,348);
endShape(CLOSE);
fill(-14938353);
beginShape();
vertex(204,337);
vertex(208,337);
vertex(208,349);
vertex(205,349);
endShape(CLOSE);
fill(-14480634);
beginShape();
vertex(218,339);
vertex(220,339);
vertex(220,347);
vertex(218,346);
endShape(CLOSE);
fill(-14546426);
beginShape();
vertex(229,338);
vertex(233,338);
vertex(233,348);
vertex(229,348);
endShape(CLOSE);
fill(-2638221);
beginShape();
vertex(236,339);
vertex(240,333);
vertex(240,350);
vertex(236,352);
endShape(CLOSE);
fill(-10671840);
beginShape();
vertex(135,350);
vertex(228,350);
vertex(228,373);
vertex(136,371);
endShape(CLOSE);
fill(-9222854);
beginShape();
vertex(144,342);
vertex(135,350);
vertex(228,351);
vertex(232,342);
endShape(CLOSE);
fill(-2638221);
beginShape();
vertex(232,342);
vertex(228,350);
vertex(229,365);
vertex(232,366);
endShape(CLOSE);
fill(-14478574);
beginShape();
vertex(151,356);
vertex(151,364);
vertex(157,364);
vertex(157,356);
endShape(CLOSE);
fill(-14413297);
beginShape();
vertex(165,362);
vertex(164,360);
vertex(171,361);
vertex(171,369);
vertex(165,369);
endShape(CLOSE);
fill(-14609135);
beginShape();
vertex(183,358);
vertex(188,358);
vertex(188,370);
vertex(183,370);
endShape(CLOSE);
fill(-13757426);
beginShape();
vertex(203,361);
vertex(210,361);
vertex(210,370);
vertex(203,370);
endShape(CLOSE);
fill(-8959680);
beginShape();
vertex(230,354);
vertex(223,363);
vertex(276,363);
vertex(278,354);
endShape(CLOSE);
fill(-11326685);
beginShape();
vertex(275,382);
vertex(225,382);
vertex(223,362);
vertex(278,362);
endShape(CLOSE);
fill(-4219048);
beginShape();
vertex(275,362);
vertex(278,354);
vertex(278,379);
vertex(275,382);
endShape(CLOSE);
fill(-13231082);
beginShape();
vertex(238,369);
vertex(238,378);
vertex(243,378);
vertex(244,369);
endShape(CLOSE);
fill(-13429739);
beginShape();
vertex(255,372);
vertex(260,372);
vertex(260,378);
vertex(255,378);
endShape(CLOSE);
fill(-11458269);
beginShape();
vertex(329,343);
vertex(358,342);
vertex(360,356);
vertex(330,358);
endShape(CLOSE);
fill(-12970477);
beginShape();
vertex(326,343);
vertex(331,343);
vertex(330,358);
vertex(326,356);
vertex(326,341);
vertex(332,343);
endShape(CLOSE);
fill(-9357525);
beginShape();
vertex(327,341);
vertex(331,343);
vertex(358,343);
vertex(354,341);
endShape(CLOSE);
fill(-14806764);
beginShape();
vertex(337,348);
vertex(341,348);
vertex(341,354);
vertex(337,354);
endShape(CLOSE);
fill(-14479603);
beginShape();
vertex(349,348);
vertex(354,348);
vertex(354,353);
vertex(349,353);
endShape(CLOSE);
fill(-13950959);
beginShape();
vertex(382,349);
vertex(376,346);
vertex(371,349);
vertex(371,355);
vertex(375,353);
vertex(375,350);
vertex(380,351);
vertex(370,357);
vertex(377,356);
vertex(373,361);
vertex(374,363);
vertex(384,355);
vertex(380,364);
vertex(382,367);
vertex(386,356);
vertex(386,361);
vertex(391,361);
vertex(391,357);
vertex(397,363);
vertex(395,359);
vertex(400,359);
vertex(393,352);
vertex(397,346);
vertex(393,344);
vertex(392,342);
vertex(389,346);
vertex(386,343);
vertex(383,343);
vertex(379,343);
endShape(CLOSE);
fill(-13293544);
beginShape();
vertex(397,345);
vertex(393,346);
vertex(390,346);
vertex(389,351);
vertex(395,359);
vertex(400,358);
vertex(396,352);
vertex(398,348);
endShape(CLOSE);
fill(-12048871);
beginShape();
vertex(389,361);
vertex(390,360);
vertex(390,375);
vertex(388,375);
vertex(388,360);
endShape(CLOSE);
popMatrix();
    }],
    ["the temple of artemis in ephesus",
    function(){
    pushMatrix();
noStroke();
translate(-39,-50);
scale(1.07);

fill(-14082284);
beginShape();
vertex(341,249);
vertex(344,326);
vertex(446,335);
vertex(451,260);
endShape(CLOSE);
fill(-12699607);
beginShape();
vertex(101,276);
vertex(99,344);
vertex(246,340);
vertex(244,254);
endShape(CLOSE);
fill(-14870253);
beginShape();
vertex(236,270);
vertex(238,336);
vertex(319,338);
vertex(320,249);
vertex(235,262);
endShape(CLOSE);
fill(-13949153);
beginShape();
vertex(220,255);
vertex(222,264);
vertex(321,252);
vertex(322,236);
endShape(CLOSE);
fill(-13884133);
beginShape();
vertex(55,263);
vertex(97,277);
vertex(323,245);
vertex(330,208);
vertex(53,260);
endShape(CLOSE);


//







fill(-12963552);
beginShape();
vertex(63,239);
vertex(62,259);
vertex(331,209);
vertex(331,181);
endShape(CLOSE);

fill(-13950443);
beginShape();
vertex(47,237);
vertex(60,242);
vertex(332,188);
vertex(333,175);
vertex(329,174);
vertex(51,233);
endShape(CLOSE);
fill(-11384004);
beginShape();
vertex(54,237);
vertex(56,240);
vertex(333,180);
vertex(332,177);
endShape(CLOSE);
fill(-9738665);
beginShape();
vertex(47,226);
vertex(46,237);
vertex(334,174);
vertex(330,160);
vertex(328,162);
vertex(326,170);
vertex(51,231);
vertex(50,225);
endShape(CLOSE);
fill(-5334166);
beginShape();
vertex(321,246);
vertex(322,339);
vertex(351,338);
vertex(347,252);
vertex(436,266);
vertex(440,352);
vertex(461,352);
vertex(456,262);
vertex(329,237);
endShape(CLOSE);
fill(-14476273);
beginShape();
vertex(327,220);
vertex(324,233);
vertex(457,254);
vertex(476,238);
vertex(333,211);
endShape(CLOSE);
fill(-10202321);
beginShape();
vertex(326,232);
vertex(322,244);
vertex(457,262);
vertex(458,253);
endShape(CLOSE);
fill(-9413565);
beginShape();
vertex(318,244);
vertex(318,327);
vertex(324,325);
vertex(323,243);
vertex(320,241);
endShape(CLOSE);

for(var i = 0; i < 13; i++){
pushMatrix();
translate(-32+i*18.53,5-i*8.8);

scale(1+i*0.02);
fill(-11318209);
beginShape();
vertex(95,265);
vertex(94,328);
vertex(102,329);
vertex(100,258);
endShape(CLOSE);
fill(-12831190);
beginShape();
vertex(100,261);
vertex(100,328);
vertex(105,328);
vertex(106,260);
endShape(CLOSE);
fill(-8817835);
beginShape();
vertex(93,324);
vertex(97,325);
vertex(97,341);
vertex(93,339);
endShape(CLOSE);
fill(-14739438);
beginShape();
vertex(95,325);
vertex(106,324);
vertex(106,340);
vertex(96,342);
endShape(CLOSE);
fill(-14475494);
beginShape();
vertex(94,337);
vertex(97,338);
vertex(108,336);
vertex(108,350);
vertex(98,343);
vertex(93,341);
endShape(CLOSE);
fill(-13225948);
beginShape();
vertex(96,256);
vertex(97,266);
vertex(106,267);
vertex(107,263);
vertex(109,262);
vertex(112,249);
vertex(97,253);
endShape(CLOSE);

fill(-10791864);
beginShape();
vertex(87,256);
vertex(87,260);
vertex(88,262);
vertex(90,263);
vertex(90,266);
vertex(97,266);
vertex(97,263);
vertex(97,261);
vertex(99,261);
vertex(100,253);
vertex(88,254);
endShape(CLOSE);
popMatrix();
}

//


fill(-1716088);
beginShape();
vertex(332,223);
vertex(334,312);
vertex(339,314);
vertex(337,223);
endShape(CLOSE);
fill(-10924487);
beginShape();
vertex(329,224);
vertex(329,304);
vertex(335,305);
vertex(333,222);
endShape(CLOSE);
fill(-3953300);
beginShape();
vertex(333,300);
vertex(340,300);
vertex(341,319);
vertex(334,319);
endShape(CLOSE);
fill(-13095912);
beginShape();
vertex(328,300);
vertex(336,301);
vertex(335,318);
vertex(327,319);
endShape(CLOSE);
fill(-204928);
beginShape();
vertex(333,318);
vertex(334,324);
vertex(344,323);
vertex(344,319);
endShape(CLOSE);
fill(-12172749);
beginShape();
vertex(324,318);
vertex(325,325);
vertex(334,327);
vertex(335,318);
endShape(CLOSE);
fill(-4085663);
beginShape();
vertex(332,217);
vertex(332,224);
vertex(341,226);
vertex(342,220);
endShape(CLOSE);
fill(-12568529);
beginShape();
vertex(322,221);
vertex(322,226);
vertex(333,223);
vertex(334,216);
endShape(CLOSE);
fill(-1317983);
beginShape();
vertex(332,214);
vertex(332,220);
vertex(343,222);
vertex(343,217);
endShape(CLOSE);
fill(-11581129);
beginShape();
vertex(322,218);
vertex(322,224);
vertex(333,220);
vertex(332,214);
endShape(CLOSE);
fill(-12041416);
beginShape();
vertex(319,211);
vertex(320,220);
vertex(338,215);
vertex(338,208);
vertex(324,208);
endShape(CLOSE);

fill(-11646920);
beginShape();
vertex(47,258);
vertex(51,263);
vertex(333,210);
vertex(333,202);
endShape(CLOSE);

for(var i = 0; i < 7; i++){
    pushMatrix();
    translate(124-i*30,38-i*8.1);
    scale(0.9+i*0.02);
    fill(-2112392);
beginShape();
vertex(403,233);
vertex(409,235);
vertex(412,326);
vertex(405,325);
endShape(CLOSE);
fill(-11650279);
beginShape();
vertex(399,235);
vertex(405,233);
vertex(407,324);
vertex(400,324);
endShape(CLOSE);
fill(-6455492);
beginShape();
vertex(403,308);
vertex(412,308);
vertex(413,327);
vertex(402,327);
endShape(CLOSE);
fill(-13164014);
beginShape();
vertex(399,309);
vertex(407,308);
vertex(407,327);
vertex(400,328);
endShape(CLOSE);
fill(-11188955);
beginShape();
vertex(400,324);
vertex(398,328);
vertex(398,330);
vertex(408,330);
vertex(407,323);
endShape(CLOSE);
fill(-1056380);
beginShape();
vertex(405,329);
vertex(405,325);
vertex(407,323);
vertex(415,324);
vertex(416,327);
vertex(416,329);
endShape(CLOSE);
fill(-3361937);
beginShape();
vertex(404,231);
vertex(404,236);
vertex(413,236);
vertex(413,232);
endShape(CLOSE);
fill(-12637165);
beginShape();
vertex(395,231);
vertex(396,237);
vertex(406,236);
vertex(407,230);
endShape(CLOSE);
fill(-10404585);
beginShape();
vertex(390,228);
vertex(393,233);
vertex(405,232);
vertex(402,226);
vertex(389,224);
endShape(CLOSE);
fill(-1580658);
beginShape();
vertex(401,226);
vertex(403,229);
vertex(407,232);
vertex(415,233);
vertex(417,230);
vertex(416,227);
endShape(CLOSE);
    popMatrix();
}


fill(-1454229);
beginShape();
vertex(332,184);
vertex(332,206);
vertex(491,234);
vertex(491,211);
endShape(CLOSE);
fill(-4286897);
beginShape();
vertex(330,188);
vertex(331,204);
vertex(335,203);
vertex(335,191);
endShape(CLOSE);
fill(-330075);
beginShape();
vertex(332,204);
vertex(331,216);
vertex(501,245);
vertex(506,233);
vertex(335,202);
endShape(CLOSE);

fill(-4088746);
beginShape();
vertex(331,205);
vertex(330,210);
vertex(503,240);
vertex(506,234);
endShape(CLOSE);
fill(-6718894);
beginShape();
vertex(331,180);
vertex(332,186);
vertex(495,217);
vertex(507,210);
vertex(500,205);
vertex(331,172);
endShape(CLOSE);
fill(-3294868);
beginShape();
vertex(333,178);
vertex(333,181);
vertex(500,214);
vertex(500,211);
endShape(CLOSE);
fill(-530795);
beginShape();
vertex(329,160);
vertex(331,175);
vertex(504,209);
vertex(504,205);
vertex(425,153);
vertex(336,169);
vertex(334,162);
endShape(CLOSE);
fill(-1323406);
beginShape();
vertex(483,201);
vertex(421,161);
vertex(347,172);
endShape(CLOSE);
fill(-8824535);
beginShape();
vertex(422,159);
vertex(421,163);
vertex(487,203);
vertex(493,204);
endShape(CLOSE);
fill(-530013);
beginShape();
vertex(357,175);
vertex(421,163);
vertex(422,159);
vertex(346,173);
endShape(CLOSE);
fill(-1716357);
beginShape();
vertex(496,200);
vertex(500,200);
vertex(500,199);
vertex(506,196);
vertex(506,197);
vertex(502,201);
vertex(506,203);
vertex(505,207);
vertex(496,202);
endShape(CLOSE);




//

fill(-12567765);
beginShape();
vertex(40,367);
vertex(41,400);
vertex(359,396);
vertex(360,348);
endShape(CLOSE);
fill(-12831195);
beginShape();
vertex(49,351);
vertex(48,367);
vertex(342,353);
vertex(341,330);
endShape(CLOSE);
fill(-9277595);
beginShape();
vertex(55,346);
vertex(51,353);
vertex(338,331);
vertex(337,324);
endShape(CLOSE);
fill(-10198700);
beginShape();
vertex(103,345);
vertex(89,362);
vertex(117,360);
vertex(126,343);
endShape(CLOSE);
fill(-12896725);
beginShape();
vertex(125,344);
vertex(113,360);
vertex(127,359);
vertex(127,343);
endShape(CLOSE);
fill(-11318213);
beginShape();
vertex(238,333);
vertex(223,353);
vertex(259,351);
vertex(268,330);
endShape(CLOSE);
fill(-14738414);
beginShape();
vertex(265,331);
vertex(257,347);
vertex(267,347);
vertex(268,330);
endShape(CLOSE);
fill(-11251906);
beginShape();
vertex(33,362);
vertex(33,380);
vertex(338,367);
vertex(338,341);
endShape(CLOSE);
fill(-14146275);
beginShape();
vertex(48,396);
vertex(48,388);
vertex(51,385);
vertex(53,383);
vertex(56,384);
vertex(59,386);
vertex(60,393);
vertex(60,397);
endShape(CLOSE);
fill(-15592944);
beginShape();
vertex(69,396);
vertex(70,387);
vertex(73,383);
vertex(77,382);
vertex(81,386);
vertex(82,390);
vertex(83,395);
endShape(CLOSE);
fill(-15199220);
beginShape();
vertex(93,393);
vertex(93,387);
vertex(97,383);
vertex(98,384);
vertex(101,383);
vertex(105,385);
vertex(106,389);
vertex(106,393);
endShape(CLOSE);
fill(-11187400);
beginShape();
vertex(32,398);
vertex(32,446);
vertex(369,447);
vertex(371,383);
endShape(CLOSE);
fill(-8553093);
beginShape();
vertex(29,393);
vertex(31,400);
vertex(100,397);
vertex(103,397);
vertex(108,390);
endShape(CLOSE);
fill(-12568022);
beginShape();
vertex(131,393);
vertex(193,391);
vertex(120,449);
vertex(47,451);
endShape(CLOSE);
fill(-14870508);
beginShape();
vertex(148,374);
vertex(149,392);
vertex(137,392);
vertex(60,449);
vertex(29,451);
vertex(129,375);
endShape(CLOSE);
fill(-9606815);
beginShape();
vertex(40,446);
vertex(137,373);
vertex(126,373);
vertex(23,450);
vertex(35,453);
endShape(CLOSE);
fill(-12955868);
beginShape();
vertex(303,347);
vertex(247,391);
vertex(417,393);
vertex(354,347);
endShape(CLOSE);
fill(-1194393);
beginShape();
vertex(339,331);
vertex(340,328);
vertex(340,341);
vertex(383,342);
vertex(380,329);
vertex(340,327);
endShape(CLOSE);
fill(-7045821);
beginShape();
vertex(337,323);
vertex(339,331);
vertex(380,330);
vertex(376,325);
endShape(CLOSE);
fill(-403348);
beginShape();
vertex(338,340);
vertex(339,348);
vertex(435,349);
vertex(431,341);
endShape(CLOSE);
fill(-926077);
beginShape();
vertex(432,329);
vertex(433,328);
vertex(429,347);
vertex(495,349);
vertex(500,332);
endShape(CLOSE);
fill(-15658738);
beginShape();
vertex(254,388);
vertex(266,389);
vertex(271,375);
vertex(281,376);
vertex(281,368);
vertex(294,366);
vertex(294,360);
vertex(300,357);
vertex(306,353);
vertex(313,355);
vertex(323,354);
vertex(328,353);
vertex(332,355);
vertex(346,359);
vertex(342,362);
vertex(350,368);
vertex(357,370);
vertex(359,375);
vertex(366,379);
vertex(369,383);
vertex(420,383);
vertex(354,339);
vertex(344,343);
vertex(339,343);
vertex(326,344);
vertex(317,346);
vertex(308,346);
vertex(298,347);
vertex(295,349);
vertex(239,388);
endShape(CLOSE);
fill(-13947871);
beginShape();
vertex(248,389);
vertex(304,347);
vertex(303,326);
vertex(233,378);
vertex(233,389);
endShape(CLOSE);
fill(-1847425);
beginShape();
vertex(237,375);
vertex(236,387);
vertex(250,388);
vertex(261,380);
vertex(259,357);
endShape(CLOSE);
fill(-11908805);
beginShape();
vertex(234,373);
vertex(241,373);
vertex(304,325);
vertex(300,324);
endShape(CLOSE);
fill(-12173011);
beginShape();
vertex(298,320);
vertex(297,327);
vertex(305,326);
vertex(305,320);
endShape(CLOSE);
fill(-603030);
beginShape();
vertex(220,369);
vertex(239,370);
vertex(240,390);
vertex(146,453);
vertex(114,452);
endShape(CLOSE);
fill(-8553878);
beginShape();
vertex(214,368);
vertex(233,367);
vertex(126,453);
vertex(109,454);
endShape(CLOSE);
fill(-1584770);
beginShape();
vertex(230,367);
vertex(241,367);
vertex(240,373);
vertex(229,372);
vertex(130,451);
vertex(124,449);
endShape(CLOSE);
fill(-14867419);
beginShape();
vertex(225,393);
vertex(163,423);
vertex(118,453);
vertex(233,456);
vertex(237,394);
vertex(229,386);
endShape(CLOSE);
fill(-10988991);
beginShape();
vertex(230,390);
vertex(230,450);
vertex(373,453);
vertex(373,384);
endShape(CLOSE);
fill(-9343397);
beginShape();
vertex(228,386);
vertex(226,386);
vertex(230,393);
vertex(372,386);
vertex(374,385);
vertex(373,379);
endShape(CLOSE);
fill(-535174);
beginShape();
vertex(404,327);
vertex(386,325);
vertex(405,340);
endShape(CLOSE);
fill(-728172);
beginShape();
vertex(377,326);
vertex(386,325);
vertex(409,341);
vertex(397,340);
endShape(CLOSE);
fill(-11716065);
beginShape();
vertex(377,326);
vertex(383,340);
vertex(400,341);
vertex(382,326);
endShape(CLOSE);
fill(-1456011);
beginShape();
vertex(403,327);
vertex(403,337);
vertex(457,336);
vertex(459,330);
endShape(CLOSE);

fill(-333934);
beginShape();
vertex(406,346);
vertex(541,349);
vertex(541,374);
vertex(437,367);
endShape(CLOSE);
fill(-1256332);
beginShape();
vertex(367,347);
vertex(377,353);
vertex(438,351);
vertex(433,346);
vertex(367,346);
endShape(CLOSE);
fill(-12305361);
beginShape();
vertex(395,355);
vertex(421,384);
vertex(443,384);
vertex(442,350);
vertex(395,353);
endShape(CLOSE);
fill(-535182);
beginShape();
vertex(469,356);
vertex(526,356);
vertex(599,409);
vertex(599,453);
endShape(CLOSE);
fill(-2443936);
beginShape();
vertex(441,349);
vertex(442,384);
vertex(477,384);
vertex(476,353);
endShape(CLOSE);
fill(-6792405);
beginShape();
vertex(566,366);
vertex(599,368);
vertex(599,404);
endShape(CLOSE);
fill(-12375019);
beginShape();
vertex(503,360);
vertex(505,366);
vertex(510,373);
vertex(522,380);
vertex(533,384);
vertex(543,387);
vertex(546,388);
vertex(548,385);
vertex(514,362);
endShape(CLOSE);
fill(-9943015);
beginShape();
vertex(501,358);
vertex(549,389);
vertex(553,388);
vertex(553,358);
endShape(CLOSE);
fill(-1259934);
beginShape();
vertex(548,357);
vertex(548,389);
vertex(573,389);
vertex(573,359);
endShape(CLOSE);
fill(-9682149);
beginShape();
vertex(559,388);
vertex(559,395);
vertex(598,421);
vertex(598,412);
vertex(561,388);
endShape(CLOSE);
fill(-8958679);
beginShape();
vertex(558,367);
vertex(559,388);
vertex(599,414);
vertex(599,392);
endShape(CLOSE);
fill(-268387);
beginShape();
vertex(570,368);
vertex(558,368);
vertex(599,395);
vertex(599,388);
endShape(CLOSE);
fill(-9483739);
beginShape();
vertex(467,363);
vertex(469,460);
vertex(599,453);
vertex(598,450);
vertex(478,364);
endShape(CLOSE);
fill(-269939);
beginShape();
vertex(468,364);
vertex(484,363);
vertex(593,439);
vertex(597,442);
vertex(599,453);
vertex(477,367);
endShape(CLOSE);
fill(-3957171);
beginShape();
vertex(371,383);
vertex(372,459);
vertex(426,461);
vertex(470,385);
endShape(CLOSE);
fill(-531817);
beginShape();
vertex(371,379);
vertex(371,386);
vertex(470,387);
vertex(468,380);
endShape(CLOSE);
fill(-10994404);
beginShape();
vertex(466,388);
vertex(426,449);
vertex(532,449);
vertex(534,438);
vertex(519,429);
vertex(495,417);
vertex(493,407);
vertex(486,406);
vertex(483,406);
vertex(481,387);
endShape(CLOSE);
fill(-10724048);
beginShape();
vertex(393,436);
vertex(396,426);
vertex(407,420);
vertex(413,410);
vertex(420,406);
vertex(429,405);
vertex(437,406);
vertex(443,413);
vertex(449,418);
vertex(452,420);
vertex(446,436);
vertex(444,440);
vertex(433,453);
vertex(404,453);
vertex(386,450);
endShape(CLOSE);
fill(-15396085);
beginShape();
vertex(384,426);
vertex(380,435);
vertex(372,449);
vertex(385,452);
vertex(394,448);
vertex(405,435);
vertex(405,428);
vertex(413,426);
vertex(419,417);
vertex(413,412);
vertex(408,420);
vertex(399,425);
vertex(393,423);
endShape(CLOSE);


fill(-9543625);
beginShape();
vertex(355,327);
vertex(355,347);
vertex(401,380);
vertex(427,380);
vertex(425,372);
vertex(356,325);
endShape(CLOSE);
fill(-1322105);
beginShape();
vertex(354,323);
vertex(360,323);
vertex(428,373);
vertex(421,373);
endShape(CLOSE);
fill(-8624350);
beginShape();
vertex(464,342);
vertex(473,341);
vertex(472,327);
vertex(467,311);
vertex(461,329);
endShape(CLOSE);
fill(-9346779);
beginShape();
vertex(483,310);
vertex(480,317);
vertex(478,343);
vertex(486,344);
vertex(488,340);
vertex(486,323);
endShape(CLOSE);
fill(-3753837);
beginShape();
vertex(481,341);
vertex(481,347);
vertex(488,348);
vertex(487,342);
endShape(CLOSE);
fill(-3958975);
beginShape();
vertex(553,341);
vertex(559,340);
vertex(562,334);
vertex(567,331);
vertex(570,339);
vertex(566,340);
vertex(565,341);
vertex(565,345);
vertex(567,351);
vertex(566,355);
vertex(563,347);
vertex(560,356);
vertex(557,347);
vertex(549,347);
endShape(CLOSE);
fill(-5936601);
beginShape();
vertex(566,328);
vertex(560,333);
vertex(566,333);
endShape(CLOSE);
fill(-2052780);
beginShape();
vertex(536,346);
vertex(539,341);
vertex(550,340);
vertex(551,334);
vertex(554,330);
vertex(557,331);
vertex(560,335);
vertex(559,339);
vertex(556,338);
vertex(557,343);
vertex(558,349);
vertex(559,355);
vertex(554,346);
vertex(546,357);
vertex(548,346);
vertex(543,346);
vertex(543,355);
vertex(540,349);
vertex(536,356);
endShape(CLOSE);
fill(-5738443);
beginShape();
vertex(549,332);
vertex(557,324);
vertex(557,332);
vertex(553,330);
endShape(CLOSE);
fill(-5867969);
beginShape();
vertex(529,343);
vertex(537,343);
vertex(536,349);
vertex(535,352);
vertex(529,352);
endShape(CLOSE);
fill(-8498650);
beginShape();
vertex(521,346);
vertex(525,343);
vertex(531,343);
vertex(534,346);
vertex(535,353);
vertex(522,354);
endShape(CLOSE);
fill(-5271997);
beginShape();
vertex(519,344);
vertex(517,343);
vertex(512,348);
vertex(513,356);
vertex(518,359);
vertex(523,354);
vertex(522,347);
endShape(CLOSE);
fill(-6330334);
beginShape();
vertex(533,349);
vertex(533,359);
vertex(538,358);
vertex(537,348);
vertex(542,344);
vertex(540,340);
vertex(533,343);
endShape(CLOSE);
fill(-9945322);
beginShape();
vertex(548,349);
vertex(546,358);
vertex(548,357);
vertex(550,352);
endShape(CLOSE);
fill(-8497369);
beginShape();
vertex(503,357);
vertex(500,360);
vertex(548,360);
vertex(551,356);
endShape(CLOSE);
fill(-2510244);
beginShape();
vertex(548,357);
vertex(549,360);
vertex(572,360);
vertex(574,357);
endShape(CLOSE);
fill(-6061489);
beginShape();
vertex(557,350);
vertex(559,358);
vertex(560,356);
vertex(559,349);
endShape(CLOSE);
fill(-7180488);
beginShape();
vertex(565,353);
vertex(565,357);
vertex(566,357);
vertex(566,351);
vertex(563,348);
vertex(560,349);
endShape(CLOSE);
fill(-5529730);
beginShape();
vertex(467,341);
vertex(467,347);
vertex(472,347);
vertex(471,340);
endShape(CLOSE);
fill(-7969493);
beginShape();
vertex(446,332);
vertex(454,331);
vertex(453,325);
vertex(459,319);
vertex(464,324);
vertex(466,329);
vertex(462,327);
vertex(459,329);
vertex(459,334);
vertex(453,338);
endShape(CLOSE);
fill(-4877507);
beginShape();
vertex(452,333);
vertex(458,333);
vertex(464,348);
vertex(460,348);
vertex(457,340);
vertex(456,342);
vertex(455,349);
vertex(452,347);
vertex(455,340);
endShape(CLOSE);
fill(-8240100);
beginShape();
vertex(455,321);
vertex(460,316);
vertex(464,317);
vertex(458,324);
endShape(CLOSE);
fill(-3433388);
beginShape();
vertex(443,327);
vertex(444,323);
vertex(450,320);
vertex(454,319);
vertex(458,330);
vertex(453,331);
vertex(450,327);
vertex(451,336);
vertex(451,340);
vertex(453,349);
vertex(450,348);
vertex(447,339);
vertex(441,343);
vertex(440,349);
vertex(437,349);
vertex(438,342);
vertex(440,333);
endShape(CLOSE);
fill(-9752041);
beginShape();
vertex(446,323);
vertex(446,314);
vertex(449,312);
vertex(453,311);
vertex(450,314);
vertex(450,321);
endShape(CLOSE);
fill(-12374774);
beginShape();
vertex(421,331);
vertex(422,343);
vertex(433,342);
vertex(433,332);
endShape(CLOSE);
fill(-12964072);
beginShape();
vertex(421,343);
vertex(422,348);
vertex(429,349);
vertex(431,344);
vertex(428,341);
endShape(CLOSE);
fill(-8957921);
beginShape();
vertex(439,330);
vertex(433,330);
vertex(428,333);
vertex(429,337);
vertex(430,340);
vertex(425,344);
vertex(424,349);
vertex(428,350);
vertex(429,346);
vertex(433,340);
vertex(437,338);
vertex(441,339);
vertex(444,329);
endShape(CLOSE);
fill(-14806515);
beginShape();
vertex(424,333);
vertex(424,345);
vertex(406,344);
vertex(413,334);
endShape(CLOSE);
fill(-10530258);
beginShape();
vertex(408,333);
vertex(403,335);
vertex(401,339);
vertex(401,344);
vertex(404,349);
vertex(408,350);
vertex(412,348);
vertex(413,348);
vertex(414,342);
vertex(413,338);
vertex(412,335);
endShape(CLOSE);
fill(-13227997);
beginShape();
vertex(402,353);
vertex(441,353);
vertex(445,348);
vertex(394,348);
endShape(CLOSE);
fill(-3891130);
beginShape();
vertex(443,348);
vertex(441,353);
vertex(476,353);
vertex(479,348);
endShape(CLOSE);
fill(-8096433);
beginShape();
vertex(5,446);
vertex(25,444);
vertex(58,448);
vertex(91,448);
vertex(122,441);
vertex(186,440);
vertex(230,446);
vertex(289,434);
vertex(354,440);
vertex(409,452);
vertex(445,445);
vertex(522,437);
vertex(560,433);
vertex(596,441);
vertex(599,452);
vertex(599,462);
vertex(0,461);
endShape(CLOSE);
popMatrix();
    }],
    ["the lighthouse of alexandria",
    function(){
    noStroke();
pushMatrix();

translate(-5,-165);
scale(1.4);

fill(-9408166);
beginShape();
vertex(4,126);
vertex(133,148);
vertex(454,102);
vertex(446,194);
vertex(139,160);
vertex(0,179);
vertex(0,155);
endShape(CLOSE);
fill(-6387350);
beginShape();
vertex(20,130);
vertex(132,148);
vertex(146,147);
vertex(307,125);
vertex(298,137);
vertex(306,155);
vertex(301,166);
vertex(299,176);
vertex(137,159);
vertex(16,176);
vertex(52,163);
vertex(35,153);
vertex(38,143);
endShape(CLOSE);
fill(-3693448);
beginShape();
vertex(81,141);
vertex(134,148);
vertex(144,148);
vertex(240,136);
vertex(225,148);
vertex(226,154);
vertex(220,158);
vertex(220,166);
vertex(138,159);
vertex(80,166);
vertex(84,160);
vertex(70,156);
vertex(80,152);
vertex(85,147);
endShape(CLOSE);


fill(-12625860);
beginShape();
vertex(0,318);
vertex(59,320);
vertex(144,325);
vertex(208,327);
vertex(260,320);
vertex(306,301);
vertex(354,286);
vertex(375,282);
vertex(401,284);
vertex(432,288);
vertex(464,292);
vertex(503,289);
vertex(572,279);
vertex(592,278);
vertex(598,278);
vertex(598,364);
vertex(0,367);
endShape(CLOSE);

fill(-10190738);
rect(0,330,600,100);
fill(-14136781);
beginShape();
vertex(10,391);
vertex(59,385);
vertex(102,377);
vertex(136,382);
vertex(160,380);
vertex(191,372);
vertex(246,372);
vertex(273,382);
vertex(307,391);
vertex(361,396);
vertex(396,400);
vertex(443,417);
vertex(464,419);
vertex(595,387);
vertex(596,493);
vertex(0,490);
vertex(0,395);
endShape(CLOSE);
fill(-15457250);
beginShape();
vertex(0,426);
vertex(18,419);
vertex(58,412);
vertex(116,412);
vertex(175,420);
vertex(222,425);
vertex(244,423);
vertex(279,431);
vertex(329,435);
vertex(361,439);
vertex(376,449);
vertex(390,466);
vertex(435,473);
vertex(509,459);
vertex(554,446);
vertex(597,446);
vertex(595,447);
vertex(596,500);
vertex(0,500);
endShape(CLOSE);

fill(-926302);
beginShape();
vertex(127,145);
vertex(126,163);
vertex(145,164);
vertex(144,146);
endShape(CLOSE);
fill(-2506104);
beginShape();
vertex(139,147);
vertex(139,162);
vertex(146,163);
vertex(145,146);
endShape(CLOSE);
fill(-12365771);
beginShape();
vertex(127,146);
vertex(128,141);
vertex(131,137);
vertex(137,135);
vertex(142,137);
vertex(144,141);
vertex(144,144);
endShape(CLOSE);
fill(-11113637);
beginShape();
vertex(139,137);
vertex(144,139);
vertex(145,141);
vertex(145,144);
vertex(141,144);
endShape(CLOSE);
fill(-12692928);
beginShape();
vertex(136,137);
vertex(135,130);
vertex(137,128);
vertex(139,128);
vertex(140,138);
endShape(CLOSE);
fill(-11967135);
beginShape();
vertex(138,128);
vertex(137,137);
vertex(139,139);
vertex(142,138);
vertex(141,135);
vertex(140,128);
endShape(CLOSE);
fill(-9607626);
beginShape();
vertex(130,141);
vertex(126,142);
vertex(126,146);
vertex(131,147);
vertex(144,147);
vertex(147,145);
vertex(147,142);
endShape(CLOSE);
fill(-15122386);
beginShape();
vertex(125,164);
vertex(124,205);
vertex(142,204);
vertex(142,162);
endShape(CLOSE);
fill(-12296882);
beginShape();
vertex(139,165);
vertex(137,203);
vertex(148,203);
vertex(149,164);
endShape(CLOSE);
fill(-11247046);
beginShape();
vertex(125,159);
vertex(121,162);
vertex(122,166);
vertex(132,166);
vertex(151,165);
vertex(152,162);
vertex(149,160);
vertex(148,159);
endShape(CLOSE);
fill(-14596809);
beginShape();
vertex(112,206);
vertex(102,311);
vertex(148,312);
vertex(146,206);
endShape(CLOSE);
fill(-10191762);
beginShape();
vertex(142,208);
vertex(140,310);
vertex(162,312);
vertex(159,211);
endShape(CLOSE);
fill(-15450068);
beginShape();
vertex(106,202);
vertex(110,212);
vertex(143,210);
vertex(146,205);
vertex(144,200);
vertex(114,201);
vertex(112,197);
vertex(106,194);
vertex(108,200);
endShape(CLOSE);
fill(-3811630);
beginShape();
vertex(142,209);
vertex(160,215);
vertex(165,205);
vertex(164,199);
vertex(162,200);
vertex(161,204);
vertex(144,200);
endShape(CLOSE);
fill(-13746630);
beginShape();
vertex(28,338);
vertex(41,338);
vertex(42,330);
vertex(46,328);
vertex(50,316);
vertex(55,313);
vertex(57,320);
vertex(65,318);
vertex(169,320);
vertex(166,346);
vertex(136,353);
vertex(109,353);
vertex(92,357);
vertex(76,352);
vertex(56,353);
vertex(34,353);
vertex(30,351);
endShape(CLOSE);
fill(-14068667);
beginShape();
vertex(61,301);
vertex(61,325);
vertex(77,327);
vertex(82,324);
vertex(81,304);
vertex(78,300);
endShape(CLOSE);
fill(-6902361);
beginShape();
vertex(77,300);
vertex(77,325);
vertex(91,323);
vertex(92,301);
endShape(CLOSE);
fill(-12360613);
beginShape();
vertex(59,298);
vertex(58,302);
vertex(78,303);
vertex(78,298);
endShape(CLOSE);
fill(-8809844);
beginShape();
vertex(77,300);
vertex(77,303);
vertex(92,302);
vertex(92,297);
vertex(77,298);
endShape(CLOSE);
fill(-12754608);
beginShape();
vertex(86,306);
vertex(85,324);
vertex(140,323);
vertex(141,304);
endShape(CLOSE);
fill(-13286085);
beginShape();
vertex(102,324);
vertex(102,310);
vertex(106,306);
vertex(109,306);
vertex(112,307);
vertex(114,310);
vertex(114,324);
endShape(CLOSE);
fill(-14265789);
beginShape();
vertex(131,300);
vertex(130,325);
vertex(148,326);
vertex(148,301);
endShape(CLOSE);
fill(-6442588);
beginShape();
vertex(157,306);
vertex(156,321);
vertex(181,323);
vertex(182,308);
endShape(CLOSE);
fill(-7560039);
beginShape();
vertex(148,301);
vertex(148,326);
vertex(160,322);
vertex(159,301);
endShape(CLOSE);
fill(-11308179);
beginShape();
vertex(129,298);
vertex(128,302);
vertex(148,303);
vertex(149,298);
endShape(CLOSE);
fill(-9533573);
beginShape();
vertex(147,298);
vertex(148,303);
vertex(161,302);
vertex(161,299);
endShape(CLOSE);
fill(-12297398);
beginShape();
vertex(181,308);
vertex(182,333);
vertex(192,333);
vertex(192,308);
endShape(CLOSE);
fill(-11574189);
beginShape();
vertex(187,306);
vertex(186,328);
vertex(194,329);
vertex(194,305);
endShape(CLOSE);
fill(-4731711);
beginShape();
vertex(193,306);
vertex(193,324);
vertex(204,324);
vertex(202,305);
endShape(CLOSE);
fill(-10914969);
beginShape();
vertex(186,305);
vertex(186,308);
vertex(194,306);
vertex(194,302);
endShape(CLOSE);
fill(-10123396);
beginShape();
vertex(193,302);
vertex(193,306);
vertex(204,306);
vertex(203,302);
endShape(CLOSE);
fill(-11840444);
beginShape();
vertex(170,326);
vertex(175,318);
vertex(184,324);
vertex(186,319);
vertex(193,322);
vertex(208,321);
vertex(215,320);
vertex(219,343);
vertex(224,346);
vertex(228,350);
vertex(228,358);
vertex(216,361);
vertex(214,357);
vertex(216,352);
vertex(205,354);
vertex(198,352);
vertex(190,348);
vertex(172,344);
endShape(CLOSE);
fill(-14604253);
beginShape();
vertex(215,322);
vertex(214,331);
vertex(205,332);
vertex(205,341);
vertex(209,344);
vertex(218,345);
vertex(220,340);
vertex(222,333);
vertex(219,325);
endShape(CLOSE);
fill(-13152960);
beginShape();
vertex(148,326);
vertex(164,314);
vertex(172,319);
vertex(176,339);
vertex(175,352);
vertex(173,358);
vertex(157,357);
vertex(150,350);
vertex(151,340);
endShape(CLOSE);
fill(-13021113);
beginShape();
vertex(52,355);
vertex(60,347);
vertex(71,336);
vertex(81,332);
vertex(91,332);
vertex(99,339);
vertex(109,340);
vertex(118,340);
vertex(124,344);
vertex(131,351);
vertex(108,360);
vertex(86,361);
vertex(76,354);
endShape(CLOSE);
fill(-13483975);
beginShape();
vertex(198,344);
vertex(189,333);
vertex(185,328);
vertex(173,328);
vertex(178,341);
vertex(189,347);
vertex(194,353);
vertex(202,358);
vertex(211,361);
vertex(224,360);
vertex(228,357);
vertex(230,349);
endShape(CLOSE);
fill(-11574192);
beginShape();
vertex(153,347);
vertex(161,362);
vertex(171,363);
vertex(184,361);
vertex(189,354);
vertex(190,346);
vertex(181,342);
vertex(173,347);
vertex(165,346);
vertex(157,342);
endShape(CLOSE);
fill(-10191500);
beginShape();
vertex(8,354);
vertex(21,354);
vertex(31,353);
vertex(26,345);
vertex(16,345);
endShape(CLOSE);
fill(-12691123);
beginShape();
vertex(12,346);
vertex(6,353);
vertex(10,354);
vertex(18,354);
vertex(21,344);
vertex(16,342);
endShape(CLOSE);
fill(-12429239);
beginShape();
vertex(32,361);
vertex(44,349);
vertex(50,353);
vertex(55,355);
vertex(61,363);
endShape(CLOSE);
fill(-13810887);
beginShape();
vertex(105,360);
vertex(111,356);
vertex(115,349);
vertex(118,341);
vertex(121,345);
vertex(123,351);
vertex(126,354);
vertex(127,360);
vertex(117,362);
endShape(CLOSE);
fill(-11841473);
beginShape();
vertex(229,348);
vertex(227,343);
vertex(233,339);
vertex(238,346);
vertex(245,351);
endShape(CLOSE);
fill(-12166065);
beginShape();
vertex(213,361);
vertex(218,354);
vertex(218,345);
vertex(225,346);
vertex(228,353);
vertex(233,361);
endShape(CLOSE);



pushMatrix();
translate(-56,-6);
fill(-10921395);
beginShape();
vertex(336,330);
vertex(337,333);
vertex(338,344);
vertex(339,348);
vertex(342,350);
vertex(354,350);
vertex(363,350);
vertex(368,345);
vertex(372,337);
vertex(366,342);
vertex(361,342);
vertex(348,344);
vertex(340,341);
endShape(CLOSE);
fill(-13153478);
beginShape();
vertex(350,344);
vertex(358,308);
vertex(360,306);
vertex(352,344);
endShape(CLOSE);
fill(-6246234);
beginShape();
vertex(338,322);
vertex(351,314);
vertex(358,314);
vertex(370,308);
vertex(373,309);
vertex(360,326);
vertex(354,328);
vertex(346,333);
vertex(346,329);
vertex(354,322);
vertex(333,325);
endShape(CLOSE);
popMatrix();








pushMatrix();
rotate(10);
translate(-107,-39);
fill(-14275039);
beginShape();
vertex(428,306);
vertex(430,360);
vertex(452,360);
vertex(440,353);
vertex(435,346);
vertex(433,339);
vertex(437,320);
vertex(433,311);
endShape(CLOSE);
fill(-9404053);
beginShape();
vertex(435,348);
vertex(446,349);
vertex(542,282);
vertex(540,280);
endShape(CLOSE);
fill(-13417942);
beginShape();
vertex(444,349);
vertex(449,350);
vertex(544,283);
vertex(542,279);
vertex(442,349);
endShape(CLOSE);
fill(-13684950);
beginShape();
vertex(429,353);
vertex(433,371);
vertex(439,378);
vertex(465,383);
vertex(526,386);
vertex(562,377);
vertex(585,356);
vertex(587,343);
vertex(586,334);
vertex(520,350);
vertex(465,366);
vertex(440,362);
endShape(CLOSE);
fill(-15789042);
beginShape();
vertex(433,356);
vertex(433,349);
vertex(438,348);
vertex(441,343);
vertex(444,346);
vertex(448,348);
vertex(449,343);
vertex(451,343);
vertex(453,347);
vertex(455,350);
vertex(457,345);
vertex(460,345);
vertex(460,350);
vertex(463,350);
vertex(464,347);
vertex(466,348);
vertex(467,351);
vertex(469,350);
vertex(471,343);
vertex(474,344);
vertex(478,351);
vertex(483,350);
vertex(483,338);
vertex(486,338);
vertex(491,344);
vertex(494,346);
vertex(498,345);
vertex(498,338);
vertex(500,337);
vertex(506,340);
vertex(510,350);
vertex(479,365);
vertex(446,364);
endShape(CLOSE);
fill(-14076893);
beginShape();
vertex(440,361);
vertex(442,348);
vertex(446,362);
vertex(449,362);
vertex(453,349);
vertex(455,361);
vertex(463,360);
vertex(464,346);
vertex(467,362);
vertex(477,360);
vertex(479,345);
vertex(482,358);
vertex(481,365);
vertex(453,366);
vertex(444,366);
endShape(CLOSE);
fill(-14078171);
beginShape();
vertex(509,343);
vertex(512,355);
vertex(576,340);
vertex(578,330);
vertex(539,332);
endShape(CLOSE);
fill(-14604260);
beginShape();
vertex(428,355);
vertex(435,363);
vertex(446,366);
vertex(470,369);
vertex(507,361);
vertex(534,353);
vertex(544,353);
vertex(586,346);
vertex(586,336);
vertex(543,340);
vertex(505,349);
vertex(469,360);
vertex(454,360);
vertex(438,359);
endShape(CLOSE);
fill(-13679809);
beginShape();
vertex(478,234);
vertex(517,339);
vertex(520,338);
vertex(476,221);
endShape(CLOSE);
fill(-13085879);
beginShape();
vertex(477,233);
vertex(541,331);
vertex(477,228);
endShape(CLOSE);
fill(-13150132);
beginShape();
vertex(474,218);
vertex(538,331);
vertex(474,213);
endShape(CLOSE);
fill(-13018542);
beginShape();
vertex(473,206);
vertex(541,331);
vertex(544,331);
vertex(471,202);
endShape(CLOSE);
fill(-12691127);
beginShape();
vertex(483,258);
vertex(537,333);
vertex(538,331);
vertex(480,253);
endShape(CLOSE);
fill(-14736359);
beginShape();
vertex(468,186);
vertex(495,353);
vertex(500,351);
vertex(473,195);
endShape(CLOSE);
fill(-13944783);
beginShape();
vertex(465,195);
vertex(466,199);
vertex(478,198);
vertex(477,195);
endShape(CLOSE);
fill(-14800087);
beginShape();
vertex(468,206);
vertex(468,209);
vertex(476,210);
vertex(477,205);
endShape(CLOSE);
fill(-13942728);
beginShape();
vertex(472,227);
vertex(473,231);
vertex(482,231);
vertex(481,227);
endShape(CLOSE);
fill(-12757172);
beginShape();
vertex(475,241);
vertex(479,240);
vertex(485,240);
vertex(483,244);
vertex(476,244);
endShape(CLOSE);
fill(-13616333);
beginShape();
vertex(479,267);
vertex(482,265);
vertex(487,266);
vertex(482,268);
endShape(CLOSE);
fill(-13352654);
beginShape();
vertex(484,294);
vertex(488,291);
vertex(493,293);
vertex(487,295);
endShape(CLOSE);
fill(-14144991);
beginShape();
vertex(504,330);
vertex(507,341);
vertex(543,331);
vertex(584,330);
vertex(582,317);
vertex(542,317);
endShape(CLOSE);
fill(-15131120);
beginShape();
vertex(507,349);
vertex(513,347);
vertex(513,345);
vertex(540,334);
vertex(576,333);
vertex(576,338);
vertex(584,335);
vertex(584,333);
vertex(590,333);
vertex(590,328);
vertex(541,326);
vertex(506,341);
endShape(CLOSE);
fill(-14866404);
beginShape();
vertex(569,326);
vertex(557,262);
vertex(554,264);
vertex(566,327);
endShape(CLOSE);
fill(-14141913);
beginShape();
vertex(556,271);
vertex(550,280);
vertex(549,293);
vertex(556,309);
vertex(566,317);
endShape(CLOSE);
fill(-14208225);
beginShape();
vertex(438,356);
vertex(403,379);
vertex(406,380);
vertex(437,358);
endShape(CLOSE);
fill(-14538724);
beginShape();
vertex(449,359);
vertex(419,386);
vertex(423,387);
vertex(452,359);
endShape(CLOSE);
fill(-14472679);
beginShape();
vertex(462,357);
vertex(435,390);
vertex(439,391);
vertex(465,356);
endShape(CLOSE);
fill(-13879264);
beginShape();
vertex(479,359);
vertex(451,390);
vertex(456,390);
vertex(480,360);
endShape(CLOSE);
fill(-14472679);
beginShape();
vertex(486,361);
vertex(466,397);
vertex(473,392);
vertex(489,359);
endShape(CLOSE);
fill(-12891848);
beginShape();
vertex(517,352);
vertex(521,394);
vertex(524,393);
vertex(519,352);
endShape(CLOSE);
fill(-13221838);
beginShape();
vertex(528,351);
vertex(540,392);
vertex(542,390);
vertex(530,350);
endShape(CLOSE);
popMatrix();



popMatrix();




    }],
    ["the mausoleum of halicarnassus",
    function(){
    pushMatrix();
translate(-30,-75);
scale(1.1);
noStroke();
fill(-9797751);
beginShape();
vertex(3,369);
vertex(180,333);
vertex(471,366);
vertex(581,354);
vertex(598,357);
vertex(599,540);
vertex(1,538);
endShape(CLOSE);

fill(-8091253); beginShape(); vertex(6,394); vertex(175,445); vertex(231,420); vertex(573,496); vertex(597,424); vertex(175,360); endShape(CLOSE); fill(-10399929); beginShape(); vertex(60,361); vertex(170,386); vertex(300,346); vertex(184,329); vertex(65,350); endShape(CLOSE); fill(-10655379); beginShape(); vertex(53,347); vertex(54,352); vertex(55,362); vertex(140,345); vertex(137,337); endShape(CLOSE); fill(-14008501); beginShape(); vertex(40,347); vertex(53,346); vertex(61,348); vertex(60,356); vertex(181,374); vertex(182,393); vertex(179,395); vertex(40,370); endShape(CLOSE); fill(-14472657); beginShape(); vertex(190,374); vertex(228,364); vertex(231,380); vertex(189,393); endShape(CLOSE); fill(-10522500); beginShape(); vertex(179,374); vertex(180,395); vertex(197,390); vertex(193,371); endShape(CLOSE); fill(-12626590); beginShape(); vertex(39,361); vertex(40,387); vertex(178,426); vertex(232,405); vertex(231,373); vertex(179,391); endShape(CLOSE); fill(-7767959); beginShape(); vertex(278,351); vertex(232,365); vertex(337,425); vertex(381,396); endShape(CLOSE); fill(-12574446); beginShape(); vertex(116,270); vertex(185,268); vertex(185,362); vertex(108,350); endShape(CLOSE); fill(-4546930); beginShape(); vertex(181,269); vertex(181,360); vertex(264,343); vertex(258,268); endShape(CLOSE); fill(-14411242); beginShape(); vertex(105,341); vertex(105,354); vertex(181,366); vertex(183,352); endShape(CLOSE); fill(-11453395); beginShape(); vertex(103,353); vertex(101,356); vertex(180,370); vertex(182,365); endShape(CLOSE); fill(-5994634); beginShape(); vertex(180,351); vertex(180,365); vertex(268,343); vertex(268,333); endShape(CLOSE); fill(-5465976); beginShape(); vertex(180,364); vertex(180,370); vertex(270,346); vertex(268,342); endShape(CLOSE); fill(-14146266); beginShape(); vertex(101,340); vertex(108,339); vertex(182,349); vertex(182,353); vertex(104,342); endShape(CLOSE); fill(-9806249); beginShape(); vertex(180,352); vertex(269,335); vertex(264,333); vertex(181,349); endShape(CLOSE); fill(-16120311); beginShape(); vertex(220,314); vertex(234,313); vertex(235,355); vertex(222,358); endShape(CLOSE); fill(-8832481); beginShape(); vertex(218,314); vertex(218,360); vertex(223,359); vertex(224,313); endShape(CLOSE); fill(-6663373); beginShape(); vertex(233,313); vertex(233,356); vertex(237,355); vertex(236,311); endShape(CLOSE); fill(-8363701); beginShape(); vertex(216,312); vertex(238,311); vertex(237,315); vertex(217,316); endShape(CLOSE); fill(-9801359); beginShape(); vertex(226,360); vertex(230,357); vertex(238,358); vertex(239,366); vertex(254,366); vertex(256,375); vertex(272,378); vertex(273,387); vertex(291,390); vertex(293,401); vertex(314,402); vertex(317,417); vertex(233,395); endShape(CLOSE); fill(-13617346); beginShape(); vertex(225,360); vertex(234,360); vertex(235,367); vertex(249,368); vertex(252,377); vertex(266,380); vertex(267,389); vertex(286,392); vertex(288,403); vertex(310,405); vertex(312,415); vertex(338,418); vertex(337,425); vertex(226,403); endShape(CLOSE); fill(-11246225); beginShape(); vertex(313,415); vertex(317,413); vertex(341,416); vertex(337,418); endShape(CLOSE); fill(-10393231); beginShape(); vertex(337,417); vertex(341,416); vertex(342,423); vertex(337,425); endShape(CLOSE); fill(-13220535); beginShape(); vertex(38,385); vertex(39,388); vertex(178,428); vertex(230,406); vertex(343,429); vertex(342,424); vertex(230,401); vertex(179,422); vertex(40,384); endShape(CLOSE); fill(-14472916); beginShape(); vertex(180,369); vertex(193,372); vertex(180,374); vertex(167,372); endShape(CLOSE); fill(-6861281); beginShape(); vertex(268,334); vertex(317,338); vertex(315,349); vertex(268,342); endShape(CLOSE); fill(-12696248); beginShape(); vertex(306,339); vertex(306,362); vertex(314,364); vertex(314,338); endShape(CLOSE); fill(-9472395); beginShape(); vertex(307,340); vertex(285,348); vertex(284,355); vertex(298,354); vertex(308,363); endShape(CLOSE); fill(-10589837); beginShape(); vertex(311,339); vertex(312,354); vertex(319,351); vertex(318,337); endShape(CLOSE); fill(-13554905); beginShape(); vertex(313,336); vertex(306,339); vertex(312,340); vertex(319,336); endShape(CLOSE); fill(-9025740); beginShape(); vertex(262,361); vertex(274,362); vertex(275,365); vertex(272,367); vertex(282,367); vertex(287,365); vertex(287,367); vertex(296,369); vertex(289,373); vertex(301,376); vertex(311,374); vertex(314,374); vertex(308,379); vertex(317,379); vertex(313,384); vertex(329,380); vertex(337,381); vertex(331,385); vertex(342,386); vertex(336,391); vertex(350,392); vertex(364,391); vertex(360,386); vertex(288,352); vertex(276,354); endShape(CLOSE); fill(-9801621); beginShape(); vertex(283,343); vertex(297,344); vertex(298,349); vertex(309,351); vertex(311,358); vertex(325,358); vertex(326,367); vertex(344,368); vertex(343,377); vertex(364,379); vertex(363,388); vertex(382,389); vertex(383,396); vertex(378,398); vertex(358,388); vertex(286,350); endShape(CLOSE); fill(-7519710); beginShape(); vertex(279,355); vertex(280,343); vertex(290,344); vertex(290,351); vertex(306,351); vertex(306,360); vertex(321,361); vertex(321,369); vertex(339,370); vertex(340,379); vertex(358,379); vertex(359,389); vertex(379,390); vertex(378,398); vertex(372,395); vertex(366,392); vertex(358,390); vertex(354,386); endShape(CLOSE); fill(-13291225); beginShape(); vertex(118,257); vertex(114,266); vertex(192,267); vertex(195,257); endShape(CLOSE); fill(-5593226); beginShape(); vertex(186,258); vertex(186,266); vertex(262,265); vertex(259,258); endShape(CLOSE); fill(-14739691); beginShape(); vertex(114,263); vertex(111,271); vertex(186,272); vertex(187,263); endShape(CLOSE); fill(-5199451); beginShape(); vertex(261,263); vertex(267,272); vertex(185,273); vertex(185,263); endShape(CLOSE); fill(-16119288); beginShape(); vertex(113,254); vertex(115,259); vertex(186,259); vertex(189,253); endShape(CLOSE); fill(-8420999); beginShape(); vertex(185,254); vertex(185,259); vertex(262,259); vertex(265,254); vertex(186,253); endShape(CLOSE); fill(-14740457); beginShape(); vertex(132,234); vertex(188,233); vertex(243,237); vertex(243,189); vertex(243,184); vertex(187,170); vertex(132,180); endShape(CLOSE); fill(-15201271); beginShape(); vertex(123,233); vertex(124,250); vertex(185,252); vertex(254,253); vertex(254,236); vertex(191,230); endShape(CLOSE);

fill(-7059674);
beginShape();
vertex(119,179);
vertex(128,186);
vertex(187,178);
vertex(246,192);
vertex(260,187);
vertex(186,170);
endShape(CLOSE);

for(var i = -2; i < 4; i++){
pushMatrix();
translate(-4+i*6.5,-6-i*4.9);

scale(1.03+i*0.02);
fill(-12968688);
beginShape();
vertex(135,235);
vertex(135,250);
vertex(144,251);
vertex(144,235);
endShape(CLOSE);
fill(-7455192);
beginShape();
vertex(142,232);
vertex(142,250);
vertex(146,249);
vertex(147,232);
endShape(CLOSE);
fill(-12378348);
beginShape();
vertex(144,182);
vertex(144,227);
vertex(150,227);
vertex(149,182);
endShape(CLOSE);
fill(-9556713);
beginShape();
vertex(144,225);
vertex(150,225);
vertex(150,236);
vertex(150,249);
vertex(144,251);
endShape(CLOSE);
fill(-13625844);
beginShape();
vertex(133,233);
vertex(134,236);
vertex(149,236);
vertex(151,233);
vertex(148,232);
vertex(135,232);
endShape(CLOSE);
fill(-13823731);
beginShape();
vertex(143,183);
vertex(142,181);
vertex(145,178);
vertex(152,182);
endShape(CLOSE);
popMatrix();
}
for(var i = -2; i < 4; i++){
pushMatrix();

scale(-1,1);
translate(-369+i*6,1.9-i*9.89);

scale(1+i*0.04);

fill(-4738385);
beginShape();
vertex(135,234);
vertex(135,250);
vertex(144,251);
vertex(144,234);
endShape(CLOSE);
fill(-14281721);
beginShape();
vertex(142,234);
vertex(142,250);
vertex(146,249);
vertex(147,234);
endShape(CLOSE);

fill(-12569035);
beginShape();
vertex(144,182);
vertex(144,227);
vertex(150,227);
vertex(149,182);
endShape(CLOSE);
fill(-8622996);
beginShape();
vertex(144,223);
vertex(150,223);
vertex(150,236);
vertex(150,249);
vertex(144,251);
endShape(CLOSE);
fill(-13625844);
beginShape();
vertex(133,233);
vertex(134,236);
vertex(149,236);
vertex(151,233);
vertex(148,232);
vertex(135,232);
endShape(CLOSE);
fill(-13823731);
beginShape();
vertex(143,183);
vertex(142,181);
vertex(145,178);
vertex(152,182);
endShape(CLOSE);
popMatrix();
}
pushMatrix();
translate(39,1);
fill(-13625844);
beginShape();
vertex(133,233);
vertex(134,236);
vertex(149,236);
vertex(151,233);
vertex(148,232);
vertex(135,232);
endShape(CLOSE);
popMatrix();


fill(-14543338);
beginShape();
vertex(118,250);
vertex(114,254);
vertex(186,254);
vertex(185,249);
endShape(CLOSE);
fill(-5334640);
beginShape();
vertex(185,250);
vertex(186,254);
vertex(265,254);
vertex(258,251);
vertex(185,249);
endShape(CLOSE);

fill(-12896986);
beginShape();
vertex(119,169);
vertex(119,179);
vertex(189,168);
vertex(189,158);
endShape(CLOSE);
fill(-4804737);
beginShape();
vertex(186,159);
vertex(186,169);
vertex(257,184);
vertex(258,177);
endShape(CLOSE);

fill(-14937324);
beginShape();
vertex(116,176);
vertex(116,180);
vertex(187,170);
vertex(187,166);
endShape(CLOSE);
fill(-9934486);
beginShape();
vertex(186,167);
vertex(186,170);
vertex(258,188);
vertex(258,183);
vertex(186,166);
endShape(CLOSE);
fill(-15921648);
beginShape();
vertex(129,166);
vertex(181,89);
vertex(186,94);
vertex(187,157);
vertex(126,168);
endShape(CLOSE);
fill(-6649727);
beginShape();
vertex(182,90);
vertex(182,104);
vertex(205,113);
vertex(206,100);
endShape(CLOSE);
fill(-4806498);
beginShape();
vertex(182,101);
vertex(187,158);
vertex(249,175);
vertex(206,110);
endShape(CLOSE);
fill(-11918058);
beginShape();
vertex(115,167);
vertex(120,170);
vertex(187,160);
vertex(186,157);
endShape(CLOSE);
fill(-9352904);
beginShape();
vertex(186,157);
vertex(259,176);
vertex(258,179);
vertex(186,161);
endShape(CLOSE);
fill(-12703715);
beginShape();
vertex(125,128);
vertex(122,154);
vertex(128,154);
endShape(CLOSE);
fill(-9553112);
beginShape();
vertex(120,153);
vertex(130,153);
vertex(129,155);
vertex(129,158);
vertex(129,166);
vertex(121,168);
vertex(121,160);
vertex(122,155);
endShape(CLOSE);
fill(-12833495);
beginShape();
vertex(250,138);
vertex(248,161);
vertex(254,161);
endShape(CLOSE);
fill(-9618134);
beginShape();
vertex(248,160);
vertex(255,160);
vertex(253,162);
vertex(254,167);
vertex(255,176);
vertex(247,173);
vertex(248,162);
vertex(246,160);
endShape(CLOSE);
fill(-10333618);
beginShape();
vertex(174,90);
vertex(173,101);
vertex(182,101);
vertex(183,89);
endShape(CLOSE);
fill(-10396328);
beginShape();
vertex(172,89);
vertex(172,92);
vertex(182,90);
vertex(207,101);
vertex(207,97);
vertex(183,87);
endShape(CLOSE);
fill(-8950167);
beginShape();
vertex(186,78);
vertex(189,77);
vertex(190,80);
vertex(187,82);
vertex(187,89);
vertex(184,87);
vertex(184,84);
vertex(182,84);
vertex(181,88);
vertex(178,88);
vertex(180,85);
vertex(182,82);
vertex(185,82);
endShape(CLOSE);
fill(-6515825);
beginShape();
vertex(196,84);
vertex(195,82);
vertex(198,81);
vertex(199,84);
vertex(195,87);
vertex(195,93);
vertex(193,91);
vertex(193,88);
vertex(190,90);
vertex(188,90);
vertex(191,86);
vertex(193,86);
endShape(CLOSE);
fill(-8157045);
beginShape();
vertex(202,89);
vertex(202,87);
vertex(204,86);
vertex(205,88);
vertex(204,91);
vertex(203,91);
vertex(204,97);
vertex(202,95);
vertex(201,92);
vertex(200,92);
vertex(198,94);
vertex(196,92);
vertex(200,89);
endShape(CLOSE);
fill(-7112596);
beginShape();
vertex(199,286);
vertex(207,280);
vertex(212,284);
vertex(217,286);
vertex(213,288);
vertex(214,304);
vertex(206,308);
vertex(202,305);
vertex(201,288);
endShape(CLOSE);
fill(-16645630);
beginShape();
vertex(203,289);
vertex(205,286);
vertex(211,287);
vertex(211,289);
vertex(212,302);
vertex(204,304);
endShape(CLOSE);
fill(-6388617);
beginShape();
vertex(240,285);
vertex(247,279);
vertex(255,284);
vertex(253,285);
vertex(253,299);
vertex(248,303);
vertex(243,299);
vertex(242,285);
endShape(CLOSE);
fill(-15858173);
beginShape();
vertex(244,286);
vertex(246,284);
vertex(250,285);
vertex(251,286);
vertex(252,297);
vertex(245,299);
endShape(CLOSE);
fill(-8965095);
beginShape();
vertex(122,285);
vertex(123,300);
vertex(124,304);
vertex(129,305);
vertex(132,303);
vertex(132,285);
vertex(134,283);
vertex(122,282);
endShape(CLOSE);
fill(-8965095);
beginShape();
vertex(154,287);
vertex(153,304);
vertex(154,308);
vertex(161,309);
vertex(163,306);
vertex(165,287);
vertex(167,283);
vertex(154,283);
endShape(CLOSE);
fill(-15659764);
beginShape();
vertex(122,286);
vertex(125,285);
vertex(125,308);
vertex(129,308);
vertex(128,285);
vertex(133,285);
vertex(136,282);
vertex(120,282);
endShape(CLOSE);
fill(-14675698);
beginShape();
vertex(152,283);
vertex(153,287);
vertex(156,287);
vertex(156,311);
vertex(161,311);
vertex(160,286);
vertex(165,287);
vertex(169,283);
endShape(CLOSE);
fill(-13355461);
beginShape();
vertex(33,325);
vertex(35,320);
vertex(38,320);
vertex(45,331);
vertex(57,331);
vertex(52,334);
vertex(54,338);
vertex(55,347);
vertex(53,349);
vertex(51,341);
vertex(48,348);
vertex(45,349);
vertex(47,341);
vertex(42,333);
vertex(36,334);
vertex(34,339);
vertex(32,339);
vertex(33,330);
vertex(37,329);
vertex(37,326);
endShape(CLOSE);
fill(-15988985);
beginShape();
vertex(175,346);
vertex(172,349);
vertex(171,345);
vertex(174,342);
vertex(181,348);
vertex(183,352);
vertex(186,353);
vertex(190,354);
vertex(195,360);
vertex(192,361);
vertex(191,372);
vertex(189,373);
vertex(189,363);
vertex(186,361);
vertex(185,364);
vertex(185,372);
vertex(183,371);
vertex(183,361);
vertex(180,358);
vertex(178,359);
vertex(175,363);
vertex(173,360);
vertex(174,357);
vertex(175,354);
vertex(174,353);
vertex(172,356);
vertex(170,357);
vertex(170,353);
vertex(172,351);
vertex(176,350);
endShape(CLOSE);
fill(-14871278);
beginShape();
vertex(308,339);
vertex(307,330);
vertex(311,324);
vertex(314,322);
vertex(315,318);
vertex(318,312);
vertex(322,314);
vertex(323,318);
vertex(320,319);
vertex(320,324);
vertex(323,324);
vertex(323,328);
vertex(320,326);
vertex(318,326);
vertex(314,332);
vertex(314,339);
vertex(312,340);
vertex(312,334);
vertex(310,334);
vertex(310,340);
endShape(CLOSE);

var a = [[350,433],[388,397],[403,443],[440,407],[459,453],[498,417],[516,466],[553,427],];

for(var i = 0; i < a.length; i++){
pushMatrix();
translate(a[i][0],a[i][1]);
fill(-12894918);
ellipse(0,0,10,5);
rect(-2,-20,4,20,4);
fill(-3894176);
pushMatrix();
scale(1.7);
translate(-272.5,-347);
beginShape();
vertex(272,338);
vertex(270,335);
vertex(272,330);
vertex(275,335);
endShape(CLOSE);
popMatrix();
fill(-2241642);
ellipse(1,-23,4,12);
popMatrix();
}
popMatrix();

    }],
    ];
    
var wonderImgs = {};


function swordInit(){
noStroke();
fill(125, 125, 125);
beginShape();
vertex(-3,-9);
vertex(0,-53);
vertex(3,-40);
vertex(3,-9);
endShape();
fill(199, 199, 199);
beginShape();
vertex(-3,-9);
vertex(-3,-43);
vertex(0,-53);
vertex(0,-9);
endShape();
fill(235, 235, 235);
beginShape();
vertex(-1,-42);
vertex(0,-53);
vertex(1,-39);
vertex(0,-20);
endShape();
stroke(77, 60, 38);
strokeWeight(1);
fill(102, 83, 55);
rect(-2,-10,3,10,0);
strokeWeight(2);
ellipse(0,0,5,5);
ellipse(0,-9,8,3);

}

background(255, 255, 255);
background(255, 255, 255, 0);
pushMatrix();
translate(300,300);
scale(4);
swordInit();
var swordImg = get(0,0,600,600);
popMatrix();
function skullInit(){
pushMatrix();
scale(0.6);
translate(-18,-30);
rotate(142);
noStroke();
fill(125, 125, 125);
beginShape();
vertex(-3,-9);
vertex(0,-53);
vertex(3,-40);
vertex(3,-9);
endShape();
fill(199, 199, 199);
beginShape();
vertex(-3,-9);
vertex(-3,-43);
vertex(0,-53);
vertex(0,-9);
endShape();
fill(235, 235, 235);
beginShape();
vertex(-1,-42);
vertex(0,-53);
vertex(1,-39);
vertex(0,-20);
endShape();
stroke(77, 60, 38);
strokeWeight(1);
fill(102, 83, 55);
rect(-2,-10,3,10,0);
strokeWeight(2);
ellipse(0,0,5,5);
ellipse(0,-9,8,3);
popMatrix();
noStroke();
// stroke(0,0,0);
// strokeWeight(0.6);
fill(153, 153, 153);
beginShape();
vertex(-2,3);
vertex(-3,0);
vertex(-3,-1);
vertex(-5,-2);
vertex(-6,-6);
vertex(-6,-9);
vertex(-3,-11);
vertex(0,-12);
vertex(3,-11);
vertex(6,-9);
vertex(6,-6);
vertex(5,-2);
vertex(3,-1);
vertex(3,0);
vertex(2,3);
endShape(CLOSE);
noStroke();
fill(0,0,0);
pushMatrix();
translate(-2.5,-7);
rotate(-20);
ellipse(0,0,3,2);
popMatrix();
pushMatrix();
translate(2.5,-7);
rotate(20);
ellipse(0,0,3,2);
popMatrix();
triangle(0,-6,1,-4,-1,-4);

}
background(255, 255, 255);
background(255, 255, 255, 0);
pushMatrix();
translate(300,300);
scale(10);
skullInit();
var skullImg = get(0,0,600,600);
popMatrix();
function vpInit(){
    for(var i = 0; i < 2; i++){
pushMatrix();
if(i === 1){
scale(-1,1);
}

translate(-17,0);
rotate(-15);

pushMatrix();
translate(-58,129);
rotate(-8);
scale(0.8);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(96, 168, 72);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-122,75);
rotate(33);
scale(0.6);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(96, 207, 76);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-137,11);
rotate(59);
scale(0.7);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(119, 201, 92);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-111,-56);
rotate(101);
scale(0.6);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(44, 110, 33);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-44,-110);
rotate(143);
scale(0.8);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();


pushMatrix();
rotate(-45);
stroke(100,45,25);
strokeWeight(10);
noFill();
arc(0,0,230,200,145,290);
popMatrix();


pushMatrix();
translate(-60,80);
rotate(55);
scale(0.6);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();
pushMatrix();
translate(-89,54);
rotate(90);
scale(0.4);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-60,80);
rotate(55);
scale(0.6);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-93,-25);
rotate(136);
scale(0.5);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-97,21);
rotate(113);
scale(0.45);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(108, 196, 92);
arc(-10,-30,170,71,20,170);
fill(103,181,79);
arc(6,-32,146,48,34,166);
popMatrix();

pushMatrix();
translate(-53,-78);
rotate(153);
scale(0.6);
noStroke();
fill(103,181,79);
arc(0,0,150,100,200,340);
fill(76,162,61);
arc(-10,-30,170,71,20,170);
fill(103, 191, 74);
arc(6,-32,146,48,34,166);
popMatrix();
popMatrix();

}


}
background(255, 255, 255);
background(255, 255, 255, 0);
pushMatrix();
translate(300,300);
scale(0.4/1.4);
vpInit();
var vpImg = get(0,0,600,600);
popMatrix();

// logo
//{
background(255, 255, 255);
background(255, 255, 255, 0);
textFont(createFont("serif"));
textAlign(CENTER,BASELINE);
pushMatrix();
scale(1.2);
translate(115,-370);
noStroke();
for(var i = 5; i > -1; i-=0.5){
fill(255-i*5, 179, 0);
pushMatrix();
translate(-126+i,174-i);
//fill(255, 179, 0);
textSize(50);
text("O N D E R S",339,300);
text("V",184,300);
text("V",168,300);
popMatrix();
textSize(160);
text("7",-33+i*2,515-i);
//rect(17+i,412-i,330,10,3);
//rect(-8+i,490-i,355,10,3);
}
popMatrix();
var logoImg = get(0,0,600,600);
//}

// settings label
//{
background(255, 255, 255);
background(255, 255, 255, 0);
//textFont(createFont("serif"));
pushMatrix();
//scale(1.2);
translate(0,-370);
noStroke();
for(var i = 5; i > -1; i-=0.5){
fill(255-i*5, 179, 0);
pushMatrix();
translate(i,174-i);
//fill(255, 179, 0);
textSize(60);
text("S E T T I N G S",300,300);
popMatrix();
//rect(17+i,412-i,330,10,3);
//rect(-8+i,490-i,355,10,3);
}
popMatrix();
var settingsLabelImg = get(0,0,600,600);
//}

// tutorial label
//{
background(255, 255, 255);
background(255, 255, 255, 0);
// textFont(createFont("serif"));
pushMatrix();
//scale(1.2);
translate(0,-370);
noStroke();
for(var i = 5; i > -1; i-=0.5){
fill(255-i*5, 179, 0);
pushMatrix();
translate(i,174-i);
//fill(255, 179, 0);
textSize(60);
text("T U T O R I A L",300,300);
popMatrix();
//rect(17+i,412-i,330,10,3);
//rect(-8+i,490-i,355,10,3);
}
popMatrix();
var tutorialLabelImg = get(0,0,600,600);
//}

// wonder select label
//{
background(255, 255, 255);
background(255, 255, 255, 0);
// textFont(createFont("serif"));
pushMatrix();
//scale(1.2);
translate(0,-370);
noStroke();
for(var i = 5; i > -1; i-=0.5){
fill(255-i*5, 179, 0);
pushMatrix();
translate(i,174-i);
//fill(255, 179, 0);
textSize(40);
text("S E L E C T   W O N D E R",300,300);
popMatrix();
//rect(17+i,412-i,330,10,3);
//rect(-8+i,490-i,355,10,3);
}
popMatrix();
var wonderSelectLabelImg = get(0,0,600,600);
//}

textFont(createFont("monospace"));
function sword(){
    pushMatrix();
    scale(0.25);
    translate(-300,-300);
    image(swordImg,0,0);
    popMatrix();
}
function skull(){
    pushMatrix();
    scale(0.2);
    translate(-300,-300);
    image(skullImg,0,0);
    popMatrix();
}
function trophy(){
pushMatrix();
noStroke();
fill(232, 174, 0);
ellipse(0,10,6,6);
quad(-10,15,-8,12,8,12,10,15);
arc(0,-10,25,35,0,180);
line(-12,-10,12,-10);
popMatrix();
}
function vp(){
    noStroke();
    fill(123,188,94,200);
    ellipse(0,0,40,40);
    pushMatrix();
    scale(0.46*1.4);
    translate(-300,-300);
    image(vpImg,0,0);
    popMatrix();  
}
function strengthSymbol(){
pushMatrix();
scale(20/30);
strokeWeight(2);
stroke(171, 171, 171);
fill(186, 34, 34);
ellipse(0,-1,36,36);
noFill();
stroke(51, 51, 51);
ellipse(0,0,38,38);

strokeWeight(2);
stroke(217, 217, 217);
line(0,-13,0,13);
line(-13,0,13,0);

strokeWeight(5);
stroke(51, 51, 51);
ellipse(0,0,10,10);

pushMatrix();
rotate(40);
translate(0,23);
sword();
popMatrix();
pushMatrix();
scale(-1,1);
rotate(40);
translate(0,23);
sword();
popMatrix();
popMatrix();
}
function shuffleArray(e) {
  var sra = [];
  var ea = [];
  for (var q = 0; q < e.length; q++) {
    ea.push(e[q]);
  }
  for (var i = 0; i < e.length; i++) {
    var sn = round(random(0, ea.length - 1));
    sra.push(ea[sn]);
    ea.splice(sn, 1);
  }
  return (sra);
}

var clicked = false;

var nodeList = [];

var transition = {
pImgs:[],
x:0,
y:0,
tox:0,
toy:0,
queued:false,
};

function manageTransition(){
// transition.px = transition.x;
// transition.py = transition.y;

if(transition.pImg){
image(transition.pImg,transition.tox,transition.toy);
}
    if(transition.queued){
        // println('e');
        var pImgx = 0;
        var pImgy = 0;
        var pImgw = 600;
        var pImgh = 600;
        transition.pImg = get(pImgx,pImgy,pImgw,pImgh);
        transition.tox = transition.queued.tox;
        transition.toy = transition.queued.toy;
        transition.x = transition.queued.tox;
        transition.y = transition.queued.toy;
        transition.queued = false;
    }
    
transition.x = lerp(transition.x,0,0.12);
transition.y = lerp(transition.y,0,0.12);
if(transition.pImg && abs(transition.x) < 0.001 && abs(transition.y) < 0.001){
    transition.x = 0;
    transition.y = 0;
    transition.pImg = false;
}
}
function doTransitionFrom(x,y){
// println(x+" , "+round(transition.x)+" , "+round(transition.tox));
// var pImgx = 0-transition.x;
// var pImgy = 0-transition.y;
// var pImgw = 600;
// var pImgh = 600;
// transition.pImg = get(pImgx,pImgy,pImgw,pImgh);]
transition.queued = {
tox:x,
toy:y,
};
}

/** 
 * Keyboard Inputs 
**/
//{

var TAPPED_TIME = 1;

function Key() {
  this.pressed = false;
  this.tapped = false;
  //how long key will stay tapped
  this.tappedTime = TAPPED_TIME;
}
Key.prototype.press = function() {
  this.tapped = false;
  if (this.pressed === false) {
    this.tapped = true;
    this.tappedTime = TAPPED_TIME;
  }
  this.pressed = true;

};
Key.prototype.unTap = function() {
  this.tapped = false;
  this.tappedTime = 0;
};
Key.prototype.isTapped = function() {

  if (this.tapped === true) {

    this.tapped = false;
    this.tappedTime = 0;
    return true;
  } else {
    return false;
  }
};
Key.prototype.update = function() {
  this.tappedTime--;
};
var keys = {};

function pressed(e) {
  if (e) {
    if (e.pressed) {
      return true;
    }
  }
}

function tapped(e) {
  if (e) {
    if (e.tapped) {
      return true;
    }
  }
}


keyPressed = function() {
  if (!keys[keyCode]) {
    keys[keyCode] = new Key();
  }
  keys[keyCode].press();
  //pushedKey = key;
  // println(keyCode);
};
keyReleased = function() {
  keys[keyCode].pressed = false;
  if (keyCode === 32) {
    clicked = true;
  }
};

function manageKeys() {

  for (var i in keys) {
    if (keys[i].tapped === true) {

      keys[i].update();
      if (keys[i].tappedTime <= 0) {
        keys[i].tapped = false;
      }
    }

  }

}


//}



var mousePressed = false;
var msx = 0;
var msy = 0;
var activeView = 0;
var m = {
hold:false,
lastHeld:false,
px:0,
py:0,
};
var cam = {
x:0,
y:0,
scale:1,
rot:0,
};
var cursorImg = {
x:300,
y:300,
alpha:0,
};
var pView = 0;
var selectP = false;

var age = 1;


function tryGrab(){
    return (clicked||(mousePressed&&((msx!==m.px||msy!==m.py))));
}

var discardedCards = [];
var awaitingEffects;

var players = [];

function getLeftRight(p){
    var pIndex = players.indexOf(p);
        if(pIndex >= 0){
        var rightIndex = pIndex-1;
        if(rightIndex<0){
            rightIndex = players.length-1;
        }
        var leftIndex = pIndex+1;
        if(leftIndex >= players.length){
            leftIndex = 0;
        }
        return [leftIndex,rightIndex];
        }
}
function getProduction(){}
function getScience(){}

function player(){
    this.gold = 3;
    this.hand = [];
    this.tradePool = [];
    this.trades = [[],[]];
    this.choice = false;
    this.wonder = false;
    this.wonderStage = 0;
    this.record = [0,0,0,0,];
    this.wonderInfoCardShow = 0;
    this.wonderHighlight = {};
    this.freeBuild = false;
    this.costCache = false;
    this.costCacheReturn = false;
    this.strength = 0;
    this.toGiveGold = [];
    this.structures = {
      basic:[],
      rare:[],
      civil:[],
      commercial:[],
      military:[],
      science:[],
      guild:[],
    };
    this.lastProduction = [];
    players.push(this);
}

var types = {
    "lumber yard":{
        age:1,
        type:"basic",
        produces:["wood"],
        cost:[],
    },
    "ore vein":{
        age:1,
        type:"basic",
        produces:["ore"],
        cost:[],
    },
    "stone pit":{
        age:1,
        type:"basic",
        produces:["stone"],
        cost:[],
    },
    "clay pool":{
        age:1,
        type:"basic",
        produces:["clay"],
        cost:[],
    },
    "timber yard":{
        age:1,
        type:"basic",
        produces:["stone","wood"],
        cost:[["gold",1]],
    },
    "tree farm":{
        age:1,
        type:"basic",
        produces:["wood","clay"],
        cost:[["gold",1]],
    },
    "forest cave":{
        age:1,
        type:"basic",
        produces:["wood","ore"],
        cost:[["gold",1]],
    },
    "mine":{
        age:1,
        type:"basic",
        produces:["stone","ore"],
        cost:[["gold",1]],
    },
    "clay pit":{
        age:1,
        type:"basic",
        produces:["clay","ore"],
        cost:[["gold",1]],
    },
    "excavation":{
        age:1,
        type:"basic",
        produces:["stone","clay",],
        cost:[["gold",1]],
    },
    "glassworks":{
        age:1,
        type:"rare",
        produces:["glass",],
        cost:[],
    },
    "press":{
        age:1,
        type:"rare",
        produces:["papyrus",],
        cost:[],
    },
    "loom":{
        age:1,
        type:"rare",
        produces:["textiles",],
        cost:[],
    },
    "theater":{
        age:1,
        type:"civil",
        points: 2,
        evos:["statue",],
        cost:[],
    },
    "altar":{
        age:1,
        type:"civil",
        points: 2,
        evos:["temple"],
        cost:[],
    },
    "pawnshop":{
        age:1,
        type:"civil",
        points: 3,
        cost:[],
    },
    "baths":{
        age:1,
        type:"civil",
        points: 3,
        evos:["aqueduct",],
        cost:["stone"],
    },
    "guard tower":{
        age:1,
        type:"military",
        strength:1,
        cost:["clay"],
    },
    "stockade":{
        age:1,
        type:"military",
        strength:1,
        cost:["wood"],
    },
    "barracks":{
        age:1,
        type:"military",
        strength:1,
        cost:["ore"],
    },
    "scriptorium":{
        age:1,
        type:"science",
        produces:"tablet",
        evos:["courthouse","library"],
        cost:["papyrus"],
    },
    "workshop":{
        age:1,
        type:"science",
        produces:"cog",
        evos:["laboratory","archery range"],
        cost:["glass"],
    },
    "apothecary":{
        age:1,
        type:"science",
        produces:"compass",
        evos:["stables","dispensary"],
        cost:["textiles"],
    },
    "tavern":{
        age:1,
        type:"commercial",
        descript:"Gain 5 gold when built",
        descriptDown:15,
        cost:[],
        effect:function(p){
            p.gold += 5;
        },
        botRecommend:function(p){
            if(p.gold <= 2){
                if(p.gold === 0){
                    return 2;
                }
                return 1;
            }
            return 0;
        },
        symbols:[["gold",5]],
    },
    "east trading post":{
        age:1,
        type:"commercial",
        addW:45,
        addH:20,
        descript:"Trading for basic resources with the player to the right costs 1 gold\n(Clay, Stone, Wood, and Ore are basic)",
        evos:["forum"],
        cost:[],
        symbols:["clay","stone","wood","ore"],
        rIndicator:true,
        rGold:true,
        botRecommend:function(p){
            var production = getProduction(p);
            var v = ["clay","stone","wood","ore"];
            var need = v.length;
            for(var q = 0; q < v.length; q++){
                for(var i = 0; i < production.length; i++){
                    if(production[i].indexOf(v[q]) >= 0){
                        need--;
                        i = production.length;
                    }
                }
            }
            return round((need/v.length)*2);
        },
        tradeMod:function(resource, trader){
            if(trader === 1){
                var v = ["clay","stone","wood","ore"];
                if(v.indexOf(resource) >= 0){
                    
                    return true;  
                }
            }
            return false;
        },
    },
    "west trading post":{
        age:1,
        type:"commercial",
        addW:45,
        addH:20,
        descript:"Trading for basic resources with the player to the left costs 1 gold\n(Clay, Stone, Wood, and Ore are basic)",
        evos:["forum"],
        cost:[],
        symbols:["clay","stone","wood","ore"],
        lIndicator:true,
        lGold:true,
        botRecommend:function(p){
            var production = getProduction(p);
            var v = ["clay","stone","wood","ore"];
            var need = v.length;
            for(var q = 0; q < v.length; q++){
                for(var i = 0; i < production.length; i++){
                    if(production[i].indexOf(v[q]) >= 0){
                        need--;
                        i = production.length;
                    }
                }
            }
            return round((need/v.length)*2);
        },
        tradeMod:function(resource, trader){
            if(trader === 0){
                var v = ["clay","stone","wood","ore"];
                if(v.indexOf(resource) >= 0){
                    
                    return true;  
                }
            }
            return false;
        },
    },
    "marketplace":{
        age:1,
        type:"commercial",
        addH:30,
        descript:"Trading for rare resources costs 1 gold\n(Glass, Textiles, and Papyrus are rare)",
        evos:["caravansery"],
        cost:[],
        symbols:["glass","textiles","papyrus"],
        lIndicator:true,
        rIndicator:true,
        rGold:true,
        lGold:true,
        botRecommend:function(p){
            var production = getProduction(p);
            var v = ["glass","textiles","papyrus"];
            var need = v.length;
            for(var q = 0; q < v.length; q++){
                for(var i = 0; i < production.length; i++){
                    if(production[i].indexOf(v[q]) >= 0){
                        need--;
                        i = production.length;
                    }
                }
            }
            return round((need/v.length)*2);
        },
        tradeMod:function(resource, trader){
            var v = ["glass","textiles","papyrus"];
            if(v.indexOf(resource) >= 0){
                
                return true;  
            }
            return false;
        },
    },
    "sawmill":{
        age:2,
        type:"basic",
        doubleProducer:true,
        produces:["wood"],
        cost:[["gold",1],],
    },
    "foundry":{
        age:2,
        type:"basic",
        doubleProducer:true,
        produces:["ore"],
        cost:[["gold",1],],
    },
    "quarry":{
        age:2,
        type:"basic",
        doubleProducer:true,
        produces:["stone"],
        cost:[["gold",1],],
    },
    "brickyard":{
        age:2,
        type:"basic",
        doubleProducer:true,
        produces:["clay"],
        cost:[["gold",1],],
    },
    "glass factory":{
        age:2,
        type:"rare",
        addW:20,
        produces:["glass",],
        cost:[],
    },
    "paper mill":{
        age:2,
        type:"rare",
        produces:["papyrus",],
        cost:[],
    },
    "textile factory":{
        age:2,
        type:"rare",
        addW:40,
        produces:["textiles",],
        cost:[],
    },
    "statue":{
        age:2,
        type:"civil",
        points: 4,
        evos:["gardens"],
        cost:["ore","ore","wood"],
    },
    "aqueduct":{
        age:2,
        type:"civil",
        points: 5,
        evos:[],
        cost:["stone","stone","stone"],
    },
    "courthouse":{
        age:2,
        type:"civil",
        points: 4,
        evos:[],
        cost:["clay","clay","textiles"],
    },
    "temple":{
        age:2,
        type:"civil",
        points: 3,
        evos:["pantheon"],
        cost:["wood","clay","glass"],
    },
    "walls":{
        age:2,
        type:"military",
        strength:2,
        evos:["fortifications"],
        cost:["stone","stone","stone"],
    },
    "stables":{
        age:2,
        type:"military",
        strength:2,
        evos:[],
        cost:["clay","wood","ore"],
    },
    "training ground":{
        age:2,
        type:"military",
        strength:2,
        addW:35,
        evos:["circus"],
        cost:["wood","ore","ore"],
    },
    "archery range":{
        age:2,
        type:"military",
        strength:2,
        addW:25,
        evos:[],
        cost:["wood","wood","ore",],
    },
    "school":{
        age:2,
        type:"science",
        produces:"tablet",
        evos:["academy","study"],
        cost:["wood","papyrus"],
    },
    "library":{
        age:2,
        type:"science",
        produces:"tablet",
        evos:["senate","university"],
        cost:["stone","stone","textiles"],
    },
    "dispensary":{
        age:2,
        type:"science",
        produces:"compass",
        evos:["lodge","arena"],
        cost:["ore","ore","glass"],
    },
    "laboratory":{
        age:2,
        type:"science",
        produces:"cog",
        evos:["observatory","siege workshop"],
        cost:["clay","clay","papyrus"],
    },
    "caravansery":{
        age:2,
        type:"commercial",
        descript:"Produces:\nWood or Stone or Ore or Clay",
        descriptDown:45,
        addH:20,
        produces:["wood","stone","ore","clay"],
        symbols:["wood","stone","ore","clay"],
        cost:["wood","wood"],
        evos:["lighthouse"],
        botRecommend:function(p){
            var production = getProduction(p);
            var v = ["clay","stone","wood","ore"];
            var need = v.length;
            for(var q = 0; q < v.length; q++){
                for(var i = 0; i < production.length; i++){
                    
                    if(production[i].indexOf(v[q]) >= 0){
                        
                        need--;
                        i = production.length;
                    }
                }
            }
            return round(need*2);
        },
    },
    "forum":{
        age:2,
        type:"commercial",
        descript:"Produces:\nGlass or Textiles or Papyrus",
        descriptDown:45,
        addH:20,
        produces:["glass","textiles","papyrus"],
        symbols:["glass","textiles","papyrus"],
        cost:["clay","clay"],
        evos:["haven"],
        botRecommend:function(p){
            var production = getProduction(p);
            var v = ["glass","textiles","papyrus"];
            var need = v.length;
            for(var q = 0; q < v.length; q++){
                for(var i = 0; i < production.length; i++){
                    if(production[i].indexOf(v[q]) >= 0){
                        need--;
                        i = production.length;
                    }
                }
            }
            return round(need*2);
        },
    },
    "vineyard":{
        age:2,
        type:"commercial",
        descript:"When built, gain 1 gold for each basic resource structure (brown) built by you and the players to your left and right. Includes structures built at the same time.",
        descriptDown:65,
        addW:65,
        cost:[],
        botRecommend:function(p){
        var pIndex = players.indexOf(p);
        var rightIndex = pIndex-1;
        if(rightIndex<0){
            rightIndex = players.length-1;
        }
        var leftIndex = pIndex+1;
        if(leftIndex >= players.length){
            leftIndex = 0;
        }
        var num = round(p.structures.basic.length+players[rightIndex].structures.basic.length+players[leftIndex].structures.basic.length);
        
        if(p.gold <= 2/(5/num)){
            if(p.gold === 0){
                return 2;
            }
            return 1;
        }
        return 0;
        
        },
        effect:function(p){
        var pIndex = players.indexOf(p);
        if(pIndex >= 0){
        var rightIndex = pIndex-1;
        if(rightIndex<0){
            rightIndex = players.length-1;
        }
        var leftIndex = pIndex+1;
        if(leftIndex >= players.length){
            leftIndex = 0;
        }
        
        var num = round(p.structures.basic.length+players[rightIndex].structures.basic.length+players[leftIndex].structures.basic.length);
        
        p.gold += num;
        
        }
        },
        
        symbols:[["gold",1,0.7]],
        lIndicator:true,
        rIndicator:true,
        sIndicator:true,
        cardSymbol:"basic",
    },
    "bazar":{
        age:2,
        type:"commercial",
        descript:"When built, gain 2 gold for each rare resource structure (gray) built by you and the players to your left and right. Includes structures built at the same time.",
        descriptDown:65,
        addW:65,
        cost:[],
        botRecommend:function(p){
        var pIndex = players.indexOf(p);
        var rightIndex = pIndex-1;
        if(rightIndex<0){
            rightIndex = players.length-1;
        }
        var leftIndex = pIndex+1;
        if(leftIndex >= players.length){
            leftIndex = 0;
        }
        var num = round(p.structures.rare.length+players[rightIndex].structures.rare.length+players[leftIndex].structures.rare.length)*2;
        
        if(p.gold <= 2/(5/num)){
            if(p.gold === 0){
                return 2;
            }
            return 1;
        }
        return 0;
        
        },
        effect:function(p){
        var pIndex = players.indexOf(p);
        if(pIndex >= 0){
        var rightIndex = pIndex-1;
        if(rightIndex<0){
            rightIndex = players.length-1;
        }
        var leftIndex = pIndex+1;
        if(leftIndex >= players.length){
            leftIndex = 0;
        }
        
        var num = round(p.structures.rare.length+players[rightIndex].structures.rare.length+players[leftIndex].structures.rare.length);
        
        p.gold += num*2;
        }
        },
        
        symbols:[["gold",2,0.7]],
        lIndicator:true,
        rIndicator:true,
        sIndicator:true,
        cardSymbol:"rare",
    },
    "gardens":{
        age:3,
        type:"civil",
        points: 5,
        cost:["clay","clay","wood"],
    },
    "senate":{
        age:3,
        type:"civil",
        points: 6,
        cost:["wood","wood","stone","ore"],
    },
    "town hall":{
        age:3,
        type:"civil",
        points: 6,
        cost:["stone","stone","ore","glass"],
    },
    "pantheon":{
        age:3,
        type:"civil",
        points: 7,
        cost:["clay","clay","ore","glass","papyrus","textiles"],
    },
    "palace":{
        age:3,
        type:"civil",
        points: 8,
        cost:["stone","ore","wood","clay","glass","papyrus","textiles",],
    },
    "arsenal":{
        age:3,
        type:"military",
        strength:3,
        cost:["wood","wood","ore","textiles"],
    },
    "siege workshop":{
        age:3,
        type:"military",
        strength:3,
        addW:40,
        cost:["clay","clay","clay","wood"],
    },
    "fortifications":{
        age:3,
        type:"military",
        strength:3,
        addW:40,
        cost:["ore","ore","ore","stone"],
    },
    "circus":{
        age:3,
        type:"military",
        strength:3,
        cost:["stone","stone","stone","ore"],
    },
    "university":{
        age:3,
        type:"science",
        produces:"tablet",
        cost:["wood","wood","papyrus","glass"],
    },
    "observatory":{
        age:3,
        type:"science",
        produces:"cog",
        addW:5,
        cost:["ore","ore","glass","textiles"],
    },
    "study":{
        age:3,
        type:"science",
        produces:"cog",
        cost:["wood","papyrus","textiles"],
    },
    "lodge":{
        age:3,
        type:"science",
        produces:"compass",
        cost:["clay","clay","papyrus","textiles"],
    },
    "academy":{
        age:3,
        type:"science",
        produces:"compass",
        cost:["stone","stone","stone","glass"],
    },
    "haven":{
        age:3,
        type:"commercial",
        descript:"When built, gain 1 gold for each basic resource structure (brown) built by you.\nAlso worth 1 victory point for each basic resource structure.",
        descriptDown:60,
        addW:50,
        cost:["wood","ore","textiles"],
        botRecommend:function(p){
        var num = p.structures.basic.length;
        
        if(num >= 4){
            return num-3;
        }
        return 0;
        
        },
        effect:function(p){
        var num = p.structures.basic.length;
        p.gold += num;
        },
        points:function(p){
        var num = p.structures.basic.length;
        return num;
        },
        symbols:[["gold",1,0.7]],
        sIndicator:true,
        pointSymbol:1,
        cardSymbol:"basic",
    },
    "commerce chamber":{
        age:3,
        type:"commercial",
        descript:"When built, gain 2 gold for each rare resource structure (gray) built by you.\nAlso worth 2 victory point for each rare resource structure.",
        descriptDown:60,
        addW:50,
        cost:["clay","clay","papyrus"],
        botRecommend:function(p){
        var num = p.structures.rare.length*2;
        
        if(num >= 4){
            return num-3;
        }
        return 0;
        
        },
        effect:function(p){
        var num = p.structures.rare.length;
        p.gold += num*2;
        },
        points:function(p){
        var num = p.structures.rare.length;
        return num*2;
        },
        symbols:[["gold",2,0.7]],
        sIndicator:true,
        pointSymbol:2,
        cardSymbol:"rare",
    },
    "lighthouse":{
        age:3,
        type:"commercial",
        descript:"When built, gain 1 gold for each commerical structure (yellow) built by you (including this).\nAlso worth 1 victory point for each commercial structure.",
        descriptDown:60,
        addW:60,
        cost:["stone","glass"],
        effect:function(p){
        var num = p.structures.commercial.length;
        p.gold += num;
        },
        botRecommend:function(p){
        var num = p.structures.commercial.length;
        
        if(num >= 3){
            return num-2;
        }
        return 0;
        
        },
        points:function(p){
        var num = p.structures.commercial.length;
        return num;
        },
        symbols:[["gold",1,0.7]],
        sIndicator:true,
        pointSymbol:1,
        cardSymbol:"commercial",
    },
    "arena":{
        age:3,
        type:"commercial",
        descript:"When built, gain 3 gold for each stage of your wonder completed.\nAlso worth 1 victory point for each stage completed.",
        descriptDown:60,
        addW:40,
        cost:["stone","stone","ore"],
        effect:function(p){
        var num = p.wonderStage;
        p.gold += num*3;
        },
        botRecommend:function(p){
        var num = p.wonderStage;
        
        if(num === 3){
            return 1;
        }
        return 0;
        
        },
        points:function(p){
        var num = p.wonderStage;
        return num;
        },
        symbols:[["gold",3,0.7]],
        sIndicator:true,
        pointSymbol:1,
        wonderSymbol:true,
    },
    "magistrates guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each civil structure (blue) built by the players to your left and right",
        descriptDown:40,
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.civil.length + players[neighbors[1]].structures.civil.length;
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.civil.length + players[neighbors[1]].structures.civil.length;
        
         return num-5;
        },
        addW:65,
        cost:["wood","wood","wood","stone","textiles"],
        cardSymbol:"civil",
        lIndicator:true,
        rIndicator:true,
        pointSymbol:1,
    },
    "philosophers guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each scientific structure (green) built by the players to your left and right",
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.science.length + players[neighbors[1]].structures.science.length;
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.science.length + players[neighbors[1]].structures.science.length;
        
         return num-5;
        },
        descriptDown:60,
        addW:70,
        cost:["clay","clay","clay","papyrus","textiles",],
        cardSymbol:"science",
        lIndicator:true,
        rIndicator:true,
        pointSymbol:1,
    },
    "spies guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each military structure (red) built by the players to your left and right",
        descriptDown:40,
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.military.length + players[neighbors[1]].structures.military.length;
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.military.length + players[neighbors[1]].structures.military.length;
        
         return num-5;
        },
        addW:65,
        cost:["clay","clay","clay","glass",],
        cardSymbol:"military",
        lIndicator:true,
        rIndicator:true,
        pointSymbol:1,
    },
    "workers guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each basic resource structure (brown) built by the players to your left and right",
        descriptDown:60,
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.basic.length + players[neighbors[1]].structures.basic.length;
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.basic.length + players[neighbors[1]].structures.basic.length;
        
         return num-5;
        },
        addW:65,
        cost:["ore","ore","clay","stone","wood"],
        cardSymbol:"basic",
        lIndicator:true,
        rIndicator:true,
        pointSymbol:1,
    },
    "craftsmens guild":{
        age:3,
        type:"guild",
        descript:"Worth 2 victory points for each rare resource structure (gray) built by the players to your left and right",
        descriptDown:60,
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.rare.length + players[neighbors[1]].structures.rare.length;
        return num*2;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.rare.length + players[neighbors[1]].structures.rare.length;
        
         return (num*2)-5;
        },
        addW:65,
        cost:["ore","ore","stone","stone",],
        cardSymbol:"rare",
        lIndicator:true,
        rIndicator:true,
        pointSymbol:2,
    },
    "traders guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each commercial structure (yellow) built by the players to your left and right",
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.commercial.length + players[neighbors[1]].structures.commercial.length;
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].structures.commercial.length + players[neighbors[1]].structures.commercial.length;
        
         return num-5;
        },
        descriptDown:60,
        addW:65,
        cost:["glass","textiles","papyrus",],
        cardSymbol:"commercial",
        lIndicator:true,
        rIndicator:true,
        pointSymbol:1,
    },
    "shipowners guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each of your basic resource (brown), rare resource (gray), and guild (purple) structures",
        pointValue:function(p){
        var num = p.structures.basic.length+p.structures.rare.length+p.structures.guild.length;
        return num;
        },
        botRecommend:function(p){
        var num = p.structures.basic.length+p.structures.rare.length+p.structures.guild.length;
        
         return num-5;
        },
        descriptDown:60,
        addW:65,
        cost:["wood","wood","wood","glass","papyrus"],
        sIndicator:true,
        shipowners:true,
        pointSymbol:1,
    },
    "builders guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each stage of a wonder completed by you and the players to your left and right",
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].wonderStage + players[neighbors[1]].wonderStage + p.wonderStage;
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].wonderStage + players[neighbors[1]].wonderStage + p.wonderStage;
        
        return num-5;
        },
        descriptDown:60,
        addW:65,
        cost:["stone","stone","clay","clay","glass"],
        wonderSymbol:true,
        pointSymbol:1,
        lIndicator:true,
        rIndicator:true,
        sIndicator:true,
    },
    "strategists guild":{
        age:3,
        type:"guild",
        descript:"Worth 1 victory point for each defeat point of the players to your left and right",
        descriptDown:40,
        addW:65,
        pointValue:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].record[0] + players[neighbors[1]].record[0];
        return num;
        },
        botRecommend:function(p){
        var neighbors = getLeftRight(p);
        var num = players[neighbors[0]].record[0] + players[neighbors[1]].record[0];
        
        return num-4;
        },
        skullSymbol:true,
        lIndicator:true,
        rIndicator:true,
        pointSymbol:1,
        cost:["ore","ore","stone","textiles"],
    },
    "scientists guild":{
        age:3,
        type:"guild",
        descript:"Science:\nCompass or Tablet or Cog",
        descriptDown:40,
        addW:60,
        cost:["wood","wood","ore","ore","papyrus"],
        bonusScience: true,
        symbols:["compass","tablet","cog"],
        botRecommend:function(p){
        var science = getScience(p);
        var most = 0;
        var total = 0;
        for(var i in science){
            total+=science[i];
            if(science[i] > most){
                most = science[i];
            }
        }
        if(most >= 1){
        return pow((most-1),2);
        }
        return -2;
        }
    },
};

var wonders = {
    "the colossus of rhodes":{
        id:"the colossus of rhodes",
        bg: color(90, 134, 161),
        starter:["ore"],
        stages:[
        {
        cost:["wood","wood"],
        points:3,
        },
        {
        cost:["clay","clay","clay"],
        strength:2,
        },
        {
        cost:["ore","ore","ore","ore"],
        points:7,
        },
        ],
    },
    "the lighthouse of alexandria":{
        id:"the lighthouse of alexandria",
        bg: color(-11108232),
        addArt:function(alph){
            noStroke();
            fill(-15457250);
            rect(0,530,600,70,alph);
        },
        starter:["glass"],
        stages:[
        {
        cost:["stone","stone"],
        points:3,
        },
        {
        cost:["ore","ore",],
        produces:["clay","ore","wood","stone"],
        },
        {
        cost:["glass","glass"],
        points:7,
        },
        ],
    },
    "the temple of artemis in ephesus":{
        id:"the temple of artemis in ephesus",
        bg:color(167, 196, 194),
        addArt:function(alph){
            noStroke();
            fill(-8096433);
            rect(0,440,600,160,alph);
        },
        starter:["papyrus"],
        stages:[
        {
        cost:["stone","stone"],
        points:3,
        },
        {
        cost:["wood","wood",],
        descript:'Gain 9 gold when this stage is built',
        effect:function(p){
        p.gold += 9;
        },
        symbols:[["gold",9,1.8]],
        },
        {
        cost:["papyrus","papyrus",],
        points:7,
        },
        ],
    },
    "the pyramids of giza":{
        id:"the pyramids of giza",
        bg:color(181, 191, 191),
        addArt:function(alph){
            noStroke();
            fill(-9814501);
            rect(0,560,600,40,alph);
        },
        starter:["stone"],
        stages:[
        {
        cost:["stone","stone"],
        points:3,
        },
        {
        cost:["wood","wood","wood"],
        points:5,
        },
        {
        cost:["stone","stone","stone","stone"],
        points:7,
        },
        ],
    },
    "the statue of zeus in olympia":{
        id:"the statue of zeus in olympia",
        bg:color(224, 215, 191),
        tag:"zeus",
        starter:["wood"],
        stages:[
        {
        cost:["wood","wood"],
        points:3,
        },
        {
        cost:["stone","stone",],
        descript:"Once per age, you may build a structure for free. Click on the wonder stage to activate.",
        descriptDown:45,
        clickable:function(p){
        if(p.zeusFreeBuild){
            return false;
        } 
        return true;  
        },
        onClick:function(p){
            if(!p.zeusFreeBuild){
                p.zeusFreeBuild = true;
                p.freeBuild = true;
            }
        },
        ageStart:function(p){
            p.zeusFreeBuild = false;
        },
        customStuff:function(p){
            strokeWeight(2);
            stroke(0,0,0);
            fill(235, 235, 235);
            rect(-18,-25,36,51,4);
            stroke(214, 0, 0);
            line(-18,-23,18,-13);
            line(-18,-13,18,-23);
            if(p.wonderStage >= 2){
            fill(156, 156, 156);
            noStroke();
            rect(-30,-1,60,15,4);
            textSize(10);
            textAlign(CENTER,BASELINE);
            if(p.freeBuild){
                
                fill(4, 0, 235);
                textCompatible('ACTIVE',0,10);
            }else{
                if(!p.zeusFreeBuild){
                fill(0, 235, 90);
                textCompatible('AVAILABLE',0,10);
                }else{
                fill(235, 0, 55);
                textCompatible('USED',0,10);
                }
            }
            }
        },
        },
        {
        cost:["ore","ore"],
        points:7,
        },
        ],
    },
    "the mausoleum of halicarnassus":{
        id:"the mausoleum of halicarnassus",
        bg:color(-15118239),
        addArt:function(alph){
            noStroke();
            fill(-9797751);
            rect(0,510,600,90,alph);
        },
        starter:["textiles"],
        stages:[
        {
        cost:["clay","clay"],
        points:3,
        },
        {
        cost:["ore","ore","ore"],
        descript:"When this stage is built, look through all of the cards discarded since the beginning of the game, pick one, and build it for free",
        descriptDown:65,
        customStuff:function(p){
            strokeWeight(2);
            stroke(0,0,0);
            fill(235, 235, 235);
            pushMatrix();
            rotate(-15);
            rect(-18,-25,24,34,4);
            popMatrix();
            pushMatrix();
            translate(6,10);
            rotate(35);
            rect(-18,-25,24,34,4);
            popMatrix();
            pushMatrix();
            translate(2,20);
            rotate(-45);
            rect(-18,-25,24,34,4);
            noFill();
            stroke(13, 220, 227);
            strokeWeight(5);
            ellipse(-5,-7,10,10);
            popMatrix();
            strokeWeight(2);
            stroke(214, 0, 0);
            line(-10,-10,10,10);
            line(-10,10,10,-10);
            
        },
        botScoreMod:function(p){

            if(discardedCards.length < 2){
                return -1000;
            }
            if(discardedCards.length === 2){
                return -1;
            }
            if(discardedCards.length > 3){
                return 1;
            }
            return 0;
        },
        effect:function(p){
            if(discardedCards.length > 0){
                if(players.indexOf(p) === 0){
                    scene = 'mausoleumEffect';
                }else{
                var available = getProduction(p);
                var allThings = [];
                for(var i = 0; i < available.length; i++){
                for(var q = 0; q < available[i].length; q++){
                allThings.push(available[i][q]);
                }
                }
            var options = [];
            var bestScore = -Infinity;
            
            for(var q = 0; q < discardedCards.length;q++){
                var card = discardedCards[q];
                var score = p.scoreCard(card,available,allThings);
                if(score > bestScore){
                    bestScore = score;
                    options = [];
                }
                if(score >= bestScore){
                    options.push([card,q]);
                }
            }
            if(options.length > 0){
            var a = floor(random(0,options.length));
            options[a][0].build(p);
            if(options[a][0].data.effect){
    awaitingEffects.push([options[a][0].data,p,options[a][0]]);
            }
            discardedCards.splice(options[a][1],1);
            
            }
            
            
                }
            }
        },
        },
        {
        cost:["textiles","textiles"],
        points:7,
        },
        ],
    },
    "the hanging gardens of babylon":{
        id:"the hanging gardens of babylon",
        bg:color(96, 157, 189),
        addArt:function(alph){
            noStroke();
            fill(47, 54, 40);
            rect(0,375,600,225,alph);
        },
        starter:["clay"],
        stages:[
        {
        cost:["clay","clay"],
        points:3,
        },
        {
        cost:["wood","wood","wood"],
        descript:"Science:\nCompass or Tablet or Cog",
        bonusScience: true,
        symbols:["compass","tablet","cog"],
        },
        {
        cost:["clay","clay","clay","clay"],
        points:7,
        },
        ],
    },
};

for(var i in wonders){
    wonders[i].capitalizedId = capitalize(i);
}

// make sure i didnt misspell evos
// for(var i in types){
//     if(types[i].evos){
//         for(var q = 0; q < types[i].evos.length; q++){
//             if(!types[types[i].evos[q]]){
//                 println(i);
//             }
//         }
//     }
// }

var allTypes = [];
for(var i in types){
    allTypes.push(i);
}
var allWonders = [];
for(var i in wonders){
    allWonders.push(i);
    wonderImgs[i] = get();
}

var symbolStrokeWeight = 30;
var imageLoads = [
    ["wood",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(80,105,40);
ellipse(0,0,400,400);
scale(0.87);
translate(-52,0);
pushMatrix();
translate(-40,55);
strokeWeight(10);
stroke(115, 74, 11);
fill(115, 74, 11);
beginShape();
vertex(-100,-50);
vertex(-90,49);
vertex(100,-4);
vertex(95,-75);
endShape(CLOSE);
ellipse(100,-40,70,70);
fill(209, 183, 117);
ellipse(-100,0,100,100);
noStroke();
fill(166, 138, 81);
ellipse(-100,0,55,55);
popMatrix();
pushMatrix();
translate(28,-14);
strokeWeight(10);
stroke(115, 74, 11);
fill(115, 74, 11);
beginShape();
vertex(-100,-50);
vertex(-90,49);
vertex(100,-4);
vertex(95,-75);
endShape(CLOSE);
ellipse(100,-40,70,70);
fill(209, 183, 117);
ellipse(-100,0,100,100);
noStroke();
fill(166, 138, 81);
ellipse(-100,0,55,55);
popMatrix();
pushMatrix();
translate(92,-79);
strokeWeight(10);
stroke(115, 74, 11);
fill(115, 74, 11);
beginShape();
vertex(-100,-50);
vertex(-90,49);
vertex(100,26);
vertex(95,-45);
endShape(CLOSE);
ellipse(100,-10,70,70);
fill(209, 183, 117);
ellipse(-100,0,100,100);
noStroke();
fill(166, 138, 81);
ellipse(-100,0,55,55);
popMatrix();
pushMatrix();
translate(60,75);
strokeWeight(10);
stroke(105, 70, 18);
fill(105, 70, 18);
beginShape();
vertex(-100,-50);
vertex(-90,49);
vertex(100,-4);
vertex(95,-75);
endShape(CLOSE);
ellipse(100,-40,70,70);
fill(209, 183, 117);
ellipse(-100,0,100,100);
noStroke();
fill(166, 138, 81);
ellipse(-100,0,55,55);
popMatrix();
pushMatrix();
translate(133,2);
strokeWeight(10);
stroke(105, 70, 18);
fill(105, 70, 18);
beginShape();
vertex(-100,-50);
vertex(-90,49);
vertex(100,16);
vertex(95,-55);
endShape(CLOSE);
ellipse(100,-20,70,70);
fill(209, 183, 117);
ellipse(-100,0,100,100);
noStroke();
fill(166, 138, 81);
ellipse(-100,0,55,55);
popMatrix();
pushMatrix();
translate(160,95);
strokeWeight(10);
stroke(99, 64, 15);
fill(99, 64, 15);
beginShape();
vertex(-100,-50);
vertex(-90,49);
vertex(100,-4);
vertex(95,-75);
endShape(CLOSE);
ellipse(100,-40,70,70);
fill(209, 183, 117);
ellipse(-100,0,100,100);
noStroke();
fill(166, 138, 81);
ellipse(-100,0,55,55);
popMatrix();

popMatrix();
    }],
    ["stone",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(150,141,134);
ellipse(0,0,400,400);

scale(1.4);
strokeWeight(5);
stroke(97, 97, 97);
fill(196, 196, 196);
beginShape();
vertex(-150,-50);
vertex(0,-10);
vertex(140,-60);
vertex(40,-80);
endShape(CLOSE);
fill(153, 153, 153);
beginShape();
vertex(-150,-50);
vertex(0,-10);
vertex(0,110);
vertex(-150,56);
endShape(CLOSE);
fill(110, 110, 110);
beginShape();
vertex(144,-60);
vertex(0,-10);
vertex(0,110);
vertex(140,18);
endShape(CLOSE);

popMatrix();
    }],
    ["clay",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(208,85,44);
ellipse(0,0,400,400);

rotate(2);
translate(0,-15);
scale(1.5);

pushMatrix();
translate(59,-37);
scale(0.5);
strokeWeight(5);
stroke(145, 71, 32);
fill(224, 137, 90);
beginShape();
vertex(-150,-15);
vertex(0,30);
vertex(140,-45);
vertex(10,-68);
endShape(CLOSE);
fill(189, 96, 45);
beginShape();
vertex(-150,-15);
vertex(0,30);
vertex(0,110);
vertex(-150,56);
endShape(CLOSE);
fill(158, 74, 29);
beginShape();
vertex(142,-45);
vertex(0,30);
vertex(0,110);
vertex(140,18);
endShape(CLOSE);
popMatrix();

pushMatrix();
translate(-62,-8);
scale(0.55);
strokeWeight(5);
stroke(145, 71, 32);
fill(224, 137, 90);
beginShape();
vertex(-150,-15);
vertex(0,30);
vertex(120,-30);
vertex(-10,-68);
endShape(CLOSE);
fill(189, 96, 45);
beginShape();
vertex(-150,-15);
vertex(0,30);
vertex(0,110);
vertex(-150,56);
endShape(CLOSE);
fill(158, 74, 29);
beginShape();
vertex(121,-30);
vertex(0,30);
vertex(0,110);
vertex(120,18);
endShape(CLOSE);
popMatrix();

pushMatrix();
translate(15,34);
scale(0.6);
strokeWeight(5);
stroke(145, 71, 32);
fill(224, 137, 90);
beginShape();
vertex(-150,-15);
vertex(0,30);
vertex(140,-45);
vertex(10,-68);
endShape(CLOSE);
fill(189, 96, 45);
beginShape();
vertex(-150,-15);
vertex(0,30);
vertex(0,110);
vertex(-150,56);
endShape(CLOSE);
fill(158, 74, 29);
beginShape();
vertex(142,-45);
vertex(0,30);
vertex(0,110);
vertex(140,18);
endShape(CLOSE);
popMatrix();

popMatrix();
    }],
    ["ore",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(68,55,46);
ellipse(0,0,400,400);

translate(-178,101);
scale(2.86);

noStroke();
fill(59, 58, 56);
beginShape();
vertex(34,-3);
vertex(35,-68);
vertex(42,-71);
vertex(68,-93);
vertex(71,-88);
vertex(87,-103);
vertex(122,-48);
vertex(133,-14);
endShape(CLOSE);
fill(105, 89, 57);
beginShape();
vertex(34,-3);
vertex(35,-68);
vertex(42,-71);
vertex(68,-93);
vertex(71,-88);
vertex(87,-103);
vertex(105,-73);
vertex(110,-48);
vertex(90,-17);
endShape(CLOSE);
fill(138, 118, 29);
beginShape();
vertex(34,-3);
vertex(35,-68);
vertex(42,-71);
vertex(68,-93);
vertex(71,-88);
vertex(87,-103);
vertex(105,-73);
vertex(98,-48);
vertex(66,-57);
endShape(CLOSE);
fill(196, 177, 67);
beginShape();
vertex(34,-3);
vertex(35,-68);
vertex(42,-71);
vertex(68,-93);
vertex(71,-88);
vertex(87,-103);
vertex(99,-84);
vertex(91,-60);
vertex(66,-71);
endShape(CLOSE);
noFill();
stroke(31, 31, 31);
strokeWeight(3);
beginShape();
vertex(34,-3);
vertex(35,-68);
vertex(42,-71);
vertex(68,-93);
vertex(71,-88);
vertex(87,-103);
vertex(122,-48);
vertex(133,-14);
endShape(CLOSE);


noStroke();
fill(59, 58, 56);
beginShape();
vertex(-2,0);
vertex(5,-25);
vertex(10,-30);
vertex(18,-45);
vertex(35,-52);
vertex(53,-49);
vertex(63,-40);
vertex(57,-37);
vertex(74,-20);
vertex(82,0);
vertex(38,6);
endShape(CLOSE);
fill(99, 88, 67);
beginShape();
vertex(-2,0);
vertex(5,-25);
vertex(10,-30);
vertex(18,-45);
vertex(35,-52);
vertex(53,-49);
vertex(63,-40);
vertex(49,-41);
vertex(38,6);
endShape(CLOSE);
fill(173, 159, 133);
beginShape();
vertex(3,-17);
vertex(5,-25);
vertex(10,-30);
vertex(18,-45);
vertex(35,-52);
vertex(53,-49);
vertex(57,-44);
vertex(41,-44);
vertex(31,-12);
endShape(CLOSE);
noFill();
stroke(31, 31, 31);
strokeWeight(3);
beginShape();
vertex(-2,0);
vertex(5,-25);
vertex(10,-30);
vertex(18,-45);
vertex(35,-52);
vertex(53,-49);
vertex(63,-40);
vertex(57,-37);
vertex(74,-20);
vertex(82,0);
vertex(38,6);
endShape(CLOSE);

stroke(84, 84, 84);
strokeWeight(2);
fill(173, 167, 144);
beginShape();
vertex(61,-1);
vertex(55,15);
vertex(67,16);
vertex(69,6);
endShape(CLOSE);
fill(150, 141, 112);
beginShape();
vertex(92,-16);
vertex(89,0);
vertex(102,0);
vertex(98,-20);
endShape(CLOSE);
fill(145, 140, 122);
beginShape();
vertex(118,-32);
vertex(115,-5);
vertex(124,-4);
vertex(132,-10);
vertex(135,-30);
vertex(125,-38);
endShape(CLOSE);

pushMatrix();
translate(44,-49);
rotate(11);
noStroke();
fill(254, 255, 196);
ellipse(0,0,1,40);
ellipse(0,0,60,1);
pushMatrix();
rotate(61);
ellipse(0,0,1,30);
ellipse(0,0,20,1);
popMatrix();
popMatrix();



popMatrix();
    }],
    ["glass",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(153,201,226);
beginShape();
vertex(-100,-200);
vertex(100,-200);
vertex(200,-100);
vertex(200,100);
vertex(100,200);
vertex(-100,200);
vertex(-200,100);
vertex(-200,-100);
endShape(CLOSE);

translate(0,20);
//1.65
scale(1.6);

noStroke();
fill(34,90,112);
beginShape();
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
curveVertex(77,-94);
curveVertex(50,-80); 
curveVertex(53,-15); 
curveVertex(85,43); 
curveVertex(57,100); 
curveVertex(-57,100); 
curveVertex(-85,43); 
curveVertex(-53,-15); 
curveVertex(-50,-80);
curveVertex(-77,-94);
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
endShape();
noStroke();
fill(68,136,165);
pushMatrix();
scale(0.8,0.98);
beginShape();
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
curveVertex(77,-94);
curveVertex(50,-80); 
curveVertex(53,-15); 
curveVertex(85,43); 
curveVertex(57,100); 
curveVertex(-57,100); 
curveVertex(-85,43); 
curveVertex(-53,-15); 
curveVertex(-50,-80);
curveVertex(-77,-94);
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
endShape();
popMatrix();
fill(43, 159, 201);
pushMatrix();
translate(3,-21);
scale(0.5,1);
beginShape();

curveVertex(77,-94);
curveVertex(50,-80); 
curveVertex(53,-15); 
curveVertex(85,43); 
curveVertex(57,100); 
curveVertex(-57,100); 
curveVertex(-85,43); 
curveVertex(-53,-15); 
curveVertex(-50,-80);
curveVertex(-77,-94);
endShape();
popMatrix();

fill(192, 201, 204);
pushMatrix();
translate(-8,-17);
scale(0.4,0.8);
beginShape();
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
curveVertex(77,-94);
curveVertex(50,-80); 
curveVertex(53,-15); 
curveVertex(85,43); 
curveVertex(57,100); 
curveVertex(-57,100); 
curveVertex(-85,43); 
curveVertex(-53,-15); 
curveVertex(-50,-80);
curveVertex(-77,-94);
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
endShape();
popMatrix();
fill(218, 220, 222);
pushMatrix();
translate(-2,-23);
scale(0.2,0.7);
beginShape();
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
curveVertex(77,-94);
curveVertex(50,-80); 
curveVertex(53,-15); 
curveVertex(85,43); 
curveVertex(57,100); 
curveVertex(-57,100); 
curveVertex(-85,43); 
curveVertex(-53,-15); 
curveVertex(-50,-80);
curveVertex(-77,-94);
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
endShape();
popMatrix();
fill(34,90,112);
ellipse(0,-102,144,41);
strokeWeight(5);
stroke(192, 201, 204);
fill(68,136,165);
ellipse(0,-105,140,20);

noFill();
strokeWeight(5);
stroke(36, 56, 92);
beginShape();
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
curveVertex(77,-94);
curveVertex(50,-80); 
curveVertex(53,-15); 
curveVertex(85,43); 
curveVertex(57,100); 
curveVertex(-57,100); 
curveVertex(-85,43); 
curveVertex(-53,-15); 
curveVertex(-50,-80);
curveVertex(-77,-94);
curveVertex(-72,-116);
curveVertex(0,-124);
curveVertex(72,-116);
endShape();

popMatrix();
    }],
    ["papyrus",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(207,158,93);
beginShape();
vertex(-100,-200);
vertex(100,-200);
vertex(200,-100);
vertex(200,100);
vertex(100,200);
vertex(-100,200);
vertex(-200,100);
vertex(-200,-100);
endShape(CLOSE);

translate(-67,-10);
scale(1.65);

stroke(107, 84, 65);
strokeWeight(7);
noFill();
beginShape();
vertex(-60,59);
vertex(-19,-6);
vertex(-13,-54);
vertex(-6,-60);
vertex(-17,-66);
vertex(-4,-66);
vertex(-15,-73);
vertex(-3,-71);
vertex(-12,-79);
vertex(14,-74);
vertex(14,-86);
vertex(54,-76);
vertex(103,-75);
vertex(114,-68);
vertex(124,-89);
vertex(125,-75);
vertex(131,-84);
vertex(129,-68);
vertex(137,-75);
vertex(134,-57);
vertex(151,-59);
vertex(136,-49);
vertex(146,-49);
vertex(134,-44);
vertex(145,-42);
vertex(131,-38);
vertex(122,2);
vertex(116,5);
vertex(119,8);
vertex(103,11);
vertex(115,15);
vertex(95,62);
vertex(80,64);
vertex(89,70);
vertex(71,70);
vertex(83,77);
vertex(66,99);
endShape(CLOSE);
beginShape();
vertex(-44,41);
vertex(-60,35);
vertex(-67,43);
vertex(-76,49);
vertex(-82,62);
vertex(-75,80);
vertex(-60,86);
vertex(-6,91);
vertex(14,105);
vertex(25,113);
vertex(43,117);
vertex(59,113);
vertex(69,92);
vertex(63,79);
vertex(58,70);
endShape(CLOSE);



noStroke();
fill(249,195,150);
beginShape();
vertex(-60,59);
vertex(-19,-6);
vertex(-13,-54);
vertex(-6,-60);
vertex(-17,-66);
vertex(-4,-66);
vertex(-15,-73);
vertex(-3,-71);
vertex(-12,-79);
vertex(14,-74);
vertex(14,-86);
vertex(54,-76);
vertex(103,-75);
vertex(114,-68);
vertex(124,-89);
vertex(125,-75);
vertex(131,-84);
vertex(129,-68);
vertex(137,-75);
vertex(134,-57);
vertex(151,-59);
vertex(136,-49);
vertex(146,-49);
vertex(134,-44);
vertex(145,-42);
vertex(131,-38);
vertex(122,2);
vertex(116,5);
vertex(119,8);
vertex(103,11);
vertex(115,15);
vertex(95,62);
vertex(80,64);
vertex(89,70);
vertex(71,70);
vertex(83,77);
vertex(66,99);
endShape(CLOSE);

fill(233,187,132);
beginShape();
vertex(-44,41);
vertex(-60,35);
vertex(-67,43);
vertex(-76,49);
vertex(-82,62);
vertex(-75,80);
vertex(-60,86);
vertex(-6,91);
vertex(14,105);
vertex(25,113);
vertex(43,117);
vertex(59,113);
vertex(69,92);
vertex(63,79);
vertex(58,70);
endShape(CLOSE);

fill(240,202,140);
beginShape();
vertex(-62,38);
vertex(-76,49);
vertex(-82,62);
vertex(35,96);
vertex(43,74);
endShape(CLOSE);

fill(255,228,160);
beginShape();
vertex(-67,43);
vertex(-76,49);
vertex(39,88);
vertex(39,79);
endShape(CLOSE);



fill(249,195,150);
beginShape();
vertex(50,83);
vertex(49,93);
vertex(59,91);
vertex(61,82);
vertex(56,74);
vertex(44,73);
vertex(34,84);
vertex(31,97);
vertex(40,112);
vertex(59,113);
vertex(59,113);
vertex(69,92);
vertex(67,83);
vertex(61,96);
vertex(43,99);
vertex(45,84);
endShape(CLOSE);

noStroke();
fill(152,81,53);

pushMatrix();
translate(-4,0);
rotate(10);
beginShape();
vertex(-5,4);
vertex(-12,5);
vertex(-4,10);
vertex(3,1);
vertex(15,1);
vertex(18,6);
vertex(33,6);
vertex(40,-8);
vertex(50,-8);
vertex(35,-14);
vertex(27,-1);
vertex(19,-6);
vertex(23,-16);
vertex(17,-26);
vertex(9,-18);
vertex(7,-10);
vertex(-5,-6);
endShape(CLOSE);
beginShape();
vertex(5,7);
vertex(19,7);
vertex(18,19);
vertex(20,45);
vertex(14,45);
vertex(11,37);
vertex(11,20);
vertex(7,17);
vertex(1,34);
vertex(-4,34);
vertex(0,13);
endShape(CLOSE);
popMatrix();

pushMatrix();
translate(-16,-34);
rotate(20);
beginShape();
vertex(97,-47);
vertex(105,-41);
vertex(100,-53);
vertex(84,-52);
vertex(82,-42);
vertex(88,-30);
vertex(86,-21);
vertex(76,-10);
vertex(68,-14);
vertex(63,-45);
vertex(57,-53);
vertex(44,-51);
vertex(33,-38);
vertex(41,-28);
vertex(42,-35);
vertex(49,-41);
vertex(54,-41);
vertex(61,-12);
vertex(73,-5);
vertex(82,-5);
vertex(96,-24);
vertex(90,-44);
endShape(CLOSE);
popMatrix();

pushMatrix();
translate(-17,-6);
rotate(9);
beginShape();
vertex(60,50);
vertex(70,48);
vertex(82,33);
vertex(81,14);
vertex(86,2);
vertex(91,-3);
vertex(82,-3);
vertex(72,12);
vertex(73,28);
vertex(68,43);
vertex(55,44);
endShape(CLOSE);
translate(23,5);
beginShape();
vertex(60,50);
vertex(70,48);
vertex(82,33);
vertex(81,14);
vertex(86,2);
vertex(91,-3);
vertex(82,-3);
vertex(72,12);
vertex(73,28);
vertex(68,43);
vertex(55,44);
endShape(CLOSE);
popMatrix();

popMatrix();
    }],
    ["textiles",
    function(){
    pushMatrix();
stroke(0, 0, 0);
strokeWeight(symbolStrokeWeight);
fill(149,58,100);
beginShape();
vertex(-100,-200);
vertex(100,-200);
vertex(200,-100);
vertex(200,100);
vertex(100,200);
vertex(-100,200);
vertex(-200,100);
vertex(-200,-100);
endShape(CLOSE);

translate(-10,28);
scale(1.68);

noFill();
stroke(87, 0, 87);
strokeWeight(10);
beginShape();
vertex(-10,-40);
vertex(-120,0);
vertex(-15,42);
vertex(90,4);
endShape(CLOSE);
ellipse(100,-25,30,50);
ellipse(-8,-58,24,40);
beginShape();
vertex(-10,-39);
vertex(-6,-77);
vertex(100,-50);
vertex(100,-3);
endShape(CLOSE);

noStroke();
fill(225,179,194);

beginShape();
vertex(-10,-40);
vertex(-120,0);
vertex(-10,40);
vertex(101,0);
endShape(CLOSE);
ellipse(100,-25,30,50);
ellipse(-8,-58,24,40);
beginShape();
vertex(-10,-39);
vertex(-8,-78);
vertex(100,-50);
vertex(100,0);
endShape(CLOSE);

fill(166,58,104);
beginShape();
vertex(4,-34);
vertex(24,-28);
vertex(-80,14);
vertex(-100,6);
endShape(CLOSE);
pushMatrix();
translate(53,19);
beginShape();
vertex(4,-34);
vertex(28,-28);
vertex(-80,14);
vertex(-103,7);
endShape(CLOSE);
popMatrix();
beginShape();
vertex(63,-53);
vertex(71,-57);
vertex(88,-53);
vertex(88,-38);
endShape(CLOSE);
beginShape();
vertex(20,-71);
vertex(34,-67);
vertex(16,-49);
endShape(CLOSE);
ellipse(71,-31,34,50);
ellipse(16,-49,31,45);
fill(225,179,194);
ellipse(87,-27,34,50);
ellipse(34,-46,34,41);

fill(164,120,135);
ellipse(100,-25,24,40);

fill(224,197,96);
beginShape();
vertex(-120,0);
vertex(-15,42);
vertex(10,34);
vertex(-100,-8);
endShape(CLOSE);



popMatrix();

    }],
    ["tablet",
    function(){
    pushMatrix();

scale(1.35);
translate(15,30);

noStroke();
pushMatrix();
fill(74,52,46);
translate(-22,19);
beginShape();
vertex(-39,91);
vertex(-13,111);
vertex(33,114);
vertex(83,94);
vertex(110,72);
vertex(118,55);
vertex(-33,-193);
vertex(-77,-185);
vertex(-108,-168);
vertex(-125,-136);
vertex(-102,-61);
vertex(-90,-42);
vertex(-79,-6);
vertex(-61,25);
endShape(CLOSE);
popMatrix();
fill(202,141,125);
beginShape();
vertex(-41,91);
vertex(-15,111);
vertex(22,114);
vertex(97,74);
vertex(106,27);
vertex(95,11);
vertex(95,-9);
vertex(85,-19);
vertex(56,-93);
vertex(42,-112);
vertex(35,-136);
vertex(19,-176);
vertex(-1,-192);
vertex(-33,-193);
vertex(-103,-165);
vertex(-125,-136);
vertex(-103,-61);
vertex(-85,-42);
vertex(-81,-6);
vertex(-58,25);
endShape(CLOSE);

strokeWeight(8);
stroke(48,37,32);
line(-84,-135,-64,-79);
line(-60,-147,-40,-90);
line(-42,-59,-24,-8);
line(-16,-71,2,-18);
line(11,-84,30,-32);
line(-37,-10,27,-82);
line(45,0,63,46);

noFill();
triangle(-19,-156,-19,-108,6,-117);
ellipse(5,45,50,50);

popMatrix();
    }],
    ["cog",
    function(){
    pushMatrix();
translate(-12,-6);
scale(1.3);
rotate(38);

noStroke();
fill(76,56,52);
rect(0,-132,40,89);
rect(0,47,40,89);
rect(38,-40,89,54);
rect(-130,-32,89,46);

noFill();
strokeWeight(35);
stroke(76,56,52);
ellipse(18,0,70,84);
stroke(162,84,60);
ellipse(0,0,70,84);

noFill();
strokeWeight(45);
stroke(127,75,56);
ellipse(26,0,250,300);

noStroke();
fill(76,56,52);
beginShape();
vertex(-109,-20);
vertex(-65,-19);
vertex(-73,-32);
endShape(CLOSE);

noStroke();
fill(162,84,60);
rect(38,-27,89,54);
rect(-130,-22,89,44);
rect(-20,-132,40,89);
rect(-20,47,40,89);


noFill();
strokeWeight(45);
stroke(205,127,85);
ellipse(0,0,250,300);

for(var i = 0; i < 15; i++){
pushMatrix();
var a = i*360/15+0;
translate(-26+cos(a)*125,sin(a)*150);
noStroke();
fill(242,207,159);
arc(0,0,30,20,-10,190);
arc(25,0,10,20,-10,190);
rect(0,0,25,10);
fill(105, 61, 48);
arc(0,0,30,30,180,360);
arc(25,0,10,30,180,360);
rect(0,-15,25,15);
popMatrix();
}


popMatrix();
    }],
    ["compass",
    function(){
    pushMatrix();

translate(-12,-12);
rotate(4);
scale(1.58);

pushMatrix();
translate(-110,-37);
rotate(40);
noStroke();
fill(234,180,103);
rect(0,0,168,34);
fill(251,225,175);
rect(0,0,168,10);

stroke(43,37,34);
strokeWeight(4);
for(var i = 1; i < 9; i++){
line(0+i*16.8,32,0+i*16.8,24);
}
noFill();
rect(0,0,168,34);
popMatrix();

noFill();
stroke(117, 104, 60);
strokeWeight(8);
pushMatrix();
translate(5,0);
pushMatrix();
beginShape();
vertex(-30,-99);
vertex(-107,103);
vertex(-90,93);
vertex(-37,-39);
vertex(-15,-62);
vertex(-2,-96);
endShape(CLOSE);
popMatrix();
pushMatrix();
scale(-1,1);
beginShape();
vertex(-23,-114);
vertex(-97,103);
vertex(-85,93);
vertex(-32,-39);
vertex(-10,-62);
vertex(3,-96);
endShape(CLOSE);
popMatrix();
ellipse(-2,-103,55,50);
popMatrix();

noStroke();
fill(194, 171, 89);
pushMatrix();
translate(5,0);
pushMatrix();
beginShape();
vertex(-25,-99);
vertex(-107,103);
vertex(-90,93);
vertex(-37,-39);
vertex(-15,-62);
vertex(-2,-96);
endShape(CLOSE);
popMatrix();
pushMatrix();
scale(-1,1);
beginShape();
vertex(-23,-114);
vertex(-97,103);
vertex(-90,93);
vertex(-37,-39);
vertex(-15,-62);
vertex(-2,-96);
endShape(CLOSE);
popMatrix();
ellipse(0,-103,50,50);
popMatrix();

fill(251,223,114);
pushMatrix();
beginShape();
vertex(-25,-99);
vertex(-102,103);
vertex(-90,93);
vertex(-37,-39);
vertex(-15,-62);
vertex(-2,-96);
endShape(CLOSE);
popMatrix();
pushMatrix();
scale(-1,1);
beginShape();
vertex(-25,-99);
vertex(-102,103);
vertex(-90,93);
vertex(-37,-39);
vertex(-15,-62);
vertex(-2,-96);
endShape(CLOSE);
popMatrix();

pushMatrix();
translate(-110,-37);
rotate(40);
noStroke();
fill(234,180,103);
rect(134,-180,34,214);
fill(251,225,175);
rect(158,-180,10,214);

stroke(43,37,34);
strokeWeight(4);

for(var i = 0; i < 11; i++){
    line(136,-180+i*16.8+214%16.8,144,-180+i*16.8+214%16.8);
}

noFill();
rect(134,-180,34,214);
popMatrix();

noStroke();
fill(194, 171, 89);
ellipse(5,-103,50,50);
fill(251,223,114);
ellipse(0,-103,50,50);
fill(171,141,101);
strokeWeight(4);
stroke(48,34,27);
ellipse(3,-103,30,30);
strokeWeight(8);
point(3,-103);
noFill();
stroke(251,223,114);
ellipse(0,-103,38,38);

popMatrix();

    }],
    ];
var imageCaches = {

};
for(var i = 0; i < imageLoads.length; i++){
//     background(255, 255, 255);
//     background(255, 255, 255,0);
//     pushMatrix();
//     translate(300,300);
//     scale(0.1);
//     imageLoads[i][1]();
    imageCaches[imageLoads[i][0]] = get();
//     popMatrix();
}

var colorMap = {
    "basic":color(121,58,49),
    "rare":color(165,181,198),
    "civil":color(10,162,224),
    "commercial":color(235,197,105),
    "military":color(240, 17, 54),
    "science":color(2,173,153),
    "guild":color(209, 74, 230),
    };
var colorMapDark = {
    "basic":color(77, 50, 46),
    "rare":color(74, 74, 74),
    "civil":color(0, 124, 173),
    "commercial":color(112, 84, 0),
    "military":color(176, 0, 29),
    "science":color(0, 135, 74),
    "guild":color(126, 0, 148),
    };
var textureMap = {
    "basic":function(){return textures.wood;},
    "rare":function(){return textures.rock;},
    "civil":function(){return textures.marble;},
    "commercial":function(){return textures.rock;},
    "military":function(){return textures.lava;},
    "science":function(){return textures.marble;},
    "guild":function(){return textures.marble;},
    };
var resourceInitScale = 0.1;
// var resourceSymbols = {
//     "gold":function(t){
//         pushMatrix();
//         scale(2/3);
//         fill(176, 144, 0);
//         stroke(0,0,0);
//         strokeWeight(3);
//         ellipse(0,0,30,30);
//         noStroke();
//         fill(255, 208, 0);
//         ellipse(0,0,22,22);
//         fill(0,0,0);
//         textSize(13);
//         textAlign(CENTER,BASELINE);
//         textCompatible(t,0,4);
//         popMatrix();
//     },
//     "wood":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.wood,0,0);
//         popMatrix();
//     },
//     "ore":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.ore,0,0);
//         popMatrix();
//     },
//     "stone":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.stone,0,0);
//         popMatrix();
//     },
//     "clay":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.clay,0,0);
//         popMatrix();
//     },
//     "glass":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.glass,0,0);
//         popMatrix();
//     },
//     "papyrus":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.papyrus,0,0);
//         popMatrix();
//     },
//     "textiles":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.textiles,0,0);
//         popMatrix();
//     },
//     "cog":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.cog,0,0);
//         popMatrix();
//     },
//     "tablet":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.tablet,0,0);
//         popMatrix();
//     },
//     "compass":function(){
//         pushMatrix();
//         scale(1/(2*resourceInitScale*10));
//         translate(-300,-300);
//         image(imageCaches.compass,0,0);
//         popMatrix();
//     },
// };
var resourceSymbols = {
    "gold":function(t){
        pushMatrix();
        scale(2/3);
        fill(176, 144, 0);
        stroke(0,0,0);
        strokeWeight(3);
        ellipse(0,0,30,30);
        noStroke();
        fill(255, 208, 0);
        ellipse(0,0,22,22);
        fill(0,0,0);
        textSize(13);
        textAlign(CENTER,BASELINE);
        textCompatible(t,0,4);
        popMatrix();
    },
    "wood":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[0][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.wood,0,0);
        popMatrix();
        }
    },
    "ore":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[3][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.ore,0,0);
        popMatrix();
        }
    },
    "stone":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[1][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.stone,0,0);
        popMatrix();
        }
    },
    "clay":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[2][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.clay,0,0);
        popMatrix();
        }
    },
    "glass":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[4][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.glass,0,0);
        popMatrix();
        }
    },
    "papyrus":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[5][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.papyrus,0,0);
        popMatrix();
        }
    },
    "textiles":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[6][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.textiles,0,0);
        popMatrix();
        }
    },
    "cog":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[8][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.cog,0,0);
        popMatrix();
        }
    },
    "tablet":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[7][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.tablet,0,0);
        popMatrix();
        }
    },
    "compass":function(){
        if(liveSymbols){
        pushMatrix();
        scale(1/(20));
        imageLoads[9][1]();
        popMatrix();
        }else{
        pushMatrix();
        scale(1/(2*resourceInitScale*10));
        translate(-300,-300);
        image(imageCaches.compass,0,0);
        popMatrix();
        }
    },
};

var typeToLabel = {
    basic:"Basic resource structure",
    rare:"Rare resource structure",
    civil:"Civil structure",
    commercial:"Commercial structure",
    military:"Military structure",
    science:"Scientific structure",
    guild:"Guild",
};
var cardAmts = [
    [
    /*3*/["lumber yard","stone pit","clay pool","ore vein","clay pit","timber yard","loom","glassworks","press","baths","altar","theater","east trading post","west trading post","marketplace","stockade","barracks","guard tower","apothecary","workshop","scriptorium"], 
    /*4*/["lumber yard","ore vein","excavation","pawnshop","tavern","guard tower","scriptorium"],
    /*5*/["stone pit","clay pool","forest cave","altar","tavern","barracks","apothecary",],
    /*6*/["tree farm","mine","loom","glassworks","press","theater","marketplace"],
    /*7*/["pawnshop","baths","tavern","east trading post","west trading post","stockade","workshop",],
    ],
    [
    /*3*/["sawmill","quarry","brickyard","foundry","loom","glassworks","press","aqueduct","temple","statue","forum","caravansery","vineyard","walls","stables","dispensary","archery range","laboratory","courthouse","library","school",], 
    /*4*/["sawmill","quarry","brickyard","foundry","bazar","training ground","dispensary"],
    /*5*/["loom","glassworks","press","caravansery","stables","laboratory","courthouse",],
    /*6*/["temple","forum","caravansery","vineyard","training ground","archery range","library",],
    /*7*/["aqueduct","statue","forum","bazar","walls","training ground","school",],
    ],
    [
    /*3*/["pantheon","gardens","town hall","palace","haven","lighthouse","fortifications","arsenal","arena","lodge","siege workshop","observatory","senate","university","academy","study",], 
    /*4*/["gardens","haven","commerce chamber","circus","arsenal","university",],
    /*5*/["town hall","circus","arena","siege workshop","senate","study",],
    /*6*/["pantheon","town hall","lighthouse","commerce chamber","circus","lodge",],
    /*7*/["palace","fortifications","arsenal","arena","observatory","academy",],
    ],
    ];
    
var guildIds = [
    "workers guild",
    "craftsmens guild",
    "traders guild",
    "philosophers guild",
    "spies guild",
    "strategists guild",
    "shipowners guild",
    "scientists guild",
    "magistrates guild",
    "builders guild",
    ];
    
// check for misspellings and wrong amounts of cards

// for(var i = 0; i < guildIds.length; i++){
//     if(!types[guildIds[i]]){
//         println(guildIds[i]+" is not a guild");
//     }
// }

// for(var i = 0; i < 3; i++){
// for(var q = 0; q < cardAmts[i].length; q++){
//     for(var w = 0; w < cardAmts[i][q].length; w++){
//         if(!types[cardAmts[i][q][w]]){
//           println(cardAmts[i][q][w]+" is not a structure type");
//         }
//     }
//     println(cardAmts[i][q].length);
// }
// }



function getProduction(p){
var producers = [];
for(var i = 0; i < p.structures.basic.length; i++){
    producers.push(p.structures.basic[i]);
}
for(var i = 0; i < p.structures.rare.length; i++){
    producers.push(p.structures.rare[i]);
}
for(var i = 0; i < p.structures.commercial.length; i++){
    producers.push(p.structures.commercial[i]);
}
var available = [];

if(p.wonder){
    available.push(p.wonder.starter);
}

for(var i = 0; i < producers.length; i++){
    if(producers[i].data.produces&&producers[i].data.produces.length>0){
        available.push(producers[i].data.produces);
        if(producers[i].data.doubleProducer){
            available.push(producers[i].data.produces);
        }
    }
}

for(var i = 0; i < 3; i++){
    if(p.wonder && p.wonderStage > i){
        if(p.wonder.stages[i].produces){
            available.push(p.wonder.stages[i].produces);
        }
    }
}

return available;
}

function getTrades(pIndex){
var rightIndex = pIndex-1;
if(rightIndex<0){
    rightIndex = players.length-1;
}
var leftIndex = pIndex+1;
if(leftIndex >= players.length){
    leftIndex = 0;
}

return [getProduction(players[leftIndex]),getProduction(players[rightIndex])];

}


function drawWonderStage(x,y,p,stage){
pushMatrix();
translate(x,y);

image(textures.rock,-34,-49,68,98);
strokeWeight(2);
stroke(107, 107, 107);
noFill();
rect(-35,-50,70,100,4);

var data = p.wonder.stages[stage];

if(players.indexOf(p) === 0 && data.clickable && p.wonderStage > stage){
    if(msx >= x-35 && msx <= x+35 && msy >=y-50 && msy <= y+50){
        if(data.clickable(p)){
            noStroke();
            fill(196, 196, 196,100);
            rect(-35,-50,70,100,4);
            cursor(HAND);
            if(clicked){
                data.onClick(p);
                clicked = false;
            }
        }else{
            cursor("not-allowed");
        }
    }
}

if(data.customStuff){
    data.customStuff(p);
}
if(data.points){
    vp();
    textAlign(CENTER,BASELINE);
    textSize(25);
    fill(0, 0, 0);
    textCompatible(data.points,0,10);
}
if(data.strength){
    for(var i = 0; i < data.strength; i++){
        pushMatrix();
        translate(0,i*25-((data.strength-1)*25/2));
        strengthSymbol();
        popMatrix();
    }
}
if(data.produces){
    for(var i = 0; i < data.produces.length; i++){
        if(resourceSymbols[data.produces[i]]){
            pushMatrix();
            translate(0,6+i*18-((data.produces.length-1)*18/2));
            resourceSymbols[data.produces[i]]();
            popMatrix();
        }
    }
}
if(data.symbols){
        for(var i = 0; i < data.symbols.length; i++){
            if(data.symbols[i][0]==="gold"||resourceSymbols[data.symbols[i]]){
                pushMatrix();
                if(data.symbols.length===3){
                translate(0,i*20-((data.symbols.length-1)*20/2));
                scale(1.4);
                }else{
                translate(0,i*15-((data.symbols.length-1)*15/2));
                }
                
                if(data.symbols[i][0]==="gold"){
                scale(data.symbols[i][2]||1.4);
                resourceSymbols.gold(data.symbols[i][1]);
                }else{
                scale(0.8);
                resourceSymbols[data.symbols[i]]();
                }
                popMatrix();
            }
        }
        }


for(var i = 0; i < data.cost.length; i++){
    pushMatrix();
    var a = min(12.5,50/(data.cost.length-1));
    translate(-25+i*a,-40);
    scale(0.8);
    if(data.cost[i][0] === 'gold'){
    resourceSymbols.gold(data.cost[i][1]);
    }else{
    resourceSymbols[data.cost[i]]();
    }
    popMatrix();
}

if(p.wonderStage < stage &&!p.notReal){
var alph = 220;
stroke(0, 0, 0,alph);
strokeWeight(4);
fill(82, 82, 82,alph);
rect(-20,-5,40,30,4);
noFill();
arc(0,-5,20,20,180,360);
fill(0,0,0,alph);
ellipse(0,8,8,8);
ellipse(0,13,4,8);
}
if(p.wonderStage > stage &&!p.notReal){
pushMatrix();
translate(24,43);
stroke(11, 186, 20);
strokeWeight(6);
line(-8,-10,0,0);
line(12,-20,0,0);
popMatrix();
}

if(p.highlightWonderCost && p.wonderStage === stage){
    noStroke();
    fill(255, 0, 0,100);
    rect(-35,-50,70,20,4);
    p.highlightWonderCost = false;
}

if(p.wonderHighlight.highlighted && p.wonderStage-1 === stage){
noStroke();
fill(0, 242, 255,100);
rect(-40,-55,80,110,4);
p.wonderHighlight.highlighted = false;
}

popMatrix();
}


function calculateTotalStrength(p){
var ret = 0;
for(var i = 0; i < p.structures.military.length; i++){
    ret += p.structures.military[i].data.strength;
}

for(var i = 0; i < 3; i++){
    if(p.wonder && p.wonderStage > i){
        if(p.wonder.stages[i].strength){
            ret += p.wonder.stages[i].strength;
        }
    }
}
return round(ret);
}
function getScience(p){
var ret = {
compass:0,
tablet:0,
cog:0,
};
for(var i = 0; i < p.structures.science.length; i++){
    ret[p.structures.science[i].data.produces]++;
}
return ret;
}
function doWarFor(p){
var neighbors = getLeftRight(p);
var strength;
strength = calculateTotalStrength(p);

for(var i = 0; i < neighbors.length; i++){
var strengthO = calculateTotalStrength(players[neighbors[i]]);
if(strength > strengthO){
    p.record[age-1]++;
}
if(strength < strengthO){
    p.record[0]++;
}
}
}
function getWinPoints(p){
    var num = p.record[1]+p.record[2]*3+p.record[3]*5;
    return num;
}

function structure(type){
    if(!types[type]){
        println('error: '+type +' is not a structure type');
        type = 'lumber yard';
    }
    this.id = type;
    this.capitalizedId = capitalize(this.id);
    this.data = types[type];
    this.scaleTo = 1;
    this.scale = 1;
    this.x = 0;
    this.y = 535;
    this.dx = 0;
    this.dy = 535;
    this.infoCardShow = 0;
    this.ownedBy = false;
    this.revealed = false;
    this.IDENTIFIER = 'structure';
    this.rId = random();
}

function loadArt(data,capitalizedId){

stroke(0,0,0);
    strokeWeight(2);
    fill(colorMap[data.type]);
    rect(-35,-50,70,100,4);
    
    if(textureMap[data.type]){
    image(textureMap[data.type](),-34,-49,68,98);
    }
    
    strokeWeight(2);
    noFill();
    rect(-35,-50,70,100,4);
    
    switch(data.type){
    case "basic":
    case "rare":
        for(var i = 0; i < data.produces.length; i++){
            if(resourceSymbols[data.produces[i]]){
                pushMatrix();
                translate(5,i*35-((data.produces.length-1)*35/2));
                scale(1.5);
                resourceSymbols[data.produces[i]]();
                popMatrix();
            }
        }
        if(data.doubleProducer){
            pushMatrix();
            translate(0,8);
            textAlign(CENTER,BASELINE);
            textSize(24);
            fill(255, 187, 0);
            textCompatible("2",20,20);
            textSize(20);
            textCompatible("x",6,18);
            popMatrix();
        }
    break;
    case "military":
    for(var i = 0; i < data.strength; i++){
        pushMatrix();
        translate(5,i*25-((data.strength-1)*25/2));
        scale(1.1);
        strengthSymbol();
        popMatrix();
    }
    break;
    case "civil":
        pushMatrix();
        translate(5,0);
        scale(0.8);
        vp();
        popMatrix();
        textAlign(CENTER,BASELINE);
        textSize(20);
        fill(0,0,0);
        textCompatible(data.points,5,8);
    break;
    case "science":
        pushMatrix();
        translate(5,0);
        scale(1.5);
        resourceSymbols[data.produces]();
        popMatrix();
    break;
    case "guild":
    case "commercial":
        if(data.cardSymbol){
            pushMatrix();
            translate(5,0);
            stroke(0,0,0);
            strokeWeight(2);
            fill(colorMap[data.cardSymbol]);
            rect(-18,-25,36,51,4);
            popMatrix();
        }
        if(data.shipowners){
            pushMatrix();
            translate(-5,10);
            stroke(0,0,0);
            strokeWeight(2);
            fill(colorMap.basic);
            rect(-35/4,-25/2,35/2,25,4);
            popMatrix();
            pushMatrix();
            translate(5,0);
            stroke(0,0,0);
            strokeWeight(2);
            fill(colorMap.rare);
            rect(-35/4,-25/2,35/2,25,4);
            popMatrix();
            pushMatrix();
            translate(15,10);
            stroke(0,0,0);
            strokeWeight(2);
            fill(colorMap.guild);
            rect(-35/4,-25/2,35/2,25,4);
            popMatrix();
        }
        if(data.skullSymbol){
            pushMatrix();
            translate(5,8);
            scale(0.9);
            skull();
            popMatrix();
        }
        if(data.wonderSymbol){
            pushMatrix();
            translate(5,-17);
            stroke(115, 115, 115);
            strokeWeight(2);
            fill(255, 213, 0);
            beginShape();
            vertex(0,0);
            vertex(5,5);
            vertex(-5,5);
            endShape(CLOSE);
            beginShape();
            vertex(-9,9);
            vertex(9,9);
            vertex(13,13);
            vertex(-13,13);
            endShape(CLOSE);
            beginShape();
            vertex(-17,17);
            vertex(17,17);
            vertex(21,21);
            vertex(-21,21);
            endShape(CLOSE);
            popMatrix();
        }
        if(data.symbols){
        for(var i = 0; i < data.symbols.length; i++){
            if(data.symbols[i][0]==="gold"||resourceSymbols[data.symbols[i]]){
                pushMatrix();
                if(data.symbols.length===3){
                translate(5,i*20-((data.symbols.length-1)*20/2));
                scale(1.3);
                }else{
                translate(5,i*18-((data.symbols.length-1)*18/2));
                scale(1.15);
                }
                
                if(data.symbols[i][0]==="gold"){
                scale(data.symbols[i][2]||1.4);
                resourceSymbols.gold(data.symbols[i][1]);
                }else{
                scale(0.8);
                resourceSymbols[data.symbols[i]]();
                }
                popMatrix();
            }
        }
        }
        if(data.rIndicator){
            pushMatrix();
            translate(15,0);
            stroke(0,0,0);
            strokeWeight(1);
            fill(176, 176, 176);
            triangle(0,-6,0,6,12,0);
            
            popMatrix();
        }
        if(data.rGold){
            pushMatrix();
            translate(15,0);
            translate(5,8);
            scale(0.6);
            resourceSymbols.gold(1);
            popMatrix();
        }
        if(data.lIndicator){
            pushMatrix();
            translate(-5,0);
            stroke(0,0,0);
            strokeWeight(1);
            fill(176, 176, 176);
            triangle(0,-6,0,6,-12,0);
            popMatrix();
        }
        if(data.lGold){
            pushMatrix();
            translate(-5,0);
            translate(-5,8);
            scale(0.6);
            resourceSymbols.gold(1);
            popMatrix();
        }
        if(data.sIndicator){
            pushMatrix();
            translate(5,8);
            stroke(0,0,0);
            strokeWeight(1);
            fill(176, 176, 176);
            triangle(-6,0,6,0,0,12);
            popMatrix();
        }
        if(data.pointSymbol){
            pushMatrix();
            translate(5,-16);
            scale(0.35);
            vp();
            popMatrix();
            textAlign(CENTER,BASELINE);
            textSize(10);
            fill(0,0,0);
            textCompatible(data.pointSymbol,5,-12);
        }
        // if(this.data.pointValue){
        // textAlign(CENTER,BASELINE);
        // textSize(20);
        // fill(0,0,0);
        // textCompatible(this.data.pointValue(players[0]),5,0);
        // }
    break;
    }
    
    
    pushMatrix();
    translate(-22,46);
    rotate(-90);
    noStroke();
    fill(207, 207, 207);
    rect(-3,-9,capitalizedId.length*5+6,13,4);
    textAlign(LEFT,BASELINE);
    textSize(8);
    fill(0,0,0);
    textCompatible(capitalizedId,0,0);
    //point(0,0);
    popMatrix();
    
    if(data.evos){
    for(var i = 0; i < data.evos.length; i++){
        var capitalizedId = capitalize(data.evos[i]);
        if(capitalizedId.length > 13){
            capitalizedId = capitalizedId.substring(0,10)+"...";
        }
        pushMatrix();
        translate(-16,45-i*10);

        noStroke();
        fill(207, 207, 207);
        rect(-2,-7,capitalizedId.length*3.7+4,10,4);
        textAlign(LEFT,BASELINE);
        textSize(6);
        fill(97, 97, 97);
        fill(colorMapDark[types[data.evos[i]].type]);
        textCompatible(capitalizedId,0,0);
        //point(0,0);
        popMatrix();
    }
    }
    
    for(var i = 0; i < data.cost.length; i++){
        pushMatrix();
        var a = min(12.5,50/(data.cost.length-1));
        translate(-25+i*a,-40);
        scale(0.8);
        if(data.cost[i][0] === 'gold'){
        resourceSymbols.gold(data.cost[i][1]);
        }else{
        resourceSymbols[data.cost[i]]();
        }
        popMatrix();
    }
}
structure.prototype.loadArt = function(){
loadArt(this.data,this.capitalizedId);
};

// for(var i in types){
//     //println(allTypes.length); 
//     // for(var q = 0; q < 17; q++){
//     // var i = allTypes[q];
//     background(255, 255, 255);
//     background(255, 255, 255,0);
//     pushMatrix();
//     translate(300,300);
//     scale(2);
//     loadArt(types[i],capitalize(i));
//     popMatrix();
//     types[i].loadedArt = get();
//     // }
// }

structure.prototype.art = function(){

if(!this.data.loadedArt||enhancedCardGraphics){ 
    this.loadArt();
    
}else{
    pushMatrix();
    
    scale(1/2);
    translate(-300,-300);
    image(this.data.loadedArt,0,0);
    popMatrix();
}

};


structure.prototype.draw = function(x,y) {
    if(x){
        this.x = x;
    }
    if(y){
        this.y = y;
    }
    if(this.ownedBy){
        this.revealed = true;
    }
    
    if(this.revealed){
    if(this.isHovered()){
        this.infoCardShow = lerp(this.infoCardShow,1,0.1);
    }else{
        this.infoCardShow = 0;
    }
    }
    
    pushMatrix();
    translate(this.dx,this.dy);
    
    pushMatrix();
    scale(this.scale);
    if(this.revealed || revealAll){
    this.art();
    }else{
    stroke(0,0,0);
    strokeWeight(2);
    fill(143, 104, 14);
    rect(-35,-50,70,100,4);
    }
    
    if(this.revealed || revealAll){
    pushMatrix();
    translate(-22,46);
    rotate(-90);
    if(this.dupe){
    noStroke();
    fill(255, 25, 25,100);
    rect(-3,-9,this.capitalizedId.length*5+6,13,4);
    }
    //point(0,0);
    popMatrix();
    
    if(this.canEvo && !this.ownedBy){
    noStroke();
    fill(0, 255, 30,100);
    rect(-35,-50,70,20,4);
    }else if(this.highlightCost){
    noStroke();
    fill(255, 0, 0,100);
    rect(-35,-50,70,20,4);
     this.highlightCost = false;
    }
    
    if(this.highlighted){
        fill(0, 242, 255,100);
    rect(-40,-55,80,110,4);
        this.highlighted = false;
    }
    }
   
    
    
    popMatrix();
    
    popMatrix();
};

structure.prototype.physics = function(x,y) {
if((!this.x&&this.x!==0)||(!this.dx&&this.dx!==0)){
    this.x = 0;
    this.dx = 0;
}
if((!this.y&&this.y!==0)||(!this.dy&&this.dy!==0)){
    this.y = 0;
    this.dy = 0;
}
this.dx = lerp(this.dx,this.x,0.1);
this.dy = lerp(this.dy,this.y,0.1);
this.scale = lerp(this.scale,this.scaleTo,0.1);
this.scaleTo = 1;
};

var generateCombinations = function(arrays, check,card,finish) {
    var done = false;
   
  function helper(current, index) {
    if(!done){
    if (index === arrays.length) {
      if(check(current.slice(),card)){
          finish();
          done = true;
      }
      return;
    }
    for (var i = 0; i < arrays[index].length; i++) {
      current.push(arrays[index][i]);
      helper(current, index + 1);
      current.pop();
    }
    }
  }
    

  helper([], 0);
};

structure.prototype.checkEvos = function(p){
for(var i in p.structures){
    for(var q = 0; q < p.structures[i].length; q++){
        if(p.structures[i][q].data.evos){
            
            if(p.structures[i][q].data.evos.indexOf(this.id) >=0){
                this.canEvo = true;
                return true;
            }
        }
    }
}
this.canEvo = false;
return false;
};
structure.prototype.checkDuplicates = function(p){

    for(var q = 0; q < p.structures[this.data.type].length; q++){
        if(p.structures[this.data.type][q].id === this.id){
            this.dupe = true;
            return true;
        }
    }
this.dupe = false;
return false;
};

// does not include gold
function isSufficient(available, cost){
    
var possible = false;
generateCombinations(available,
function(trying,cost){
for(var i = 0; i < cost.length;i++){
if(cost[i][0] !== "gold"){
var ind = trying.indexOf(cost[i]);
if(ind >= 0){
trying.splice(ind,1);
}else{
return false;
}
}
}

return true;


},cost,function(){
possible = true;
});

return possible;
}
function canAfford(p,cost,theoretical){
if(p.costCache && cost === p.costCache){
        return p.costCacheReturn;
}else{
p.costCache = cost;
}

var available = getProduction(p);
var allThings = [];
for(var i = 0; i < p.tradePool.length; i++){
    available.push([p.tradePool[i]]);
}
if(theoretical){
    for(var i = 0; i < theoretical.length; i++){
        for(var q = 0; q < theoretical[i].length; q++){
        available.push(theoretical[i][q]);
        }
    }
}
for(var i = 0; i < available.length; i++){
    for(var q = 0; q < available[i].length; q++){
    allThings.push(available[i][q]);
    }
}

// check for just not having a resource
for(var i = 0; i < cost.length;i++){

if(cost[i][0] !== "gold"){
var ind = allThings.indexOf(cost[i]);
if(ind >= 0){
allThings.splice(ind,1);
}else{
p.costCacheReturn = false;
return false;
}
}
}

var goldCost = 0;
for(var i = 0; i < cost.length;i++){
if(cost[i][0] === "gold"){
    goldCost += cost[i][1];
}
}

var possible = false;

if(p.gold < goldCost){
return false;
}else{
possible = isSufficient(available,cost);
}

p.costCacheReturn = possible;
return possible;
}


function calculateSciencePoints(science){
    var total = 0;
    
    // square each type
    for(var i in science){
        total += pow(science[i],2);
    }
    
    // 7 points for each set
    var least = 1000;
    for(var i in science){
        if(science[i] < least){
            least = science[i];
        }
    }
    total += 7*least;
    
    return round(total);
}

// calculate maximum science score with a base science production and some number of bonus science symbols
function maxScienceScore(base, bonus) {
  var baseCog = base.cog;
  var baseTablet = base.tablet;
  var baseCompass = base.compass;

  var bestPoints = -Infinity;
  var bestAlloc = { cog: 0, tablet: 0, compass: 0 };
  var bestCounts = { cog: baseCog, tablet: baseTablet, compass: baseCompass };

  var a, b, c;
  for (a = 0; a <= bonus; a++) {
    for (b = 0; b <= bonus - a; b++) {
      c = bonus - a - b;

      var counts = {
        cog: baseCog + a,
        tablet: baseTablet + b,
        compass: baseCompass + c
      };

      var pts = calculateSciencePoints(counts);

      if (pts > bestPoints) {
        bestPoints = pts;
        bestAlloc = { cog: a, tablet: b, compass: c };
        bestCounts = counts;
      }
    }
  }

  return {
    points: bestPoints,
    finalCounts: bestCounts
  };
}

// tally up points
function calculatePoints(p){
var total = 0;

// military
var num = getWinPoints(p);
total += num;
total -= p.record[0];
var militaryLog = {
losses:p.record[0],
wins:num,
total:num-p.record[0],
};

// gold
total += floor(p.gold/3);

// number of "choose science symbol"
var bonusScience = 0;

// wonders
var wonderLog = 0;
for(var i = 0; i < p.wonderStage; i++){
    if(p.wonder.stages[i]){
    if(p.wonder.stages[i].points){
        total += p.wonder.stages[i].points;
        wonderLog += p.wonder.stages[i].points;
    }
    if(p.wonder.stages[i].bonusScience){
        bonusScience++;
    }
    }
}

// structures
var structureLogs = {
civil:0,
commercial:0,
guild:0,
};
for(var i in p.structures){
    for(var q = 0; q < p.structures[i].length; q++){
        var card = p.structures[i][q];
        switch(card.data.type){
            case "civil":
                total += card.data.points;
                structureLogs.civil += card.data.points;
            break;
            case "commercial":
                if(card.data.points){
                    var num = card.data.points(p);
                    total += num;
                    structureLogs.commercial += num;
                }
            break;
            case "guild":
                if(card.data.pointValue){
                    var num = card.data.pointValue(p);
                    total += num;
                    structureLogs.guild += num;
                }
                 if(card.data.bonusScience){
                    bonusScience++;
                }
            break;
        }
    }
}

// science
var science = getScience(p);

var most = maxScienceScore(science, bonusScience);

total += most.points;

return {
    total:total,
    
    military: militaryLog.total,
    militaryLog: militaryLog,
    
    gold:floor(p.gold/3),
    goldAmt:p.gold,
    
    wonder: wonderLog,
    
    civil:structureLogs.civil,
    
    commercial:structureLogs.commercial,
    
    guild:structureLogs.guild,
    
    science:most.points,
    scienceCounts:most.finalCounts,
    
    
};
}



structure.prototype.canBeBoughtBy = function(p){
if(this.checkDuplicates(p)){
    return false;
}

if(p.freeBuild){
    return true;
}
// check evos
if(this.checkEvos(p)){
    return true;
}


return canAfford(p,this.data.cost);
};

structure.prototype.infoCard = function(){
pushMatrix();
var w = 160;
if(this.data.addW){
w += this.data.addW;
}
var h = 140;
if(this.data.addH){
h += this.data.addH;
}
var x = constrain(this.x,(w/2)+5,600-((w/2)+5));
var y = constrain(this.y,165,600+(160-h)-15);

var lw = (-w/2)+10;

translate(x,y-160);
var offsety = 160+(this.y-y);
var offsetx = (this.x-x);
translate(offsetx,offsety);
scale(this.infoCardShow);
translate(-offsetx,-offsety);
fill(232, 232, 232);
stroke(0,0,0);
strokeWeight(2);
rect(-w/2,0,w,h,4);

var typeText = capitalize(typeToLabel[this.data.type]);
var w2 = typeText.length*6+10;
rect(-w2/2,h-8,w2,16,4);

textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(10);
textCompatible(typeText,0,h+4);

textAlign(LEFT,BASELINE);
fill(0,0,0);
textSize(15);
var numerals = '';
for(var i = 0; i < this.data.age; i++){
    numerals += 'I';
}
textCompatible(this.capitalizedId+' ('+numerals+')',lw,20);



var down = 40;

    textSize(10);
switch(this.data.type){
    
    case "rare":
    case "basic":
    var a = '';
    for(var i = 0; i < this.data.produces.length; i++){
        if(i !== 0){
        a += ' or ';
        }
        if(this.data.doubleProducer){
        a += '2 ';
        }
        a += capitalize(this.data.produces[i]);
    }
    textCompatible("Produces:\n"+a,lw,down);
    down+=30;
    break;
    case "science":
    var a =  capitalize(this.data.produces);
    textCompatible("Science: "+a,lw,down);
    down+=15;
    break;
    case "civil":
    textCompatible("Worth "+this.data.points+" victory points",lw,down,w-20,30);
    down+=15;
    break;
    case "military":
    textCompatible("Increases your strength by "+this.data.strength,lw,down,w-20,30);
    down+=30;
    break;
    case "guild":
    case "commercial":
    textCompatible(this.data.descript,lw,down,w-20,60);
    down+=this.data.descriptDown||60;
    break;
}

var a = '';
    var things = {
    
    };
    for(var i = 0; i < this.data.cost.length; i++){
    if(this.data.cost[i][0] === 'gold'){
        if(!things.gold){
            things.gold = this.data.cost[i][1];
        }else{
            things.gold += this.data.cost[i][1];
        }
    }else{
    if(!things[this.data.cost[i]]){
        things[this.data.cost[i]] = 1;
    }else{
        things[this.data.cost[i]]++;
    }
    }
    }
    var a2 = 0;
    for(var i in things){
        if(a2){
           a+=', ';
        }
        a2++;
        a += things[i]+' '+i;
    }
    if(a.length === 0){
        a = 'Free';
    }
    textCompatible("Cost:\n"+a,lw,down,w-20,60);
    down+=30;
    if(a2 >=3){
        down += 15;
    }
    if(a2 >=6){
        down += 15;
    }

if(this.data.evos && this.data.evos.length > 0){
    var a = '';
    for(var i = 0; i < this.data.evos.length; i++){
        if(i !== 0){
        a += ' and ';    
        }
        a += capitalize(this.data.evos[i]);
        // if(types[this.data.evos[i]]){
        //     var data = types[this.data.evos[i]];
        //     if(data.type === 'civil'){
        //         a += ' ('+data.points+')';
        //     }
        //     if(data.type === 'military'){
        //         a += ' ('+data.strength+')';
        //     }
        // }
    }
    //fill(colorMap[types[this.data.evos[i]].type]);
    textCompatible("Enables building "+a+" for free in a future age",lw,down,w-20,60);
}

popMatrix();
};
function wonderInfoCard(p){
var wonder = p.wonder;
pushMatrix();
var w = 230;
var h = 300;
var x = 415;
var y = 60;

var lw = (-w/2)+10;

translate(x,y);
var offsety = (425-60);
var offsetx = (315-415);
translate(offsetx,offsety);
scale(p.wonderInfoCardShow);
translate(-offsetx,-offsety);
fill(232, 232, 232);
stroke(0,0,0);
strokeWeight(2);
rect(-w/2,0,w,h,4);

textAlign(LEFT,BASELINE);
fill(187, 0, 255);
textSize(10);
textCompatible(wonder.capitalizedId,lw,20);
fill(0,0,0);
var down = 40;
textSize(10);
textCompatible("Starting resource: "+capitalize(wonder.starter[0]),lw,down);
down += 25;
for(var i2 = 0; i2 < 3; i2++){
    textSize(12);
    var stage = wonder.stages[i2];
    textCompatible("Stage "+(i2+1),lw,down);
    down += 15;
    
    var a = '';
    var things = {
    
    };
    for(var i = 0; i < stage.cost.length; i++){
    if(stage.cost[i][0] === 'gold'){
        if(!things.gold){
            things.gold = stage.cost[i][1];
        }else{
            things.gold += stage.cost[i][1];
        }
    }else{
    if(!things[stage.cost[i]]){
        things[stage.cost[i]] = 1;
    }else{
        things[stage.cost[i]]++;
    }
    }
    }
    var a2 = 0;
    for(var i in things){
        if(a2){
           a+=', ';
        }
        a2++;
        a += things[i]+' '+i;
    }
    textSize(10);
    textCompatible("Cost:\n"+a,lw,down,w-20,60);
    down+=30;
    if(stage.points){
    textCompatible("Worth "+stage.points+" victory points",lw,down,w-20,60);
    down += 20;
    }
    if(stage.strength){
    textCompatible("Increases your strength by "+stage.strength,lw,down,w-20,60);
    down += 20;
    }
    if(stage.produces){
        var a = '';
    for(var i = 0; i < stage.produces.length; i++){
        if(i !== 0){
        a += ' or ';
        }
        a += capitalize(stage.produces[i]);
    }
    textCompatible("Produces:\n"+a,lw,down);
    down += 35;
    }
    if(stage.descript){
    textCompatible(stage.descript,lw,down,w-20,60);
    down += stage.descriptDown||35;
    }
}

popMatrix();
}
function removeFromHand(hand,card){
    var i = hand.indexOf(card);
    if(i >= 0){
        hand.splice(i,1);
    }
}
structure.prototype.build = function(p){
this.ownedBy = p;
p.structures[this.data.type].push(this);
};
structure.prototype.useGold = function(p){
if(!p.freeBuild){
for(var i = 0; i < this.data.cost.length; i++){
    if(this.data.cost[i][0] === 'gold'){
        p.gold -= this.data.cost[i][1];
    }
}
}
};
structure.prototype.isHovered = function(){
return (msx >= this.x-35 && msx <= this.x+35 && msy >= this.y-50 && msy <= this.y+50);
};
var burnCard = function(card,player){
            player.gold+=3;
            discardedCards.push(card);
            removeFromHand(player.hand,card);
            };
// todo: make effects after all players build
var awaitingEffects = [];
var buildCard = function(card,player){
    card.useGold(player);
    card.build(player);
    if(card.data.effect){
        awaitingEffects.push([card.data,player,card]);
    }
    removeFromHand(player.hand,card);
};
var buildWonder = function(card,player){
    var stage = player.wonder.stages[player.wonderStage];
    if(stage.effect){
        awaitingEffects.push([stage,player,player.wonderHighlight]);
    }
    player.wonderStage++;
    removeFromHand(player.hand,card);
};
var doTurn = false;
structure.prototype.shopBehavior = function(){
    var hovered = this.isHovered();
    if(hovered||(this.wasHovered && nodeNavigating)){
        cursor(HAND);
        if(m.hold!==this){
        this.scaleTo = 1.08;
        }
        if(tryGrab() && (!m.hold||(m.hold !== this && this.wasHovered && nodeNavigating))){
            m.hold = this;
            clicked = false;
        }
    }
    if(hovered){
    this.wasHovered = true;
    }else{
    this.wasHovered = false;
    }
    if(m.hold === this){
        // burn
        if(dist(this.x,this.y,95,415)<=35){
            if(clicked){
            clicked = false;
            m.hold = false;
            
            players[0].choice = {
            descript:"Player burned a card",
            arrow:{x:95,y:415},
            card:this,
            player:players[0],
            action:burnCard,
            };
            
            }
            this.scaleTo = 0.5;
        }
        // build
        if(dist(this.x,this.y,175,415)<=35){
            if(this.canBeBoughtBy(players[0])){
            if(clicked){
            clicked = false;
            m.hold = false;
            
            players[0].choice = {
            descript:"Player built a structure",
            arrow:{x:175,y:415},
            card:this,
            player:players[0],
            action:buildCard,
            tag:"build",
            };
            
            
            }
            this.scaleTo = 0.5;
            }else{
            this.highlightCost = true;
            }
        }
        // wonder
        if(players[0].wonderStage<3){
        if(dist(this.x,this.y,345+70*players[0].wonderStage,415)<=35){
            if(canAfford(players[0],players[0].wonder.stages[players[0].wonderStage].cost)){
                this.scaleTo = 0.5; 
                if(clicked){
                clicked = false;
                m.hold = false; 
                
                players[0].choice = {
                descript:"Player built a wonder stage",
                arrow:{x:345+70*players[0].wonderStage,y:415},
                card:this,
                player:players[0],
                action:buildWonder,
                
                };
                
                }
            }else{
                players[0].highlightWonderCost = true;
            }
        }
        }
    }
};
function getTradePrice(p,resource,trader){
    for(var i = 0; i < p.structures.commercial.length; i++){
        if(p.structures.commercial[i].data.tradeMod){
            if(p.structures.commercial[i].data.tradeMod(resource,trader)){
                return 1;
            }
        }
    }
    return 2;
}
function doTrade(p,cost,tradeS,tradeIndex,tradePart){
p.gold -= cost;
initializedNodes = false;

// make sure still has gold for active choice
if(p.choice){
    if(p.choice.tag === "build"){
        var bad = false;
        for(var i = 0; i < p.choice.card.data.cost.length; i++){
            if(p.choice.card.data.cost[i][0] === "gold"){
            if(p.gold < p.choice.card.data.cost[i][1]){
                bad = true;
            }
            }          
        }
        if(bad){
            p.choice = false;
        }
    }
}

p.tradePool.push(p.trades[tradeS][tradeIndex][tradePart]);
p.costCache = false;
p.costCacheReturn = false;

var traderIndex = players.indexOf(p);
if(tradeS === 0){
    traderIndex++;
}else{
    traderIndex--;
}
if(traderIndex >= players.length){
    traderIndex -= players.length;
}
if(traderIndex < 0){
    traderIndex += players.length;
}


p.toGiveGold.push({
side:tradeS,
traderPlayer:players[traderIndex],
amt:cost,
resource:p.trades[tradeS][tradeIndex][tradePart],
});

p.trades[tradeS].splice(tradeIndex,1);
}
function tradeButton(x,y,resource,tradeS,tradeIndex,tradePart){
    pushMatrix();
    translate(x,y);
    
    var cost = getTradePrice(players[0],players[0].trades[tradeS][tradeIndex][tradePart],tradeS);
    
    if(msx>=x && msx <= x+45 && msy >= y && msy <= y+20){
    
    if(players[0].gold >= cost){
    cursor(HAND);
    fill(214, 211, 175);
    if(clicked){
        doTrade(players[0],cost,tradeS,tradeIndex,tradePart);
        clicked = false;
    }
    }else{
    cursor("not-allowed");
    fill(217, 91, 87);
    }
    }else{
    fill(191, 191, 191);
    }
    
    strokeWeight(2);
    stroke(0,0,0);
    rect(0,0,45,20,4);
    pushMatrix();
    translate(12,10);
    scale(0.8);
    resourceSymbols[resource]();
    popMatrix();
    
    
    pushMatrix();
    translate(34,10);
    scale(1.1);
    resourceSymbols.gold(cost);
    popMatrix();
    
    
    popMatrix();
}

// functions for finding optimal trades (for bots)

// this version is more likely to crash so not used
var minTradeCost = function(cost, production, trades, p) {
  function getCombinations(arr, k) {
    if (k === 0) {return [[]];}
    if (arr.length < k) {return [];}
    var result = [];
    var i;
    for (i = 0; i < arr.length; i++) {
      var head = arr[i];
      var rest = arr.slice(i + 1);
      var tailCombos = getCombinations(rest, k - 1);
      for (var j = 0; j < tailCombos.length; j++) {
        result.push([head].concat(tailCombos[j]));
      }
    }
    return result;
  }

  function getChoiceCombinations(tradeSet) {
    // tradeSet: array of { side, options }
    var results = [[]];
    for (var i = 0; i < tradeSet.length; i++) {
      var card = tradeSet[i];
      var newResults = [];
      for (var j = 0; j < results.length; j++) {
        var prefix = results[j];
        for (var k = 0; k < card.options.length; k++) {
          newResults.push(prefix.concat([{
            resource: card.options[k],
            side: card.side
          }]));
        }
      }
      results = newResults;
    }
    return results;
  }

  // Flatten trade array
  var allTrades = [];
  for (var i = 0; i < trades[0].length; i++) {
    allTrades.push({ side: 0, options: trades[0][i] });
  }
  for (var i = 0; i < trades[1].length; i++) {
    allTrades.push({ side: 1, options: trades[1][i] });
  }

  var minTotalCost = Infinity;
  var bestTradeResources = [];

  for (var k = 0; k <= allTrades.length; k++) {
    var tradeCombos = getCombinations(allTrades, k);
    for (var c = 0; c < tradeCombos.length; c++) {
      var tradeSet = tradeCombos[c];
      var choiceCombos = getChoiceCombinations(tradeSet);

      for (var m = 0; m < choiceCombos.length; m++) {
        var chosenResources = choiceCombos[m];

        var combinedResources = production.slice();
        for (var n = 0; n < chosenResources.length; n++) {
          combinedResources.push([chosenResources[n].resource]);
        }

        if (isSufficient(combinedResources, cost)) {
          var totalCost = 0;
          for (var n = 0; n < chosenResources.length; n++) {
            totalCost += getTradePrice(p, chosenResources[n].resource, chosenResources[n].side);
          }
          if (totalCost <= minTotalCost) {
            if(minTotalCost === Infinity || totalCost < minTotalCost || floor(random(0,2))===1){
            minTotalCost = totalCost;
            bestTradeResources = chosenResources;
            }
          }
        }
      }
    }
  }

  if (minTotalCost === Infinity) {
    return false;
  }

  return {
    possible: true,
    totalCost: minTotalCost,
    tradesUsed: bestTradeResources // Array of { resource, side }
  };
};

// Resources for A* trade calculator{

function countCost(cost) {
  var i, map = {};
  for (i = 0; i < cost.length; i++) {
    var r = cost[i];
    map[r] = (map[r] || 0) + 1;
  }
  return map;
}
function buildMaxProduction(production) {
  var i, j, maxProd = {};
  for (i = 0; i < production.length; i++) {
    var opts = production[i];
    for (j = 0; j < opts.length; j++) {
      var r = opts[j];
      maxProd[r] = (maxProd[r] || 0) + 1;
    }
  }
  return maxProd;
}
function intersectOptionsWithNeeded(options, neededSet) {
  var out = [];
  for (var i = 0; i < options.length; i++) {
    if (neededSet[options[i]]) {out.push(options[i]);}
  }
  return out;
}
function makeMinPriceMap(trades,p) {
  var minPrice = {};
  var i, j;
  // left = 0, right = 1
  
  for (i = 0; i < trades[0].length; i++) {
    for (j = 0; j < trades[0][i].length; j++) {
      var rL = trades[0][i][j];
      var priceL = getTradePrice(p, rL, 0);
      
      if (minPrice[rL] === undefined || priceL < minPrice[rL]) {minPrice[rL] = priceL;}
    }
  }
  for (i = 0; i < trades[1].length; i++) {
    for (j = 0; j < trades[1][i].length; j++) {
      var rR = trades[1][i][j];
      var priceR = getTradePrice(p, rR, 1);
      if (minPrice[rR] === undefined || priceR < minPrice[rR]) {minPrice[rR] = priceR;}
    }
  }
  // default Infinity if not present
  return minPrice;
}

// Simple binary min-heap
function MinHeap() {
  this.a = [];
}
MinHeap.prototype.push = function (item) {
  var a = this.a;
  a.push(item);
  var i = a.length - 1;
  while (i > 0) {
    var p = ((i - 1) >> 1);
    if (a[p].key <= a[i].key) {break;}
    var tmp = a[p]; a[p] = a[i]; a[i] = tmp;
    i = p;
  }
};
MinHeap.prototype.pop = function () {
  var a = this.a;
  if (a.length === 0){ return null;}
  var top = a[0];
  var last = a.pop();
  if (a.length) {
    a[0] = last;
    // down-heap
    var i = 0;
    while (true) {
      var l = i * 2 + 1, r = l + 1, m = i;
      if (l < a.length && a[l].key < a[m].key) {m = l;}
      if (r < a.length && a[r].key < a[m].key) {m = r;}
      if (m === i) {break;}
      var tmp = a[m]; a[m] = a[i]; a[i] = tmp;
      i = m;
    }
  }
  return top;
};
MinHeap.prototype.size = function () { 
    return this.a.length; 
};

//{ side, options, idx }
function flattenTrades(trades, neededSet) {
  var all = [];
  var i;
  for (i = 0; i < trades[0].length; i++) {
    var optsL = intersectOptionsWithNeeded(trades[0][i], neededSet);
    if (optsL.length) {all.push({ side: 0, options: optsL, idx: all.length });}
  }
  for (i = 0; i < trades[1].length; i++) {
    var optsR = intersectOptionsWithNeeded(trades[1][i], neededSet);
    if (optsR.length) {all.push({ side: 1, options: optsR, idx: all.length });}
  }
  return all;
}
// Sort trades to try cheaper/more relevant first
function sortTradesHeuristically(allTrades, minPrice) {
  allTrades.sort(function (a, b) {
    var i, bestA = Infinity, bestB = Infinity;
    for (i = 0; i < a.options.length; i++) {
      var pa = minPrice[a.options[i]];
      if (pa !== undefined && pa < bestA) {bestA = pa;}
    }
    for (i = 0; i < b.options.length; i++) {
      var pb = minPrice[b.options[i]];
      if (pb !== undefined && pb < bestB) {bestB = pb;}
    }
    if (bestA !== bestB) {return bestA - bestB;}
    // tie-break
    return b.options.length - a.options.length;
  });
}
function computeNeedLowerBound(costCount, selCount, maxProd) {
  var need = {};
  var r;
  for (r in costCount) {
    var haveViaTrades = selCount[r] || 0;
    var canProduce = maxProd[r] || 0;
    var rem = costCount[r] - haveViaTrades - canProduce;
    need[r] = rem > 0 ? rem : 0;
  }
  return need;
}
function needToHeuristic(need, minPrice) {
  var r, h = 0;
  for (r in need) {
    if (need[r] > 0) {
      var mp = minPrice[r];
      if (mp === undefined) {return Infinity;}
      h += need[r] * mp;
    }
  }
  return h;
}
function makeVisitedKey(startAt, selCount, relevantResources) {
  var parts = [String(startAt)];
  for (var i = 0; i < relevantResources.length; i++) {
    var r = relevantResources[i];
    parts.push(String(selCount[r] || 0));
  }
  return parts.join('|');
}

// }

/**
 A* exact solver (fast + pruned)
 **/
function minTradeCost_AStar(cost, production, trades, p) {
  // Quick 0-cost check
  if (isSufficient(production, cost)) {
    return { possible: true, totalCost: 0, tradesUsed: [] };
  }
  var costCount = countCost(cost);
  var relevantResourcesMap = {};
  var relList = [];
  for (var r in costCount) { relevantResourcesMap[r] = true; relList.push(r); }

  var maxProd = buildMaxProduction(production);
  
  var minPrice = makeMinPriceMap(trades,p);

  var allTrades = flattenTrades(trades, relevantResourcesMap);
  if (!allTrades.length) {return false;}

  sortTradesHeuristically(allTrades, minPrice);

  // Priority queue of nodes by f = g + h
  var open = new MinHeap();
  // Node fields:
  // { startAt, selCount:{r->k}, costSoFar, chosen:[{resource, side, idx}] }
  var startNode = { startAt: 0, selCount: {}, costSoFar: 0, chosen: [] };

  var initNeed = computeNeedLowerBound(costCount, startNode.selCount, maxProd);
  var initH = needToHeuristic(initNeed, minPrice);
  if (initH === Infinity) {return false;}

  open.push({ key: initH, node: startNode });

  var visited = {}; // key -> best g we've seen
  visited[makeVisitedKey(0, startNode.selCount, relList)] = 0;

  while (open.size() > 0) {
    var cur = open.pop().node;

    // Fast goal test: if lower bound need is 0, try verifying with isSufficient
    var needLB = computeNeedLowerBound(costCount, cur.selCount, maxProd);
    var zero = true, rr;
    for (rr in needLB) { if (needLB[rr] > 0) { zero = false; break; } }

    if (zero) {
      // Build production + chosen as singleton arrays
      var combined = production.slice();
      for (var i = 0; i < cur.chosen.length; i++) {
        combined.push([cur.chosen[i].resource]);
      }
      if (isSufficient(combined, cost)) {
        return { possible: true, totalCost: cur.costSoFar, tradesUsed: cur.chosen };
      }
      // Otherwise, conflicts in production mean we still need a trade; continue expanding
    }

    // Expand by taking next trade index or later (to keep combinations, not permutations)
    for (var tIdx = cur.startAt; tIdx < allTrades.length; tIdx++) {
      var card = allTrades[tIdx];

      // Optional pruning: if none of this card's options can reduce the LB need, skip
      var helps = false, oi;
      for (oi = 0; oi < card.options.length; oi++) {
        var opt = card.options[oi];
        // If costCount has this resource, it's *potentially* helpful
        if (costCount[opt]) { helps = true; break; }
      }
      if (!helps) {continue;}

      // Try each option for this card
      for (oi = 0; oi < card.options.length; oi++) {
        var res = card.options[oi];
        // If we already meet costCount for this resource via trades, picking more may still be needed
        // because production can re-allocate. We won't prune strictly here (keeps admissibility).

        var price = getTradePrice(p, res, card.side);
        if (price === Infinity) {continue;} // defensive

        var nextSel = {};
        // copy selCount
        for (var k in cur.selCount) {nextSel[k] = cur.selCount[k];}
        nextSel[res] = (nextSel[res] || 0) + 1;

        var g = cur.costSoFar + price;
        var need = computeNeedLowerBound(costCount, nextSel, maxProd);
        var h = needToHeuristic(need, minPrice);
        if (h === Infinity) {continue;}

        var startAtNext = tIdx + 1;
        var key = makeVisitedKey(startAtNext, nextSel, relList);
        if (visited.hasOwnProperty(key) && visited[key] <= g) {
          continue; // dominated
        }
        visited[key] = g;

        var nextNode = {
          startAt: startAtNext,
          selCount: nextSel,
          costSoFar: g,
          chosen: cur.chosen.concat([{ resource: res, side: card.side, idx: card.idx }])
        };

        open.push({ key: g + h, node: nextNode });
      }
    }
  }

  return false; // impossible
}



// score one card based off of just the card
player.prototype.scoreCard = function(card,available,allThings){

card.botScore = 0;

card.botScore += card.data.cost.length;

// reduce score if it costs gold
for(var i = 0; i < card.data.cost.length; i++){
    if(card.data.cost[i][0] === 'gold'){
        card.botScore -= 1;
    }
}

switch(card.data.type){
    case 'basic':
    case 'rare':
    // new resource
    for(var q = 0; q < card.data.produces.length;q++){
        if(allThings.indexOf(card.data.produces[q])<0){
            card.botScore += 2;
        }
    }
    if(card.data.doubleProducer){
        card.botScore += 1;
    }
    break;
    case 'civil':
        if(card.data.points >= 5){
            if(card.data.points >= 6){
                card.botScore += 2;
            }else{
                card.botScore += 1;
            }
        }
    break;
    case 'military':
    // if it would make stronger than a weaker city
    var neighbors = getLeftRight(this);
    
    for(var i = 0; i < neighbors.length; i++){
        var p = players[neighbors[i]];
        if((p.strength >= this.strength && p.strength < this.strength + card.data.strength)){
            card.botScore += 1;
        }
    }
    break;
    case 'science':
        
        var science = getScience(this);
        if(science[card.data.produces]>=1){
        card.botScore += pow(science[card.data.produces],2);
        //card.botScore += science[card.data.produces];
        }
        if(players.length === 3){
        var neighbors = getLeftRight(this);
        // denial
        for(var i = 0; i < players.length; i++){
            var science2 = getScience(players[i]);
            if(science2[card.data.produces] >= 3){
                card.botScore += 1;
            }
            var isTriplet = true;
        for(var q in science2){
            if(q !== card.data.produces){
                if(science2[card.data.produces] >= science2[q]){
                isTriplet = false;
                    
                }
            }
            
        }
        if(isTriplet){
            card.botScore += 2;
        }
        }
        }
        // triplets
        var isTriplet = true;
        for(var i in science){
            if(i !== card.data.produces){
                if(science[card.data.produces] >= science[i]){
                isTriplet = false;
                    
                }
            }
            
        }
        if(isTriplet){
            card.botScore += 3;
        }
        
        
        // avoid if other people are doing lots of science
        // actually nah can allow people to force science
        
        // var totalSimilarScience = 0;
        // for(var i = 0; i < players.length; i++){
        // var p = players[i];
        // var scienceO = getScience(p);
        // totalSimilarScience += scienceO[card.data.produces];
        // }
        // if(totalSimilarScience > age){
        //     card.botScore -= 2;
        // }
    break;
    case 'commercial':
    case 'guild':
        if(card.data.botRecommend){
            card.botScore += card.data.botRecommend(this);
        }
    break;
}
return card.botScore;
};

// score one card (include trading and elegibility)
player.prototype.reviewCard = function(card){
var available = getProduction(this);
var allThings = [];
for(var i = 0; i < available.length; i++){
    for(var q = 0; q < available[i].length; q++){
    allThings.push(available[i][q]);
    }
}
//var canBuy = canAfford(this,card.data.cost);

// base score
card.botScore = 0;
card.shouldBotZeus = false;

var canBuy = card.canBeBoughtBy(this);

// zeus stuff
if(!canBuy && this.wonderStage >= 2 && this.wonder.tag === "zeus" && !this.zeusFreeBuild){
    this.scoreCard(card,available,allThings);
    if(card.botScore > 4||this.hand.length <= 4){
        canBuy = true;
        card.shouldBotZeus = true;
    }
    card.botScore = 0;
}


if(canBuy){
    
this.scoreCard(card,available,allThings);
card.botNeededTrades = false;

}else{
// theoretical purchasing

// if duplicate, not allowed
var theoretical = false;
if(!card.checkDuplicates(this)){
theoretical = minTradeCost_AStar(card.data.cost,available, getTrades(players.indexOf(this)),this);
}

if(theoretical && this.gold >= theoretical.totalCost){

this.scoreCard(card,available,allThings);

if(this.gold-theoretical.totalCost < 4){
card.botScore -= theoretical.totalCost;
}

card.botNeededTrades = theoretical;
//println(theoretical.tradesUsed);


//  {
//     possible: true,
//     totalCost: minTotalCost,
//     tradesUsed: bestTradeResources 
//     (Array of { resource, side })
//   };


}else{

card.botScore = false;
card.botNeededTrades = false;
}



}

};

// score a wonder stage
player.prototype.reviewWonderStage = function(){
if(this.wonderStage < 3){
var available = getProduction(this);
var allThings = [];
for(var i = 0; i < available.length; i++){
    for(var q = 0; q < available[i].length; q++){
    allThings.push(available[i][q]);
    }
}

this.wonderStageBotScore = 0;

var canBuy = canAfford(this,this.wonder.stages[this.wonderStage].cost);
if(canBuy){
this.wonderStageBotScore = 2*this.wonder.stages[this.wonderStage].cost.length;
this.botNeededTradesWonder = false;
}else{

// theoretical purchasing

//var theoretical = false;
var theoretical =  minTradeCost_AStar(this.wonder.stages[this.wonderStage].cost,available, getTrades(players.indexOf(this)),this);

if(theoretical && this.gold >= theoretical.totalCost){

this.wonderStageBotScore = 2*this.wonder.stages[this.wonderStage].cost.length;

this.wonderStageBotScore -= theoretical.totalCost;
this.botNeededTradesWonder = theoretical;
//println(theoretical.tradesUsed);


//  {
//     possible: true,
//     totalCost: minTotalCost,
//     tradesUsed: bestTradeResources 
//     (Array of { resource, side })
//   };


}else{

this.wonderStageBotScore = false;
this.botNeededTradesWonder = false;
}


}
}else{
this.wonderStageBotScore = false;
this.botNeededTradesWonder = false;
}

if(this.wonderStageBotScore !== false){
    if(this.wonder.stages[this.wonderStage].botScoreMod){
        this.wonderStageBotScore += this.wonder.stages[this.wonderStage].botScoreMod(this);
        if(this.wonderStageBotScore < -100){
            this.wonderStageBotScore = false;
            this.botNeededTradesWonder = false;
        }
    }
}
};

// finalize choice based off of all scored cards
player.prototype.makeBotChoice = function(){
var best = [];
var bestScore = -Infinity;
if(!easyBots){
for(var i = 0; i<this.hand.length; i++){
    if(this.hand[i].botScore){
    if(this.hand[i].botScore > bestScore){
        best = [];
        bestScore = this.hand[i].botScore;
    }
    if(this.hand[i].botScore >= bestScore){
        best.push(i);
    }
    }
}
}else{
// easy bots, use random card with score > threshold
var threshold = (age-1)*easyBotWeight;
for(var i = 0; i<this.hand.length; i++){
    if(this.hand[i].botScore){
    if(this.hand[i].botScore >= bestScore){
        if(bestScore < threshold && this.hand[i].botScore > bestScore){
        best = [];
        }
        if(this.hand[i].botScore >= threshold){
        bestScore = threshold;
        }else{
        bestScore = this.hand[i].botScore;
        }
    }
    if(this.hand[i].botScore >= bestScore){
        best.push(i);
    }
    }
}
}

if((this.wonderStageBotScore !== false) && this.wonderStage < 3){
    if(this.wonderStageBotScore > bestScore){
        best = [];
        bestScore = this.wonderStageBotScore;
        this.choice = {
            descript:"Player built a wonder stage",
            arrow:{x:345+70*this.wonderStage,y:415},
            card:this.hand[floor(random(0,this.hand.length))],
            player:this,
            action:buildWonder,
            trades:this.botNeededTradesWonder,
        };
    }
}

if(best.length >= 1){
    var a = floor(random(0,best.length));
    //println(this.hand[best[a]].botNeededTrades);
    this.choice = {
        descript:"Player built a structure",
        arrow:{x:175,y:415},
        card:this.hand[best[a]],
        player:this,
        action:buildCard,
        tag:"build",
        trades:this.hand[best[a]].botNeededTrades,
    };
}

if(bestScore <= 0 || (easyBots&&bestScore<0)){
    if(this.gold < 3 || best.length === 0){
        this.choice = {
            descript:"Player burned a card",
            arrow:{x:95,y:415},
            card:this.hand[floor(random(0,this.hand.length))],
            player:this,
            action:burnCard,
        };
    }
}

// zeus
if(this.choice.card.shouldBotZeus && this.choice.tag === "build"){
    this.zeusFreeBuild = true;
    this.freeBuild = true;
}


if(this.choice.card){
    this.choice.card.revealed = true;
}

this.boardSave = false;


};

function doChoice(p){
if(p.choice){

if(p.choice.trades){
p.gold -= p.choice.trades.totalCost;
    for(var i = 0; i < p.choice.trades.tradesUsed.length; i++){
        var trade = p.choice.trades.tradesUsed[i];
        var traderIndex = players.indexOf(p);
        if(trade.side === 0){
            traderIndex++;
        }else{
            traderIndex--;
        }
        //println(trade.side);
        if(traderIndex >= players.length){
            traderIndex -= players.length;
        }
        if(traderIndex < 0){
            traderIndex += players.length;
        }
        var trader = players[traderIndex];
        var amt = getTradePrice(p,trade.resource,trade.side);
        trader.gold += amt;
        trader.boardSave = false;
        p.tradePool.push(trade.resource);
    }
}

if(p.toGiveGold){
    for(var i = 0; i < p.toGiveGold.length; i++){
        p.toGiveGold[i].traderPlayer.gold += p.toGiveGold[i].amt;
        p.toGiveGold[i].traderPlayer.boardSave = false;
    }
}

p.choice.action(p.choice.card,p);
p.choice = false;
}
}

function clearHands(){
    for(var i = 0; i < players.length; i++){
        for(var q = 0; q < players[i].hand.length; q++){
            discardedCards.push(players[i].hand[q]);
        }
        players[i].hand = [];
    }
}
function refreshCard(card,player){
if(age === 2){
card.x = 0;
card.dx = 0;
}else{
card.x = 600;
card.dx = 600;
}
card.y = 535;
card.dy = 535;
card.checkEvos(player);
card.checkDuplicates(player);
}
function refreshPlayer(p){
        p.trades = getTrades(players.indexOf(p));
        p.hand = [];
        p.toGiveGold = [];
        p.tradePool = [];
        p.costCache = false;
        p.costCacheReturn = false;
        p.choice = false;
        p.freeBuild = false;
        p.boardSave = false;
}
function setHands(){
    var deck = [];
    for(var i = 0; i < players.length-2; i++){
        if(cardAmts[age-1][i]){
        deck = deck.concat(cardAmts[age-1][i]);
        }
    }
    var guildDeck = [];
    for(var i = 0; i < guildIds.length; i++){
        guildDeck.push(guildIds[i]);
    }
    guildDeck = shuffleArray(guildDeck);
    if(age === 3){
        for(var i = 0; i < players.length+2; i++){
            if(guildDeck[i]){
            deck.push(guildDeck[i]);
            }
        }
    }
    if(deck.length !== players.length*7){
        //println('error with deckmaking');
        while(deck.length < players.length*7){
            deck.push(cardAmts[age-1][0][floor(random(0,cardAmts[age-1][0].length))]);
        }
    }
    deck = shuffleArray(deck);
    

    for(var i = 0; i < players.length; i++){
        players[i].hand = [];
        for(var q = 0; q < 7; q++){
            var card = new structure(deck[0]);
            deck.splice(0,1);
            refreshCard(card,players[i]);
            players[i].hand.push(card);
        }
        players[i].boardSave = false;
    }
}



var showingWar = false;
var warStep = 0;
var tallying = false;
var tallyingQ = [];
var tallyAnim = 0;

function cycleHands(){
    
    var newAge = false;
    if(players[0].hand.length <= 1){
        age++;
        if(age !== 1){
        showingWar = true;
        initializedNodes = false;
        warStep = 0;
        clearHands();
        }
        newAge = true;
    }
    
    m.hold = false;
    m.lastHeld = false;
    var hands = [];
    for(var i = 0; i < players.length; i++){
        hands.push([]);
        for(var q = 0; q < players[i].hand.length; q++){
            hands[i].push(players[i].hand[q]);
        }
    }
    for(var i = 0; i < players.length; i++){
        refreshPlayer(players[i]);
        var num = i;
        if(age === 1||age === 3){
            num--;
        }else{
            num++;
        }
        if(num >= hands.length){
        num = 0;
        }
        if(num < 0){
        num = hands.length-1;
        }
        for(var q = 0; q < hands[num].length; q++){
            refreshCard(hands[num][q],players[i]);
            players[i].hand.push(hands[num][q]);
        }
    }
    
    if(newAge){
        for(var i = 0; i < players.length; i++){
            for(var q = 0; q < 3; q++){
                if(players[i].wonder.stages[q].ageStart){
                    players[i].wonder.stages[q].ageStart(players[i]);
                }
            }
        }
    }
    
}

var tallyIndex = 0;
function endGame(){
for(var i = 0; i < players.length; i++){
    if(i !== 0){
    tallyingQ.push(players[i]);
    }
    players[i].boardSave = false;
}
tallyingQ.push(players[0]);
tallyAnim = 0;
tallyIndex = 0;
initializedNodes = false;
tallying = true;
scene = 'tallyPlayers';
}


var numPlayers = 7;
var bonusPlayersAnim = 0;

var pWonderSelect = 0;
var pWonderSelectAnim = 0;
var wonderSelectInfoAnim = 0;
var pRandomWonder = false;

function initGame(){
scene = 'game';
discardedCards = [];
players = [];
age = 1;
showingWar = false;
doTurn = false;
awaitingEffects = [];
activeView = 0;
pView = 0;
selectP = false;
m.hold = false;
m.lastHeld = false;
tallying = false;
initializedNodes = false;

m = {
hold:false,
lastHeld:false,
px:0,
py:0,
};

cam = {
x:0,
y:0,
scale:1,
rot:0,
};

var wonderDeck = [];
for(var i = 0; i < allWonders.length; i++){
    if(i !== pWonderSelect || pRandomWonder){
    wonderDeck.push(allWonders[i]);
    }
}
while(wonderDeck.length < numPlayers-1 ||(pRandomWonder && wonderDeck.length < numPlayers)){
    wonderDeck.push(allWonders[floor(random(0,allWonders.length))]);
}
wonderDeck = shuffleArray(wonderDeck);

// guarantee player gets wanted wonder

for(var i = 0; i < numPlayers; i++){
var p = new player();
if(i !== 0 || pRandomWonder){
p.wonder = wonders[wonderDeck[0]];
wonderDeck.splice(0,1);
}else{
p.wonder = wonders[allWonders[pWonderSelect]];
}
p.wonderStage = 0;
p.gold = 3;
// p.structures.science.push(new structure(allTypes[45]));
// p.structures.science.push(new structure(allTypes[45]));
// p.structures.science.push(new structure(allTypes[45]));
// p.structures.science.push(new structure(allTypes[44]));
// p.structures.science.push(new structure(allTypes[44]));
// p.structures.science.push(new structure(allTypes[44]));
// p.structures.science.push(new structure(allTypes[44]));
// for(var q = 0; q < 18; q++){
// p.structures.science.push(new structure(allTypes[43]));
// }
}
for(var i = 0; i < players.length; i++){
    refreshPlayer(players[i]);
}
setHands();
}

//initGame();
//endGame();
// for(var i = 0; i < 5; i++){
//     var p = new player();
//     p.wonder = wonders["the mausoleum of halicarnassus"];
//     p.wonderStage = 1;
//     for(var q = 0; q < 2; q++){
// p.hand.push(new structure(allTypes[floor(random(0,60))]));
//     }
//     for(var q = 0; q < 1; q++){
//         p.structures[types[allTypes[0]].type].push(new structure("foundry"));
//     }
    
//   // p.structures[types[allTypes[26]].type].push(new structure(allTypes[26]));
// }
// players[0].structures.military.push(new structure("walls"));
// players[0].structures.basic.push(new structure("foundry"));
// players[0].structures.guild.push(new structure("forum"));
// players[0].structures.guild.push(new structure("forum"));
// players[0].structures.guild.push(new structure("forum"));


// for(var q = 1; q < 36; q++){
//     discardedCards.push(new structure(allTypes[allTypes.length-q]));
// }
//scene = 'mausoleumEffect';

var showingTurns = false;
var showingQ = [];
var botChoiceIndex = [1,0];

var boardZoom = true;

function passTurn(){
// get bot choices, activate all choices, do card effects, cycle hands
if(players[0].choice){
    for(var i = 0; i < players.length; i++){
players[i].strength = calculateTotalStrength(players[i]);
    }
// for(var i = 1; i < players.length; i++){
//     players[i].makeBotChoice();
// }
scene = 'botChoices';
botChoiceIndex = [1,0];

showingQ = [];
awaitingEffects = [];
showingTurns = true;
for(var i = 0; i < players.length; i++){
    showingQ.push(players[i]);
}


// for(var i = 0; i < players.length; i++){
//     doChoice(players[i]);
// }

// for(var i = 0; i < awaitingEffects.length; i++){
//     awaitingEffects[i][0].data.effect(awaitingEffects[i][1]);
// }
// awaitingEffects = [];

// cycleHands();
}else{
println('make a choice');
}
}



// cycleHands();
// players[0].choice = {
//     descript:"Player burned a card",
//     arrow:{x:95,y:415},
//     card:players[0].hand[0],
//     player:players[0],
//     action:burnCard,
// };
// passTurn();

var needChoiceAnim = 0;

function drawPlayerHand(pIndex,highlight,snapshot){
    if(!snapshot){
    var alph;
    if(selectP){
        alph = constrain((1-cam.scale)*500,0,200);
    }else{
        alph = constrain(200*(abs(cam.scale-1)*100),0,200);
    }
    
    if(players[pIndex].wonder){
    if(players[pIndex].wonder.bg){
        noStroke();
        fill(players[pIndex].wonder.bg);
        rect(0,0,600,600,4*alph/200);
    }
    if(players[pIndex].wonder.addArt){
        players[pIndex].wonder.addArt(4*alph/200);
    }
    if(wonderImgs[players[pIndex].wonder.id]){
        //pushMatrix();
        image(wonderImgs[players[pIndex].wonder.id],0,0,600,600);
        //popMatrix();
    }
    }
    
    
    fill(176, 176, 176,alph);
    stroke(107, 107, 107, alph);
    if(pIndex === 0){
    fill(205, 232, 199,alph);
    stroke(132, 191, 118,alph);
    }
    strokeWeight(2);
    rect(0,0,600,600,4);
    }
    
    if(highlight || !players[pIndex].boardSave){
        
   // view other players
    // if(!(selectP||showingTurns||showingWar||tallying) && pIndex === activeView){
    if(true){
    stroke(0,0,0);
    strokeWeight(2);
    if(msx >= 540 && msx <= 590 && msy >= 415 && msy <= 465 && !(selectP||showingTurns||showingWar||tallying) && pIndex === activeView){
        cursor(HAND);
        fill(212, 212, 212);
        if(clicked){
            players[pIndex].boardSave = false;
            selectP = true;
            clicked = false;
            mousePressed = false; 
            m.hold = false;
            //initializedNodes = false;
        }
    }else{
    fill(242, 242, 242);
    }
    rect(540,415,50,50,4);
    pushMatrix();
    translate(565,443);
    noFill();
    arc(0,-12,40,40,35,145);
    arc(0,12,40,40,215,325);
    ellipse(0,0,15,15);
    for(var i = 0; i < 5; i++){
        var a = 180+(180/5)*(i+0.5);
        line(cos(a)*15,sin(a)*7-2,cos(a)*18,sin(a)*13-2);
    }
    popMatrix();
    }
    // player turn options {
    
    // military record
    strokeWeight(2);
    stroke(0, 0, 0);
    noFill();
    //rect(490,230,100,100,4);
    pushMatrix();
    translate(565,295);
     noStroke();
        fill(201, 201, 201,180);
        var a = -players[pIndex].record[0];
        var a2 = ((a.toString()).length-1)*12+22;
        rect(-12-a2,-20,a2,24,4);
    skull();
    textAlign(RIGHT,BASELINE);
    textSize(20);
    fill(0,0,0);
    textCompatible(a,-16,0);
    popMatrix();
    pushMatrix();
    translate(565,315);
    noStroke();
        fill(201, 201, 201,180);
        var a = getWinPoints(players[pIndex]);
        var a2 = ((a.toString()).length-1)*12+22;
        rect(-12-a2,-10,a2,24,4);
    trophy();
    textAlign(RIGHT,BASELINE);
    textSize(20);
    fill(0,0,0);
    textCompatible(a,-16,10);
    popMatrix();
    
     // wonder slots {
    strokeWeight(2);
    stroke(107, 107, 107);
    fill(255, 239, 166);
    rect(300,360,230,110,4);
    
    strokeWeight(2);
    stroke(107, 107, 107);
    fill(140, 140, 140);
    rect(310,365,70,100,4);
    strokeWeight(2);
    stroke(107, 107, 107);
    fill(140, 140, 140);
    rect(380,365,70,100,4);
    strokeWeight(2);
    stroke(107, 107, 107);
    fill(140, 140, 140);
    rect(450,365,70,100,4);
    
    for(var i = 2; i > -1; i--){
        drawWonderStage(345+70*i,415,players[pIndex],i);
    }
    if(viewBotScores){
        textAlign(CENTER,BASELINE);
        textSize(20);
        fill(0,0,0);
        textCompatible(players[pIndex].wonderStageBotScore,345,355);
    }
    
    // starter resource
    var resource = players[pIndex].wonder.starter[0];
    strokeWeight(2);
    stroke(0, 0, 0);
    if(resource === "glass"||resource === "papyrus"||resource === "textiles"){
    fill(colorMap.rare);
    }else{
    fill(colorMap.basic);
    }
    rect(300,440,30,30,4);
    pushMatrix();
    translate(315,455);
    resourceSymbols[resource]();
    popMatrix();
    
    // wonder info
    strokeWeight(2);
    stroke(0, 0, 0);
    fill(201, 201, 201);
    rect(300,410,30,30,4);
    fill(0,0,0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    textCompatible("?",315,433);
    // }
    
    noStroke();
    fill(240, 174, 8);
    rect(60,365,70,100,4);
    image(textures.marble,60+1,365+1,69,99);
    strokeWeight(2);
    stroke(230, 138, 0);
    stroke(107, 107, 107);
    noFill();
    rect(60,365,70,100,4);
    
    noStroke();
    fill(140, 140, 140);
    rect(140,365,70,100,4);
    image(textures.rock,140+1,365+1,69,99);
    strokeWeight(2);
    stroke(107, 107, 107);
    noFill();
    rect(140,365,70,100,4);
    
    // trade
    if(pIndex === 0 && msx >= 220 && msx <= 290 && msy >= 365 && msy <= 465){
        cursor(HAND);
        if(clicked){
        scene = 'trade';
        clicked =  false;
        }
    fill(242, 218, 153);
    }else{
    fill(232, 204, 127);
    }
    strokeWeight(2);
    stroke(107, 107, 107);
    rect(220,365,70,100,4);
    pushMatrix();
    translate(255,415);
    for(var i = 0; i < players[pIndex].tradePool.length; i++){
        pushMatrix();
        var a = 50/(players[pIndex].tradePool.length);
        translate(-25+(i+0.5)*a,22);
        scale(0.8);
        resourceSymbols[players[pIndex].tradePool[i]]();
        popMatrix();
    }
    popMatrix();
    
    
    textAlign(CENTER,BASELINE);
    fill(0,0,0);
    textSize(13);
    textCompatible('Burn\n+3 Gold',95,415);
    textSize(11);
    textCompatible('Build\nStructure',175,415);
    textSize(10);
    textCompatible('Current\nresources:',255,406);
    if(players[pIndex].tradePool.length===0){
        textCompatible('None',255,435);
    }
    textSize(14);
    textCompatible('Trade',255,390);
    if(pIndex === 0){
    // confirm
    stroke(0,0,0);
    strokeWeight(2);
    if(msx >= 540 && msx <= 590 && msy >= 360 && msy <= 410){
        if(players[0].choice){
        cursor(HAND);
        fill(138, 235, 190);
        if(clicked){
            clicked = false;
            mousePressed = false;
            m.hold = false;
            passTurn();
        }
        }else{
        cursor("not-allowed");
        fill(143, 255, 205);
        needChoiceAnim = lerp(needChoiceAnim,1,0.2);
        }
    }else{
    fill(143, 255, 205);
    needChoiceAnim = lerp(needChoiceAnim,0,0.2);
    }
    rect(540,360,50,50,4);
    noFill();
    stroke(4, 196, 65);
    strokeWeight(2);
    beginShape();
    vertex(568,379);
    vertex(550,379);
    vertex(550,391);
    vertex(568,391);
    vertex(568,400);
    vertex(582,385);
    vertex(568,370);
    endShape(CLOSE);
    pushMatrix();
    translate(565,385);
    rotate(-45);
    noFill();
    stroke(255, 23, 23);
    strokeWeight(5);
    var needChoiceAnimA = constrain((needChoiceAnim-0.1)*(1/0.9),0,1);
    arc(0,0,45,45,0,360*needChoiceAnimA);
    //rotate(90);
    if(needChoiceAnimA > 0){
    line(45/2,0,45/2-(45)*needChoiceAnimA,0);
    }
    popMatrix();
    }
     // }
    

    stroke(107, 107, 107);
    strokeWeight(2);
    fill(140, 140, 140);
    rect(5,475,590,120,4);
    
    players[pIndex].gold = round(players[pIndex].gold);
    pushMatrix();
    translate(30,446);
    scale(1.2*3/2);
    resourceSymbols.gold(players[pIndex].gold);
    popMatrix();
    
    // total strength
    var totalStrength = calculateTotalStrength(players[pIndex]);
    pushMatrix();
    translate(30,400);
    scale(1.5);
    strengthSymbol();
    noStroke();
    fill(181, 181, 181,150);
    ellipse(0,0,18,18);
    textAlign(CENTER,BASELINE);
    textSize(14);
    fill(0,0,0);
    textCompatible(totalStrength,0,5);
    popMatrix();
    
    var toDraw = [];
    
    for(var i = players[pIndex].hand.length-1; i > -1; i--){
        var card = players[pIndex].hand[i];
        if(pIndex === 0){
        card.revealed = true;
        card.shopBehavior();
        }
        if(players[pIndex].hand.indexOf(card)>=0){
        
        card.x=10+(580/(players[pIndex].hand.length))*(i+0.5);
        card.y=535;
        if(snapshot){
            if(pIndex === 0){
            card.savedx = card.dx;
            card.savedy = card.dy;
            }
            card.dx = card.x;
            card.dy = card.y;
        }
        if(card !== m.hold){
        card.physics();
        toDraw.push(card);
        }
        if(viewBotScores){
        textAlign(CENTER,BASELINE);
        textSize(20);
        fill(0,0,0);
        textCompatible(card.botScore,card.x,630);
        }
        }
    }
    
    
    var drawLastHeld = false;
    for(var i = 0; i < toDraw.length; i++){
        if(toDraw[i] !== m.lastHeld){
            toDraw[i].draw();
            if(toDraw[i].savedx||toDraw[i].savedx === 0){
                toDraw[i].dx = toDraw[i].savedx;
                toDraw[i].dy = toDraw[i].savedy;
                toDraw[i].savedx = false;
                toDraw[i].savedy = false;
            }
        }else{
            drawLastHeld = true;
        }
    }
    if(m.lastHeld&&drawLastHeld){
        if(m.lastHeld.IDENTIFIER === 'structure'){
            m.lastHeld.draw();
            if(m.lastHeld.savedx||m.lastHeld.savedx === 0){
                m.lastHeld.dx = m.lastHeld.savedx;
                m.lastHeld.dy = m.lastHeld.savedy;
                m.lastHeld.savedx = false;
                m.lastHeld.savedy = false;
            }
        }
    }
    
    if(players[pIndex].choice){
        stroke(224, 58, 58);
        strokeWeight(6);
        var card = players[pIndex].choice.card;
        var end = players[pIndex].choice.arrow;
        var a = atan2(end.y-card.dy,end.x-card.dx);
        //line(card.dx,card.dy,end.x,end.y);
        var a2 = 30;
        var num = 7;
        var d = dist(card.dx,card.dy,end.x,end.y);
        var d2 = dist(card.x,card.y,end.x,end.y);
        var alph = (d/d2)*255;
        if(snapshot){
            alph = 255;
        }
        for(var i = 0; i < num-1; i++){
        var at = (frameCount*2-i*30);
        if(snapshot){
            at = -i*30;
        }
        var a3 = (-i*(d/(num-1))+(num*2)*(i/num))+sin(at-20*sin(at))*(i*(d/num)*0.05);
        var ax = cos(a)*a3;
        var ay = sin(a)*a3;
        var ax2 = cos(a)*(a3-1);
        var ay2 = sin(a)*(a3-1);
        var al = 20-i*(20/num);
        if(i !== 0){
        vertex(end.x+cos(a+180-a2)*al+ax2,end.y+sin(a+180-a2)*al+ay2);
        vertex(end.x+ax2,end.y+ay2);
        vertex(end.x+cos(a+180+a2)*al+ax2,end.y+sin(a+180+a2)*al+ay2);
        endShape(CLOSE);
        }
        
        stroke(224, 58, 58);
        strokeWeight(6);
        //line(end.x+ax,end.y+ay,end.x+cos(a+180-a2)*al+ax,end.y+sin(a+180-a2)*al+ay);
        //line(end.x+ax,end.y+ay,end.x+cos(a+180+a2)*al+ax,end.y+sin(a+180+a2)*al+ay);
        
        noStroke();
        fill(205-(55/num)*i, 40+(200/num)*i, 0, alph);
        beginShape();
        vertex(end.x+cos(a+180+a2)*al+ax,end.y+sin(a+180+a2)*al+ay);
        vertex(end.x+ax,end.y+ay);
        vertex(end.x+cos(a+180-a2)*al+ax,end.y+sin(a+180-a2)*al+ay);
        
        }
        vertex(card.dx,card.dy);
        endShape();
        
        noFill();
        stroke(0, 0, 0, alph);
        strokeWeight(2);
        beginShape();
        vertex(end.x,end.y);
        vertex(end.x+cos(a+180-a2)*20,end.y+sin(a+180-a2)*20);
        vertex(card.dx,card.dy);
        vertex(end.x+cos(a+180+a2)*20,end.y+sin(a+180+a2)*20);
        endShape(CLOSE);
        
    }
    
    if(!m.hold){
    for(var i = 0; i < toDraw.length; i++){
        if(toDraw[i].infoCardShow){
        toDraw[i].infoCard();
        }
    }
    }
    }else{
    if(players[pIndex].boardSave){
        image(players[pIndex].boardSave,0,0);
    }
    }
}
function drawPlayerStuff(pIndex,highlight,snapshot){
    
    if(highlight || !players[pIndex].boardSave){
    var toDraw = [];
    
    var sTypeNum = 0;
    var cNum = 0;
    for(var i in players[pIndex].structures){
        for(var q = 0; q < players[pIndex].structures[i].length;q++){
            var card = players[pIndex].structures[i][q];
            card.x = 45+cNum*80-((80*7)*floor(cNum/7));
            card.y = 60+((110)*floor(cNum/7));
            card.revealed = true;
            if(snapshot){
            card.dx = card.x;
            card.dy = card.y;
            }
            card.physics();
            toDraw.push(card);
            cNum++;
        }
        
        sTypeNum++;
    }
    
    var drawLastHeld = false;
    for(var i = 0; i < toDraw.length; i++){
        if(toDraw[i] !== m.lastHeld){
            toDraw[i].draw();
        }else{
            drawLastHeld = true;
        }
    }
    if(m.lastHeld&&drawLastHeld){
        if(m.lastHeld.IDENTIFIER === 'structure'){
            m.lastHeld.draw();
        }
    }
    if(!m.hold){
    for(var i = 0; i < toDraw.length; i++){
        if(toDraw[i].infoCardShow){
        toDraw[i].infoCard();
        }
    }
    }
    }
}

function initBoardSave(pIndex){
background(255, 255, 255);
background(255, 255, 255,0);
drawPlayerHand(pIndex,true,true);
drawPlayerStuff(pIndex,true,true);
players[pIndex].boardSave = get(0,0,600,600);
}


// node stuff
function buildNeighbors(nodeList) {
  var n = nodeList.length;

  var nodesByX = nodeList.slice().sort(function(a, b) {
    if (a.x === b.x) {return a.y - b.y;}
    return a.x - b.x;
  });

  var nodesByY = nodeList.slice().sort(function(a, b) {
    if (a.y === b.y) {return a.x - b.x;}
    return a.y - b.y;
  });
  
  function dist2(a, b, dir) {
  var dx = b.x - a.x;
  var dy = b.y - a.y;
  var weight = 3;

  if (dir === "left" || dir === "right") {
    return dx * dx + weight * (dy * dy);
  }
  if (dir === "up" || dir === "down") {
    return dy * dy + weight * (dx * dx);
  }
  return dx * dx + dy * dy; 
}

  for (var i = 0; i < n; i++) {
    nodeList[i].left = null;
    nodeList[i].right = null;
    nodeList[i].up = null;
    nodeList[i].down = null;
  }

  for (var i = 0; i < n; i++) {
    var node = nodesByX[i];
    var bestLeft = null, bestRight = null;
    var bestLeftDist = Infinity, bestRightDist = Infinity;

    // Look left
    for (var j = i - 1; j >= 0; j--) {
      if (nodesByX[j].x < node.x) {
        var d = dist2(node, nodesByX[j],"left");
        if (d < bestLeftDist) {
          bestLeftDist = d;
          bestLeft = nodesByX[j];
        }
        if ((node.x - nodesByX[j].x) * (node.x - nodesByX[j].x) > bestLeftDist) {break;}
      }
    }

    // Look right
    for (var k = i + 1; k < n; k++) {
      if (nodesByX[k].x > node.x) {
        var d2 = dist2(node, nodesByX[k],"right");
        if (d2 < bestRightDist) {
          bestRightDist = d2;
          bestRight = nodesByX[k];
        }
        if ((nodesByX[k].x - node.x) * (nodesByX[k].x - node.x) > bestRightDist) {break;}
      }
    }

    node.left = bestLeft;
    node.right = bestRight;
  }

  for (var i = 0; i < n; i++) {
    var nodeY = nodesByY[i];
    var bestDown = null, bestUp = null;
    var bestDownDist = Infinity, bestUpDist = Infinity;

    // Look down
    for (var j = i - 1; j >= 0; j--) {
      if (nodesByY[j].y < nodeY.y) {
        var d3 = dist2(nodeY, nodesByY[j],"down");
        if (d3 < bestDownDist) {
          bestDownDist = d3;
          bestDown = nodesByY[j];
        }
        if ((nodeY.y - nodesByY[j].y) * (nodeY.y - nodesByY[j].y) > bestDownDist) {break;}
      }
    }

    // Look up
    for (var k = i + 1; k < n; k++) {
      if (nodesByY[k].y > nodeY.y) {
        var d4 = dist2(nodeY, nodesByY[k],"up");
        if (d4 < bestUpDist) {
          bestUpDist = d4;
          bestUp = nodesByY[k];
        }
        if ((nodesByY[k].y - nodeY.y) * (nodesByY[k].y - nodeY.y) > bestUpDist) {break;}
      }
    }

    nodeY.down = bestDown;
    nodeY.up = bestUp;
  }

  return nodeList;
}
function updateNodes(){
    buildNeighbors(nodeList);
    for(var i = 0; i < nodeList.length; i++){
        nodeList[i].toNodes = [
            nodeList[i].left,
            nodeList[i].down,
            nodeList[i].right,
            nodeList[i].up,
            ];
        
    }
}
var nearestNode = 0;
var nodeSets = {
    "mausoleumEffect":function(){
        var down = min(110,550/(floor((discardedCards.length-1)/7)+1));
        var cNum = 0;
    for(var q = 0; q < discardedCards.length;q++){
        nodeList.push({
        x:45+cNum*80-((80*7)*floor(cNum/7)),
        y:60+((down)*floor(cNum/7)),
        });
        cNum++;
    }
    },
    "trade":function(){
    for(var q = 0; q < 2; q++){
        for(var i = players[0].trades[q].length-1; i > -1;i--){
        for(var w = players[0].trades[q][i].length-1; w > -1; w--){
        if(players[0].trades[q][i]){
        nodeList.push({
        x:50+w*50+q*305+35,
        y:124+i*25+15,
        });
        }
        }
        }
    }
    nodeList.push({
        x:300,
        y:157,
        });
    },
    "menu":function(){
        nodeList.push({
        x:300,
        y:520,
        });
        nodeList.push({
        x:120,
        y:540,
        });
        nodeList.push({
        x:480,
        y:540,
        });
    },
    "settings":function(){
        nodeList.push({
        x:120,
        y:540,
        });
        nodeList.push({
        x:120,
        y:170,
        });
        nodeList.push({
        x:480,
        y:170,
        });
        if(numPlayers >= 7){
        nodeList.push({
        x:530,
        y:170,
        });
        }
        nodeList.push({
        x:120,
        y:230,
        });
        nodeList.push({
        x:480,
        y:230,
        });
        nodeList.push({
        x:480,
        y:290,
        });
        nodeList.push({
        x:480,
        y:350,
        });
        nodeList.push({
        x:480,
        y:410,
        });
        if(pScene === "game"){
        nodeList.push({
        x:540,
        y:540,
        });
        }
    },
    "confirmQuitGame":function(){
        nodeList.push({
        x:120,
        y:400,
        });
        nodeList.push({
        x:480,
        y:400,
        });
    },
    "tutorialPage":function(){
        nodeList.push({
        x:480,
        y:540,
        });
        nodeList.push({
        x:300,
        y:300,
        });
    },
    "tutorial":function(){
    nodeList.push({
        x:300,
        y:520,
        });
    },
    "chooseWonder":function(){
        
        nodeList.push({
        x:120,
        y:480,
        });
        
        nodeList.push({
        x:120,
        y:50,
        });
        nodeList.push({
        x:480,
        y:50,
        });
        if(numPlayers >= 7){
        nodeList.push({
        x:530,
        y:50,
        });
        }
        
        nodeList.push({
        x:100,
        y:300,
        });
        nodeList.push({
        x:500,
        y:300,
        });
        
        nodeList.push({
        x:430,
        y:495,
        });
        
        nodeList.push({
        x:120,
        y:560,
        });
        nodeList.push({
        x:480,
        y:560,
        });
    },
    "game":function(){
    if(selectP||showingTurns||showingWar||tallying){
    if(selectP){
    var w = 620;
    //println('e');
    for(var i = 0; i < players.length; i++){
        var a = (360/players.length)*i+90;
        nodeList.push({
        x:300+cos(a)*w,
        y:160+sin(a)*w,
        });
    }
    
    }else if(showingWar||showingTurns){
    nodeList.push({
        x:300,
        y:300,
        });
    if(showingTurns){
    nodeList.push({
        x:565,
        y:565,
        });
    }
    nodeList.push({
        x:35,
        y:565,
        });
    }else if(tallying){
    nodeList.push({
        x:300,
        y:300,
        });
    nodeList.push({
        x:565,
        y:565,
        });
    nodeList.push({
        x:35,
        y:565,
        });
    }
    }else{
    if(activeView === 0){
    // pass turn
    nodeList.push({
        x:540+25,
        y:360+25,
        });
    // settings
    nodeList.push({
        x:430,
        y:347,
        });
    // wonders
    for(var i = 2; i > -1; i--){
    if(i === players[activeView].wonderStage|| (players[activeView].wonderStage > i && players[activeView].wonder.stages[i].clickable && players[activeView].wonder.stages[i].clickable(players[activeView]))){
        nodeList.push({
        x:345+70*i,
        y:415,
        });
    }
    }
    // other actions
    nodeList.push({
        x:60+35,
        y:365+50,
        });
    nodeList.push({
        x:140+35,
        y:365+50,
        });
    nodeList.push({
        x:220+35,
        y:365+50,
        });
    }
    // view players
    nodeList.push({
        x:565,
        y:440,
        });
    // wonder info
    nodeList.push({
        x:300+15,
        y:410+15,
        });
        
    // cards
    for(var i = players[activeView].hand.length-1; i > -1; i--){
        nodeList.push({
        x:10+(580/(players[activeView].hand.length))*(i+0.5),
        y:535,
        });
    }
    var cNum = 0;
    for(var i in players[activeView].structures){
        for(var q = 0; q < players[activeView].structures[i].length;q++){
            nodeList.push({
        x:45+cNum*80-((80*7)*floor(cNum/7)),
        y:60+((110)*floor(cNum/7)),
        });
            cNum++;
        }
    }
    
    }
    },
    };

function manageNodeInitialization(){
    if(initializedNodes !== scene){
        nodeList = [];
        if(nodeSets[scene]){
            nodeSets[scene]();
            updateNodes();
        }
        initializedNodes = scene;
    }
}

var frameRateSetting = 60;

function button(x,y,w,h){
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
    this.anim = 0;
    this.lastDrawn = 0;
}
button.prototype.draw = function() {
    
    if(frameCount > this.lastDrawn+1){
        this.anim = 0;
    }
    this.lastDrawn = frameCount;
    
    if(msx >= this.x - this.w/2 && msx <= this.x + this.w/2 && msy >= this.y - this.h/2 && msy < this.y + this.h/2 ){
        cursor(HAND);
        if(clicked){
            if(this.onClick){
                this.onClick();
            }
            clicked = false;
        }
        this.anim = lerp(this.anim,1,0.1);
    }else{
        this.anim = lerp(this.anim,0,0.1);
    }
    
    if(this.art){
        pushMatrix();
        translate(this.x,this.y);
        this.art(this.anim);
        popMatrix();
    }
};

var startButton = new button(300,520,100,30);
startButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-50,-15,100,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(22);
    var a = "START";
    var a2 = 13+anim*8;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
startButton.onClick = function(){
scene = "chooseWonder";
doTransitionFrom(0,600);

if(tutorialData.active){
    tutorialData.scene++;
    tutorialData.anim = 0;
}
};

var settingsButton = new button(480,540,120,30);
settingsButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-60,-15,120,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    var a = "SETTINGS";
    var a2 = 12+anim*8;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
settingsButton.onClick = function(){
scene = "settings";
doTransitionFrom(-600,0);
};

var frameRatePlus = new button(480,230,40,40);
frameRatePlus.art = function(anim){
    noStroke();
    fill(150-anim*30);
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(23, 23, 23);
    text("+",0,10);
};
frameRatePlus.onClick = function(){
frameRateSetting = constrain(frameRateSetting+10,40,240);
frameRateSetting = round(frameRateSetting);
frameRate(frameRateSetting);
};
var frameRateMinus = new button(120,230,40,40);
frameRateMinus.art = function(anim){
    noStroke();
    fill(150-anim*30);
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(23, 23, 23);
    text("-",0,10);
};
frameRateMinus.onClick = function(){
frameRateSetting = constrain(frameRateSetting-10,40,240);
frameRateSetting = round(frameRateSetting);
frameRate(frameRateSetting);
};

var numPlayersPlus = new button(480,170,40,40);
numPlayersPlus.art = function(anim){
    noStroke();
    fill(150-anim*30*(1-bonusPlayersAnim));
    rect(-20,-20,40,40,4+(anim*8)*(1-bonusPlayersAnim));
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(23+(bonusPlayersAnim)*100);
    text("+",0,10);
};
numPlayersPlus.onClick = function(){
    numPlayers++;
    numPlayers = constrain(numPlayers,3,7);
    numPlayers = round(numPlayers);
    if(numPlayers >= 7){
        initializedNodes = false;
    }
};
var numPlayersMinus = new button(120,170,40,40);
numPlayersMinus.art = function(anim){
    noStroke();
    fill(150-anim*30);
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(23, 23, 23);
    text("-",0,10);
};
numPlayersMinus.onClick = function(){
    numPlayers--;
    numPlayers = constrain(numPlayers,3,99);
    numPlayers = round(numPlayers);
    if(numPlayers === 6){
        initializedNodes = false;
    }
};
var numPlayersPlusBonus = new button(700,170,40,40);
numPlayersPlusBonus.art = function(anim){
    noStroke();
    fill(120-anim*30);
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(237, 178, 0);
    text("+",0,10);
};
numPlayersPlusBonus.onClick = function(){
    numPlayers++;
    numPlayers = constrain(numPlayers,3,99);
    numPlayers = round(numPlayers);
};

var wonderSelectPlus = new button(500,300,60,60);
wonderSelectPlus.art = function(anim){
    stroke(23);
    strokeWeight(5);
    fill(150-anim*30);
    rect(-30,-30,60,60,4+anim*8);
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(23, 23, 23);
    text(">",0,10);
};
wonderSelectPlus.onClick = function(){
pWonderSelect++;
pWonderSelect = round(pWonderSelect);
if(pWonderSelect > allWonders.length-1){
    pWonderSelect = 0;
}
};
var wonderSelectMinus = new button(100,300,60,60);
wonderSelectMinus.art = function(anim){
    stroke(23);
    strokeWeight(5);
    fill(150-anim*30);
    rect(-30,-30,60,60,4+anim*8);
    textAlign(CENTER,BASELINE);
    textSize(30);
    fill(23, 23, 23);
    text("<",0,10);
};
wonderSelectMinus.onClick = function(){
pWonderSelect--;
pWonderSelect = round(pWonderSelect);
if(pWonderSelect < 0){
    pWonderSelect = allWonders.length-1;
}
};


var tutorialButton = new button(120,540,120,30);
tutorialButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-60,-15,120,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    var a = "TUTORIAL";
    var a2 = 12+anim*8;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
tutorialButton.onClick = function(){
scene = "tutorialPage"; 
doTransitionFrom(600,0);
};



var randomWonderButton = new button(120,480,40,40);
randomWonderButton.art = function(anim){
    stroke(23);
    strokeWeight(3);
    if(pRandomWonder){
        fill(134, 212, 85);
    }else{
        fill(145, 134, 134);
    }
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    fill(23);
    textSize(12);
    text("Random Wonder",0,-25);
    textSize(16);
    if(pRandomWonder){
        text("ON", 0, 7);
    }else{
        text("OFF", 0, 7);
    }
};
randomWonderButton.onClick = function(){
    pRandomWonder = !pRandomWonder;
};

var enhanceButton = new button(480,290,40,40);
enhanceButton.art = function(anim){
    stroke(23);
    strokeWeight(3);
    if(!enhancedCardGraphics){
        fill(134, 212, 85);
    }else{
        fill(145, 134, 134);
    }
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    fill(23);
    textSize(16);
    if(!enhancedCardGraphics){
        text("ON", 0, 7);
    }else{
        text("OFF", 0, 7);
    }
};
enhanceButton.onClick = function(){
    enhancedCardGraphics = !enhancedCardGraphics;
};

var liveSymbolButton = new button(480,350,40,40);
liveSymbolButton.art = function(anim){
    stroke(23);
    strokeWeight(3);
    if(!liveSymbols){
        fill(134, 212, 85);
    }else{
        fill(145, 134, 134);
    }
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    fill(23);
    textSize(16);
    if(!liveSymbols){
        text("ON", 0, 7);
    }else{
        text("OFF", 0, 7);
    }
};
liveSymbolButton.onClick = function(){
    liveSymbols = !liveSymbols;
};

var easyBotsButton = new button(480,410,40,40);
easyBotsButton.art = function(anim){
    stroke(23);
    strokeWeight(3);
    if(easyBots){
        fill(134, 212, 85);
    }else{
        fill(145, 134, 134);
    }
    rect(-20,-20,40,40,4+anim*8);
    textAlign(CENTER,BASELINE);
    fill(23);
    textSize(16);
    if(easyBots){
        text("ON", 0, 7);
    }else{
        text("OFF", 0, 7);
    }
};
easyBotsButton.onClick = function(){
    easyBots = !easyBots;
};

var startGameButton = new button(480,560,140,30);
startGameButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-60,-15,120,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    var a = "START GAME";
    var a2 = 12+anim*4;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
startGameButton.onClick = function(){
    initGame();
    doTransitionFrom(-600,0);
};

var confirmQuitButton = new button(480,400,120,30);
confirmQuitButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-60,-15,120,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    var a = "CONFIRM";
    var a2 = 12+anim*8;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
confirmQuitButton.onClick = function(){
scene = "menu";
tutorialData.on = false;
tutorialData.active = false;
doTransitionFrom(600,0);
};

var backButton = new button(120,540,100,30);
backButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-60,-15,120,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    var a = "BACK";
    var a2 = 16+anim*8;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
backButton.onClick = function(){
    if(tutorialData.on){
        if(scene === "chooseWonder"){
        tutorialData.scene = 0;   
        tutorialData.anim = 1000;
        tutorialData.active = true;
        }
    }
    
    doTransitionFrom(-transition.tox,-transition.toy);
    scene = pScene;
    
};
function getTrueMouse(){
var window = (function(what) { return this[what]; })("window");
var scaleFactor = window.scaleFactor;
return {
x:(mouseX-300)/scaleFactor + 300,
y:(mouseY-300)/scaleFactor + 300,
};
}
function getActualMouse(){

return {
x:(getTrueMouse().x-300)/cam.scale-cam.x+300,
y:(getTrueMouse().y-300)/cam.scale-cam.y+300,
};
}

function mouseHasMoved(){
    return (getTrueMouse().x!==m.truePx||getTrueMouse().y!==m.truePy);
}

function doNodeInput(){
    for(var i = 37; i < 41; i++){
        if(tapped(keys[i])){
            nodeNavigating = true;
            
            var node = nodeList[nearestNode];
            if(node && dist(msx,msy,node.x,node.y)<2){
            
            //println(node.tos[0]);
            if(node.toNodes){
            var toNode = node.toNodes[i-37];
            if(toNode){
            
            msx = toNode.x;
            msy = toNode.y;
            nearestNode = nodeList.indexOf(node.toNodes[i-37]);
            }
            }
            
            }else{
            var nearest = Infinity;
            var nearestInd = -1;
            for(var q = 0; q < nodeList.length; q++){
                
                var d = dist(msx,msy, nodeList[q].x,nodeList[q].y);
                if(d < nearest){
                    nearest = d;
                    nearestInd = q;
                }
            }
            if(nearestInd >= 0){
            node = nodeList[nearestInd];
            msx = node.x;
            msy = node.y;
            nearestNode = nearestInd;
            }
            
            }
        }
    }
}

var pFullView = false;
// scene = "tutorialPage";

var tutorialData = {
    anim:0,
    scene:0,
    on:false,
    active:false,
    checks:[
        false,
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(scene === 'game'){
            tutorialData.scene++;
            tutorialData.anim = 0;
        }
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(scene ==='botChoices'){
            tutorialData.scene++;
            tutorialData.anim = 0;
        }
        },
        function(){
        if(scene === 'game'){
            tutorialData.scene++;
            tutorialData.anim = 0;
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(!showingTurns){
            tutorialData.scene++;
            tutorialData.anim = 0;
        }
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
            if(scene === 'trade'){
                tutorialData.scene++;
                tutorialData.anim = 0;
            }
        },
        function(){
            if(scene === 'game'){
                tutorialData.scene++;
                tutorialData.anim = 0;
            }
        },
        function(){
            if(selectP){
                tutorialData.scene++;
                tutorialData.anim = 0;
            }
        },
        function(){
            if(!selectP && activeView === 0){
                tutorialData.scene++;
                tutorialData.anim = 0;
            }
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
        if(clicked){
            if(tutorialData.anim < 120){
            tutorialData.anim = 120;
            }else{
            tutorialData.scene++;
            tutorialData.anim = 0;
            }
        }
        clicked = false;
        mousePressed = false;
        },
        function(){
            tutorialData.on = false;
            tutorialData.active = false;
            tutorialData.scene = 0;
            tutorialData.anim = 0;
        },
        ],
    scenes:[
        function(anim){
            textAlign(CENTER,BASELINE);
            fill(0, 0, 0);
            textSize(30);
            var a = "7 Wonders";
            text(a.substring(0,(a.length*anim)/60),300,150);
            textSize(15);
            var a = "The most awarded board game of all time";
            text(a.substring(0,(a.length*(anim-60))/60),300,180);
            var a = "Now brought to you as a 100% functional online remake!\n(functional, not visual)";
            text(a.substring(0,(a.length*(anim-150))/60),300,250);
            var a = ". . . .";
            text(a.substring(0,(a.length*(anim-240))/180),300,325);
            var a = "lol you thought this was just gonna be a wall of text?";
            text(a.substring(0,(a.length*(anim-460))/120),300,400);
            if(anim > 460+120+30){
                startButton.draw();
            }
            // if(clicked){
            //     tutorialData.anim = 1000;
            // }
        },
        function(anim){
        noStroke();
fill(181, 181, 181,200);
rect(-100,450,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Seven Wonders is about building an ancient\ncity over the course of III (3) ages.\n\nCities are built around one of the 7 wonders.";
text(a.substring(0,(a.length*(anim))/120),300,500);
        },
        function(anim){
        noStroke();
fill(181, 181, 181,200);
rect(-100,450,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Start the game by choosing any wonder.\n\nYou can also change the number of players.";
text(a.substring(0,(a.length*(anim))/120),300,500);
var a = anim/(anim+10);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
ellipse(100,300,80*a,80*a);
ellipse(500,300,80*a,80*a);
        },
        function(anim){
            var a = (anim-600)/((anim-600)+10);
        if(anim > 600){
            noFill();
stroke(255, 0, 38);
strokeWeight(8);
ellipse(480,560,150*a,60*a);
        }
        },
        function(anim){
            noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Here's the wonder you chose!\n\nYou can build the stages of the wonder\nthroughout the game (or not) for bonuses.";
text(a.substring(0,(a.length*(anim))/120),300,50);
var a = anim/(anim+4);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
rect(415-110,415-55,222*a,110*a,4);

        },
        function(anim){
            noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "The game is divided into turns.\n\nHere are all the actions you can take\n during a turn.";
text(a.substring(0,(a.length*(anim))/120),300,50);
var a = anim/(anim+2);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
rect(415-110-260,415-55,180*a,110*a,4);
rect(415-110,415-55,222,110,4);

        },
        function(anim){
            noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Here is your hand.\nEach turn, use 1 card from you hand to\nselect an action. Then, click the pass button.\nTry it out!";
text(a.substring(0,(a.length*(anim))/120),300,50);
var a = anim/(anim+1);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
rect(540,360,50*a,50*a,4);
rect(10,478,580*a,115*a,4);
        },
        function(anim){
if(anim > 600){
    noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Drag a card to an action.\n\nThen, click the pass button";
text(a.substring(0,(a.length*(anim-600))/120),300,50);
var a = (anim-600)/(anim-600+4);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
rect(540,360,50*a,50*a,4);
}
        },
        function(){},
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Now everyone reveals their choices at once.\n\nAfter all the actions have been resolved,\nall the hands rotate.";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        function(){},
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "It's a new turn, and you have a new hand!\n\nAs you may have noticed, some cards have costs\nto play (the symbols at the top of the card).";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Gold costs can be paid with gold.\nResource costs are automatically paid\nif you have something that produces\nthe resource.";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "You can also pay resource costs by trading.\n\nTrading allows you to use 1 resource from\na neighbor by giving them 2 gold.";
text(a.substring(0,(a.length*(anim))/120),300,50);
var a = anim/(anim+4);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
ellipse(220+35,365+50,80*a,80*a);
        },
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Try opening the trading menu.";
text(a.substring(0,(a.length*(anim))/60),300,50);
noFill();
stroke(255, 0, 38);
strokeWeight(8);
ellipse(220+35,365+50,80,80);
        },
        function(){},
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "You can view your neighbors by clicking\nthe button with an eye on it.\n\nTry it out!";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        function(){},
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "The objective of the game is to get the most\nvictory points by the end of the third age.\n\nA new age happens every 6 turns.";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "There's many ways to get points, but I'll let\nyou figure that out for yourself.\n\n(One way is the wars that happen every age)";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        function(anim){
        noStroke();
        fill(181, 181, 181,200);
rect(-100,-50,800,200);
textAlign(CENTER,BASELINE);
fill(0,0,0);
textSize(20);
var a = "Good luck!\n\n(Oh, btw, you can play this game with just the\narrow keys and spacebar if you want)";
text(a.substring(0,(a.length*(anim))/120),300,50);
        },
        ],
    };


var tutorialStartButton = new button(300,300,250,30);
tutorialStartButton.art = function(anim){
    noStroke();
    // fill(255, 0, 0);
    // rect(-60,-15,120,30);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(30);
    var a = "START TUTORIAL";
    var a2 = 18+anim*8;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2,7);
    }
};
tutorialStartButton.onClick = function(){
scene = "tutorial";
tutorialData.anim = 0;
tutorialData.scene = 0;
tutorialData.on = true;
tutorialData.active = true;
doTransitionFrom(0,600);
};

function makeThumbnail(){
    background(75, 181, 242);
image(textures.lava,0,0,600,600*(1/0.7));

pushMatrix();
translate(33,5);
scale(1.2);
wonderLoads[0][1]();
popMatrix();

textFont(createFont("serif"));
textAlign(CENTER,BASELINE);

pushMatrix();
scale(1.2);
translate(115,-117);
noStroke();
for(var i = 5; i > -1; i-=0.5){
fill(255-i*5, 179, 0);
pushMatrix();
translate(-126+i,174-i);
//fill(255, 179, 0);
textSize(50);
text("O N D E R S",339,300);
text("V",184,300);
text("V",168,300);
popMatrix();
textSize(200);
text("7",-33+i*2,527-i);
rect(17+i,412-i,330,10,3);
rect(-8+i,490-i,355,10,3);
}
popMatrix();

textSize(20);
text("KHAN ACADEMY EDITION",300,30);
textFont(createFont("monospace"));
}

//selectP = true;

var loadingStage = -1;
var loadingIndex = 0;
var loadingSubIndex = 0;
var popupBg = get();
frameRate(frameRateSetting);
var draw = function(){
    
    cursor(ARROW);
    
    manageNodeInitialization();
    doNodeInput();
    
    if(mouseHasMoved()){
    msx = getActualMouse().x;
    msy = getActualMouse().y;
    nodeNavigating = false;
    }
    var trueMousePressed = false;
    if(mouseIsPressed || pressed(keys[32])){
        mousePressed = true;
        trueMousePressed = true;
    }else{
        mousePressed = false;
    }
    
    if(tutorialData.on){
    
        if(tutorialData.checks[tutorialData.scene]){
            tutorialData.checks[tutorialData.scene]();
        }
    }
    
    pushMatrix();
    translate(-transition.x,-transition.y);
    switch(scene){
    case "menu":
    //{
cam = {
x:0,
y:0,
scale:1,
rot:0,
};
    background(75, 181, 242);
image(textures.marble,0,0,600,600*(1/0.7));
pushMatrix();
translate(0,80);
noStroke();
fill(-8096433);
rect(0,400,600,220);
image(wonderImgs["the temple of artemis in ephesus"],0,-40,600,600);
popMatrix();

for(var i = 0; i < 7; i++){
    pushMatrix();
    
    translate(200+i*(315/(6)),40+cos(millis()/10+i*60)*5);
    scale(0.08);
    var a = floor(i/2);
    if(i%2 === 1){
        a += 4;
    }
    imageLoads[a][1]();
    popMatrix();
}

image(logoImg,0,0);



startButton.draw();
settingsButton.draw();
tutorialButton.draw();

stroke(255, 0, 0);
//point(msx,msy);
if(clicked && msx < 1 && msy < 1){
    scene = "thumbnail";
}
    //}
    break;
    case "settings":
    //{
    
    cam = {
    x:0,
    y:0,
    scale:1,
    rot:0,
    };
    background(181, 191, 191);
image(textures.marble,0,0,600,600*(1/0.7));
pushMatrix();
translate(0,180);
noStroke();
// fill(-8096433);
// rect(0,400,600,220);
image(wonderImgs["the pyramids of giza"],0,0,600,600);
popMatrix();
image(settingsLabelImg,0,0);

textAlign(CENTER,BASELINE);
textSize(20);

fill(110, 80, 9);
text("Number of players: "+numPlayers,300,180);
if(numPlayers >= 7){
    bonusPlayersAnim = lerp(bonusPlayersAnim,1,0.1);
    if(numPlayers > 7){
    textSize(10);
    text("The original game is not meant to have >7 players.\nYou may experience performance or gamplay issues.",300,195);
    }
}else{
    bonusPlayersAnim = lerp(bonusPlayersAnim,0,0.1);
}


numPlayersPlus.draw();
numPlayersMinus.draw();
numPlayersPlusBonus.x = 530 + (1-bonusPlayersAnim)*150;
numPlayersPlusBonus.draw();


textAlign(CENTER,BASELINE);
textSize(20);
fill(110, 80, 9);
text("Max Frame Rate: "+frameRateSetting+" FPS",300,240);
textAlign(RIGHT,BASELINE);
text("Card caching",430,300);
text("Symbol caching",430,360);
text("Easy bots",430,420);


backButton.draw();
frameRatePlus.draw();
frameRateMinus.draw();

enhanceButton.draw();

liveSymbolButton.draw();

easyBotsButton.draw();


// quit game
if(pScene === "game"){
    stroke(0,0,0);
    strokeWeight(2);
    
    if(msx >= 515 && msx <= 565 && msy >= 515 && msy <= 565){
        cursor(HAND);
        fill(212, 212, 212);
        if(clicked){
            doTransitionFrom(0,-600);
            scene = "confirmQuitGame";
            clicked = false;
        }
    }else{
        fill(242, 242, 242);
    }
    rect(515,515,50,50,4);
    pushMatrix();
    translate(540,515+25);
    pushMatrix();
    scale(-1,1);
    stroke(0,0,0);
    strokeWeight(2);
    
    rect(-15,-15,30,30,4);
    noStroke();
    rect(4,-20,15,40,4);
    
    stroke(0,0,0);
    strokeWeight(2);
    line(-5,0,15,0);
    line(7,-8,15,0);
    line(7,8,15,0);
    popMatrix();
    
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    var a = "QUIT GAME";
    var a2 = 16;
    for(var i = 0; i < a.length; i++){
    text(a[i],-((a.length-1)/2)*a2 + i*a2-110,7);
    }
    
    popMatrix();
    }
    
    if(scene !== "settings"){
        popupBg = get(0,0,600,600);
    }

    //}
    break;
    case "chooseWonder":
    //{
    
    var bgCol = color(148, 136, 95);
    background(bgCol);
    
    image(wonderSelectLabelImg,100,50,400,400);
    
    // pWonderSelect += 0.1; if(pWonderSelect > 6){pWonderSelect = 0;}
    if(pWonderSelectAnim > pWonderSelect+allWonders.length/2){
        pWonderSelectAnim -= allWonders.length;
    }
    if(pWonderSelectAnim < pWonderSelect-allWonders.length/2){
        pWonderSelectAnim += allWonders.length;
    }
    pWonderSelectAnim = lerp(pWonderSelectAnim,pWonderSelect,0.1);
    for(var i = 0; i < allWonders.length; i++){
        var data = wonders[allWonders[i]];
        var w = (i-pWonderSelectAnim)*250;
        if(i > pWonderSelectAnim+2){
        w += (allWonders.length)*-250;
        }
        if(i < pWonderSelectAnim-2){
        w += (allWonders.length)*250;
        }
        pushMatrix();
        translate(w,20);
        translate(300,300);
        scale(0.42-abs(w)/4000);
        translate(-300,-300);
        noStroke();
        fill(data.bg);
        rect(0,0,600,600);
        if(data.addArt){
            data.addArt(0);
        }
        image(wonderImgs[allWonders[i]],0,0);
        fill(bgCol);
        noStroke();
        rect(-4,480,608,124);
        
        stroke(227, 167, 3);
        strokeWeight(10);
        noFill();
        rect(0,0,600,480,4);
        popMatrix();
    
    }
    
    var data = wonders[allWonders[pWonderSelect]];
    textAlign(CENTER,BASELINE);
    fill(255, 179, 0);
    textSize(40);
    // text("Select Wonder",300,120);
    textSize(20);
    text(capitalize(data.id),300,160);
    
    wonderSelectPlus.draw();
    wonderSelectMinus.draw();
        
    pushMatrix();
    if(msx >= 300+230-45-70 && msx <=330+230-45-70 && msy >= 410+20+50 && msy <= 440+20+50){
    wonderSelectInfoAnim = lerp(wonderSelectInfoAnim,1,0.1);
    }else{
    wonderSelectInfoAnim = lerp(wonderSelectInfoAnim,0,0.1);
    }
    if(wonderSelectInfoAnim > 0.01){
    translate(300,450);
    scale(wonderSelectInfoAnim);
    translate(-300,-450);
    translate(-115,20);
    wonderInfoCard({wonder:data,wonderStage:3,wonderHighlight:false,notReal:true});
    }
    popMatrix();
    
    pushMatrix();
    translate(-45-70,50);
    for(var i = 2; i > -1; i--){
        strokeWeight(2);
    stroke(107, 107, 107);
    fill(140, 140, 140);
    rect(310+70*i,365,70,100,4);
        drawWonderStage(345+70*i,415,{wonder:data,wonderStage:3,wonderHighlight:false,notReal:true},i);
    }
    translate(230,20);
    strokeWeight(2);
    stroke(0, 0, 0);
    fill(201, 201, 201);
    rect(300,410,30,30,4);
    fill(0,0,0);
    textAlign(CENTER,BASELINE);
    textSize(20);
    textCompatible("?",315,433);
    popMatrix();
    
    var resource = data.starter[0];
    pushMatrix();
    translate(115,0);
    strokeWeight(2);
    stroke(0, 0, 0);
    if(resource === "glass"||resource === "papyrus"||resource === "textiles"){
    fill(colorMap.rare);
    }else{
    fill(colorMap.basic);
    }
    rect(300,440,30,30,4);
    translate(315,455);
    resourceSymbols[resource]();
    popMatrix();
    
    
    pushMatrix();
    translate(0,-120);
    textAlign(CENTER,BASELINE);
    textSize(20);
    
    fill(110, 80, 9);
    text("Number of players: "+numPlayers,300,180);
    if(numPlayers >= 7){
        bonusPlayersAnim = lerp(bonusPlayersAnim,1,0.1);
        if(numPlayers > 7){
        textSize(10);
        text("The original game is not meant to have >7 players.\nYou may experience performance or gamplay issues.",300,195);
        }
    }else{
        bonusPlayersAnim = lerp(bonusPlayersAnim,0,0.1);
    }
    popMatrix();

    numPlayersPlus.y = 50;
    numPlayersMinus.y = 50;
    numPlayersPlusBonus.y = 50;
    
    numPlayersPlus.draw();
    numPlayersMinus.draw();
    numPlayersPlusBonus.x = 530 + (1-bonusPlayersAnim)*150;
    numPlayersPlusBonus.draw();
    
    numPlayersPlus.y = 170;
    numPlayersMinus.y = 170;
    numPlayersPlusBonus.y = 170;
    
    randomWonderButton.draw();
    
    backButton.y = 560;
    backButton.draw();
    backButton.y = 540;
    startGameButton.draw();
    
    //}
    break;
    case "tutorial":
    // {
    
    cam = {
x:0,
y:0,
scale:1,
rot:0,
};
    background(196, 149, 78);
    
    // if(tutorialData.scenes[tutorialData.scene]){
    //     tutorialData.scenes[tutorialData.scene](tutorialData.anim);
    //     tutorialData.anim++;
    // }
    
    // }
    break;
    case "tutorialPage":
    //{
    
    cam = {
    x:0,
    y:0,
    scale:1,
    rot:0,
    };

    background(-11108232);
image(textures.marble,0,0,600,600*(1/0.7));
pushMatrix();
translate(0,130);

noStroke();
pushMatrix();
translate(-5,-165);
scale(1.4);
fill(-9408166);
beginShape();
vertex(4,126);
vertex(133,148);
vertex(454,102);
vertex(446,194);
vertex(139,160);
vertex(0,179);
vertex(0,155);
endShape(CLOSE);
popMatrix();
if(wonderImgs["the lighthouse of alexandria"]){
image(wonderImgs["the lighthouse of alexandria"],0,0,600,600);
}
popMatrix();
image(tutorialLabelImg,0,0);

tutorialStartButton.draw();

    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(15);
    text('This game is a 100% functional remake of\nthe board game Seven Wonders, so rules can\nprobably also be found online',210,530);

backButton.x = 500;
backButton.draw();
backButton.x = 120;

stroke(255, 0, 0);
//point(msx,msy);

    //}
    break;
    case "loading":
    //{
    
    switch(loadingStage){
        case -1:
            background(255, 255, 255);
            loadingStage = 0;
        // prevents some rare errors on the first frame
        break;
        case 0:
        if(loadingIndex < textureLoads.length){
            if(textureLoads[loadingIndex][1](loadingSubIndex)){
            textures[textureLoads[loadingIndex][0]] = get(0,0,600*0.7,600);
            loadingIndex++;
            loadingSubIndex = 0;
            }else{
            loadingSubIndex++;
            }
        }else{
            loadingIndex = 0;
            loadingStage = 1;
        }
        break;
        case 1:
        if(loadingIndex < wonderLoads.length){
            background(255, 255, 255);
background(255, 255, 255, 0);
            wonderLoads[loadingIndex][1]();
            wonderImgs[wonderLoads[loadingIndex][0]] = get(0,0,600,600);
            loadingIndex++;
        }else{
            loadingIndex = 0;
            loadingStage = 2;
            //scene = "menu";
        }
        break;
        case 2:
        if(loadingIndex < imageLoads.length){
            background(255, 255, 255);
            background(255, 255, 255,0);
            pushMatrix();
            translate(300,300);
            scale(resourceInitScale);
            imageLoads[loadingIndex][1]();
            imageCaches[imageLoads[loadingIndex][0]] = get(0,0,600,600);
            popMatrix();
            loadingIndex++;
        }else{
            loadingIndex = 0;
            loadingStage = 3;
        }
        break;
        case 3:
        if(loadingIndex < allTypes.length){
            background(255, 255, 255);
            background(255, 255, 255,0); 
            pushMatrix();
            translate(300,300);
            scale(2);
            loadArt(types[allTypes[loadingIndex]],capitalize(allTypes[loadingIndex]));
            popMatrix();
            types[allTypes[loadingIndex]].loadedArt = get();
            
            loadingIndex++;
        }else{
            loadingIndex = 0;
            loadingStage = 4;
            //initGame();
            scene = "menu";
        }
        break;
    }
    
    if(loadingStage === 0){
        
        noStroke();
        fill(186, 186, 186);
        rect(430,-10,200,620);
        textAlign(CENTER,BASELINE);
        fill(0,0,0);
        textSize(26);
        textCompatible("Loading\nTextures",515,75);
        
        
        
        noStroke();
        fill(140, 140, 140);
        rect(470,150,90,400,10);
        fill(43, 43, 43);
        rect(470,150,90,400*((loadingIndex+(loadingSubIndex/(600*0.7/textureLoadSpeed)))/textureLoads.length),10);
        
        stroke(15, 15, 15);
        strokeWeight(5);
        noFill();
        rect(470,150,90,400,10);
    }else if(loadingStage === 1){
    noStroke();
        fill(66, 66, 66,100);
        rect(-10,-10,620,620);
        fill(255, 255, 255);
        textAlign(CENTER,BASELINE);
        textSize(30);
        textCompatible("Loading Wonders",300,80);
        var total = 7;
        var progress = 0;
        progress += loadingIndex;
        textCompatible(round(progress/total*100)+'%',300,310);
    noFill();
    stroke(255, 255, 255);
    strokeWeight(10); 
    arc(300,300,100,100,0,(360/total)*progress);
    }else{
        noStroke();
        fill(66, 66, 66,100);
        rect(-10,-10,620,620);
        fill(255, 255, 255);
        textAlign(CENTER,BASELINE);
        textSize(30);
        textCompatible("Loading Assets",300,80);
        var things = [imageLoads.length, allTypes.length];
        var total = 0;
        for(var i = 0; i < things.length; i++){
            total += things[i];
        }
        var progress = 0;
        for(var i = 0; i < loadingStage-2; i++){
            if(things[i]){
            progress += things[i];
            }
        }
        progress += loadingIndex;
        textCompatible(round(progress/total*100)+'%',300,310);
    noFill();
    stroke(255, 255, 255);
    strokeWeight(10); 
    arc(300,300,100,100,0,(360/total)*progress);
        
    }
    
    //}
    break;
    case "botChoices":
    // {
    
    background(0, 0, 0);
    image(popupBg,0,0,600,600);
    noStroke();
    fill(66, 66, 66,100);
    rect(-10,-10,620,620);
    var p = players[botChoiceIndex[0]];
    var reviewWonder = 0;
    if(p.wonderStage < 3){
        reviewWonder = 1;
    }
    
    if(botChoiceIndex[1]<p.hand.length){
    var card = p.hand[botChoiceIndex[1]];
    p.reviewCard(card);
    }else{
    if(reviewWonder === 1){
    p.reviewWonderStage();
    }
    }
    
    
    var total = (players.length-1)*(p.hand.length+reviewWonder);
    var current = (botChoiceIndex[0]-1)*(p.hand.length+reviewWonder)+botChoiceIndex[1]+1;
    
    botChoiceIndex[1]+=1;
    if(botChoiceIndex[1] >= p.hand.length+reviewWonder){
        botChoiceIndex[1] = 0;
        players[botChoiceIndex[0]].makeBotChoice();
        botChoiceIndex[0]++;
    }
    if(botChoiceIndex[0] >= players.length){
        botChoiceIndex = [1,0];
        scene = 'game'; 
    }
    fill(255, 255, 255);
    textAlign(CENTER,BASELINE);
    textSize(30);
    
    textCompatible("Bots are making choices",300,200);
    textCompatible(round(current/total*100)+'%',300,310);
    noFill();
    stroke(255, 255, 255);
    strokeWeight(10); 
    arc(300,300,100,100,0,(360/total)*current);
    
    //}
    break;
    case "tallyPlayers":
    // {
    
    background(0, 0, 0);
    image(popupBg,0,0,600,600);
    noStroke();
    fill(66, 66, 66,100);
    rect(-10,-10,620,620);
    var p = players[tallyIndex];
    p.endTotal = calculatePoints(p);
    tallyIndex++;
    fill(255, 255, 255);
    textAlign(CENTER,BASELINE);
    textSize(30);
    
    textCompatible("Calculating final scores",300,200);
    textCompatible(round(tallyIndex/players.length*100)+'%',300,310);
    noFill();
    stroke(255, 255, 255);
    strokeWeight(10); 
    arc(300,300,100,100,0,(360/players.length)*tallyIndex);
    if(tallyIndex >= players.length){
        tallyIndex = 0;
        scene = 'game'; 
    }
    
    //}
    break;
    case "game":
    // {
    
    for(var i = 0; i < players.length; i++){
        
        // board image captures to reduce lag
        if(!players[i].boardSave){
            pushMatrix();
            translate(transition.x,transition.y);
            initBoardSave(i);
            popMatrix();
            //println(players[i].hand.length);
            break;
        }
    }
    
    background(196, 149, 78);
    
    // if(selectP){
    //     if(msx >= 540 && msx <= 590 && msy >= 10 && msy <= 60){
    //     if(clicked){
    //         scene = 'settings';
    //         doTransitionFrom(0,600);
    //         clicked = false;
    //     }
    //     }
    // }
    
    if(tapped(keys[90])){
        var toNode = nodeList[0];
            if(toNode){
            msx = toNode.x;
            msy = toNode.y;
            nearestNode = 0;
            }
        nodeNavigating = true;
    }
    var didEndGame = false;
    var pn = 0;
    if(showingTurns||tallying){
        if(msx >= 540 && msx <= 590 && msy >= 540 && msy <= 590){
        if(clicked){
            boardZoom = !boardZoom;
            clicked = false;
        }
        }
    }
    if(showingTurns||showingWar){
        if(msx >= 10 && msx <= 60 && msy >= 540 && msy <= 590){
        if(clicked){
            skipping = !skipping;
            skipTimer = 0;
            clicked = false;
        }
        }
    }
    if(tallying && !tallyingQ[0]){
        if(msx >= 10 && msx <= 60 && msy >= 540 && msy <= 590){
        if(clicked){
            scene = "menu";
            doTransitionFrom(600,0);
            clicked = false;
        }
        }
    }
    var saveMsx = 0;
    var saveMsy = 0;
    
    if(selectP||showingTurns||showingWar||tallying){
        if(pFullView === false){
            initializedNodes = false;
            pFullView = true;
        }
        if(!nodeNavigating){
        msx = getActualMouse().x;
        msy = getActualMouse().y;
        }else{
        //msx = nodeList[nearestNode].x;
        // msy = nodeList[nearestNode].y;
        // println(msx+" , "+msy);
        }
        
        // if(nodeNavigating){
    //     stroke(255, 0, 238);
    // strokeWeight(100);
    // point(msx,msy);
    // }
        
        if(nodeNavigating){
        saveMsx = msx;
        saveMsy = msy;
        }else{
        saveMsx = getTrueMouse().x;
        saveMsy = getTrueMouse().y;
        }
        
        // if(clicked){
        //     cycleHands();
        // }
        if(skipping && (showingTurns||showingWar)){
        if(mousePressed){
            skipTimer += 4;
        }else{
            skipTimer ++;
        }
        if(skipTimer >= 25){
            clicked = true;
            skipTimer = 0;
        }
        }
        var angle = 90+atan2(150-msy,300-msx);
        if(angle < 0){
            angle += 360;
        }
        var pn = floor(angle/(360/players.length)+0.5);
        if(pn === players.length){
            pn = 0;
        }
        cursor(HAND);
        
        var doRotation = mousePressed;
        
        if(showingWar){
            
        pn = warStep-1;
        if(pn < 0){
            pn = 0;
        }
        if(clicked){
            warStep++;
            if(warStep > players.length){
            warStep = 0;
            showingWar = false;
            if(age <= 3){
            setHands();
            }else{
            didEndGame = true;
            }
            }else{
            doWarFor(players[warStep-1]);
            players[warStep-1].boardSave = false;
            }
        }
        doRotation = true;
        clicked = false;
        mousePressed = false;
        }
        if(showingTurns){
        cursor(ARROW);
        
        msx = 0;
        msy = 0;
        if(showingQ[0]){
        
        pn = players.indexOf(showingQ[0]);
        if(clicked){
            if(showingQ[0].choice){
                doChoice(showingQ[0]);
            }else{
            showingQ[0].boardSave = false;
            showingQ.splice(0,1);
            }
        }
        }else if(awaitingEffects.length > 0){
        pn = players.indexOf(awaitingEffects[0][1]);
        awaitingEffects[0][2].highlighted = true;
        if(clicked){
            if(!awaitingEffects[0][3]){
                awaitingEffects[0][0].effect(awaitingEffects[0][1]);
                awaitingEffects[0][3] = true;
            }else{
                awaitingEffects[0][1].boardSave = false;
                awaitingEffects.splice(0,1);
            }
        }
        }else{
        cycleHands();
        pn = 0;
        activeView = 0;
        showingTurns = false;
        selectP = false;
        }
        clicked = false;
        mousePressed = false;
        doRotation = true;
        }

        if(tallying){
            cursor(ARROW);
            if(tallyingQ[0]){
                pn = players.indexOf(tallyingQ[0]);
                if(clicked){
                    //println(tallyingQ[0].endTotal.total);
                    tallyingQ.splice(0,1);
                    tallyAnim = 0;
                }
            }
            clicked = false;
            mousePressed = false;
            doRotation = true;
        }
        
        var toScale = 0.43;
        var toX = 0;
        
        
        var toY = 300*0.43;
        
        // var toY = 0;
        
        // if(selectP){
        //     toY = 300*0.43;
        // }
        
        if(showingTurns||tallying){
            // if(!showingQ[0].choice){
            // var tMsy = getTrueMouse().y;
            // var tMsx = getTrueMouse().x;
            // var lP = pow(dist(tMsy,tMsx,300,300)/424,1.5);
                // toScale = lerp(0.9,0.43,lP);
                // toY = lerp(0,300*0.43,lP);
                if(boardZoom){
                toScale = 0.8;
                toY = 0;
                }
            // }
        }
        
        
        var a = -pn*(360/players.length);
         cam.scale = lerp(cam.scale,toScale,0.1);
        cam.x = lerp(cam.x,toX,0.1);
        cam.y = lerp(cam.y,toY,0.1);

        if(doRotation){
        }else{
        a = 0;
        }
        if(cam.rot-a > 180){
            cam.rot -= 360;
        }else if(cam.rot-a < -180){
            cam.rot += 360;
        }
        cam.rot = lerp(cam.rot,a,0.15);
        if(clicked){
            selectP = false;
            activeView += pn;
            if(activeView >= players.length){
                activeView -= players.length;
            }
            if(activeView < 0){
                activeView += players.length;
            }
            activeView = round(activeView);
            cam.rot = 0;
        }
        msx = 0;
        msy = 0;
        clicked = false;
        mousePressed = false;
    }else{
        skipping = false;
        skipTimer = 0;
        cam.scale = lerp(cam.scale,1,0.1);
        cam.x = lerp(cam.x,0,0.1);
        cam.y = lerp(cam.y,0,0.1);
        cam.rot = lerp(cam.rot,0,0.15);
        if(abs(cam.scale-1) < 0.0001){
            cam.scale = 1;
            cam.x = 0;
            cam.y = 0;
            cam.rot = 0;
        }
        if(pFullView === true){
            initializedNodes = false;
            pFullView = false;
        }
    }
    
    pushMatrix();
    
    translate(cam.x,cam.y);
    
    
    translate(300,300);
    scale(cam.scale);
    
    translate(0,-300);
    rotate(cam.rot);
    translate(-300,0);
    
    
    
    // stroke(255, 0, 0);
    // strokeWeight(10);
    // point(msx,msy);
    
    
     
    // if(tapped(keys[77])){
    //     scene = "mausoleumEffect";
    // }

    
   
    
    if((selectP||showingTurns||showingWar||tallying)&&cam.scale<1){
    var highlighted = 0;
    var drawPlayer = function(i,q,stuff){
    pushMatrix();
    translate(300,0);
    rotate((360/players.length)*q);
    translate(-300,0);
    //translate(0,10);
    drawPlayerHand(i,stuff);
    // if(stuff){
        drawPlayerStuff(i,stuff);
    // }
    popMatrix();
    };
    for(var i = players.length-1; i > -1; i--){
    var q = i-activeView;
    if(q < 0){
        q += players.length;
    }
    if(q >= players.length){
        q -= players.length;
    }
        if(q !== pn){
            
            drawPlayer(i,q,false);
            
        }else{
            highlighted = i;
        }
    }
    drawPlayer(highlighted,highlighted-activeView,true);
    
    }else{
    
    drawPlayerHand(activeView,true);
    drawPlayerStuff(activeView,true);
    
    textSize(14);
    if(activeView !== 0){
        noStroke();
        fill(201, 201, 201,180);
        var a = "Viewing player "+activeView+"'s city";
        var a2 = a.length*14*(5/8);
        rect(592-a2,337,a2+4,20,4);
        fill(0,0,0);
        textAlign(RIGHT,BASELINE);
        textCompatible(a,590,352);
    }else{
        noStroke();
        fill(201, 201, 201,180);
        var a2 = 9*14*(5/8);
        rect(494,337,a2+12,20,4);
        fill(0,0,0);
        textAlign(CENTER,BASELINE);
        textCompatible("Your city",540,352);
        
        
        //settings
        noStroke();
    
    if(msx >= 380 && msx <= 480 && msy >= 337 && msy <= 357){
        cursor(HAND);
        fill(212, 212, 212,180);
        if(clicked){
            scene = "settings";
            doTransitionFrom(0,600);
            clicked = false;
        }
    }else{
        fill(242, 242, 242,180);
    }
    
    pushMatrix();
    translate(380,337);
    rect(0,0,100,20,4);
    textAlign(CENTER,BASELINE);
    fill(0,0,0);
    textSize(14);
    text("Settings",50,15);
    popMatrix();
        
        
    }
    if(msx >= 300 && msx <=330 && msy >= 410 && msy <= 440){
    players[activeView].wonderInfoCardShow = lerp(players[activeView].wonderInfoCardShow,1,0.1);
    wonderInfoCard(players[activeView]);
    }else{
    players[activeView].wonderInfoCardShow = 0;
    }
    }
    
    
    
    // for(var i = 0; i < nodeList.length; i++){
    //     stroke(255, 0, 0);
    // strokeWeight(20);
    // point(nodeList[i].x,nodeList[i].y);
    // }
    
    
    // if(clicked){
    //     cycleHands();
    // }
    if(m.hold){
        //println(random());
        if(m.hold.IDENTIFIER === 'structure'){
            m.hold.x = msx;
            m.hold.y = msy;
            if(m.hold.scaleTo === 1){
            m.hold.scaleTo = 1.12;
            }
            
            //reorder cards
            var index = players[0].hand.indexOf(m.hold);
            if(index>=0){
                
                var toLeft = 0;
                for(var i = 0; i < players[0].hand.length; i++){
                if((((index > i)&&(m.hold.x>players[0].hand[i].x))||((index <= i)&&(m.hold.x>=players[0].hand[i].x))) && players[0].hand[i]!== m.hold){
                    toLeft++;
                }
                    
                }
                players[0].hand.splice(players[0].hand.indexOf(m.hold),1);
                players[0].hand.splice(toLeft,0,m.hold);
            }
            m.hold.physics();
            m.hold.draw();
        }
    }
    if(clicked){
        if(m.hold){
            m.lastHeld = m.hold;
            m.hold = false;
        }
    }
    
    popMatrix();
    
     if(saveMsx){
        msx = saveMsx;
    }
    if(saveMsy){
        msy = saveMsy;
    }
    
    // change view button
    if((showingTurns||tallying) && scene === 'game'){
    stroke(0,0,0);
    strokeWeight(2);
    if(msx >= 540 && msx <= 590 && msy >= 540 && msy <= 590){
        cursor(HAND);
        fill(212, 212, 212);
    }else{
        fill(242, 242, 242);
    }
    rect(540,540,50,50,4);
    pushMatrix();
    translate(565,443+125);
    noFill();
    arc(0,-12,40,40,35,145);
    arc(0,12,40,40,215,325);
    ellipse(0,0,15,15);
    for(var i = 0; i < 5; i++){
        var a = 180+(180/5)*(i+0.5);
        line(cos(a)*15,sin(a)*7-2,cos(a)*18,sin(a)*13-2);
    }
    popMatrix();
    }
    // skip button
    if((showingTurns||showingWar) && scene === 'game'){
    stroke(0,0,0);
    strokeWeight(2);
    
    if(msx >= 10 && msx <= 60 && msy >= 540 && msy <= 590){
        cursor(HAND);
        fill(212, 212, 212);
    }else{
        fill(242, 242, 242);
    }
    rect(10,540,50,50,4);
    pushMatrix();
    translate(35,540+25);
    noFill();
    stroke(0,0,0);
    strokeWeight(2);
    
    var a2 = 0;
    if(skipping){
        strokeWeight(3);
        a2 = frameCount*6;
    }
    var a = 2;
    line(17+sin(a2)*a,0,2+sin(a2)*a,-12);
    line(17+sin(a2)*a,0,2+sin(a2)*a,12);
    line(0+sin(a2)*a,0,-15+sin(a2)*a,-12);
    line(0+sin(a2)*a,0,-15+sin(a2)*a,12);
    popMatrix();
    }
    // exit game
    if((tallying && !tallyingQ[0]) && scene === 'game'){
    stroke(0,0,0);
    strokeWeight(2);
    
    if(msx >= 10 && msx <= 60 && msy >= 540 && msy <= 590){
        cursor(HAND);
        fill(212, 212, 212);
    }else{
        fill(242, 242, 242);
    }
    rect(10,540,50,50,4);
    pushMatrix();
    translate(35,540+25);
    scale(-1,1);
    stroke(0,0,0);
    strokeWeight(2);
    
    rect(-15,-15,30,30,4);
    noStroke();
    rect(4,-20,15,40,4);
    
    stroke(0,0,0);
    strokeWeight(2);
    line(-5,0,15,0);
    line(7,-8,15,0);
    line(7,8,15,0);
    
    popMatrix();
    }
    // trade indicator
    if(showingTurns && showingQ[0]){
        if(showingQ[0].choice){
    var infos = "";
    var addTradeInfo = function(trade){
    if(infos.length > 0){
        infos += ", ";
    }
    infos += trade.resource;
    var side = "left";
    if(trade.side === 1){
        side = "right";
    }
    infos += "("+side+")";
    };
    if(showingQ[0].choice.trades){
            for(var i = 0; i < showingQ[0].choice.trades.tradesUsed.length; i++){
    
    var trade = showingQ[0].choice.trades.tradesUsed[i];
    addTradeInfo(trade);
            }
    }
    if(showingQ[0].toGiveGold){
        for(var i = 0; i < showingQ[0].toGiveGold.length; i++){
        addTradeInfo(showingQ[0].toGiveGold[i]);
        }
    }
    if(infos.length >= 1){
    noStroke();
    fill(156, 156, 156,200);
    rect(5,160,590,80,4);
    textAlign(CENTER,BASELINE);
    fill(0,0,0);
    textSize(15);
    textCompatible("Trading for "+infos,10,200,580,100);
    }
        }
    }
    // hand cycle direction indicator
    if(selectP){
        pushMatrix();
        translate(50,50);
        
        pushMatrix();
        
        if(age === 2){
            scale(-1,1);
        }
        rotate(frameCount);
        var alph = 255*(1-((cam.scale-0.43)*(1/(1-0.43))));
        noFill();
        stroke(255, 23, 23,alph);
        strokeWeight(5);
        arc(0,0,60,60,-40,270);
        translate(0,-30);
        rotate(-15);
        translate(0,30);
        line(0,-30,-10,-40);
        line(0,-30,-10,-20);
        popMatrix();
        
        fill(0,0,0);
        textAlign(CENTER,BASELINE);
        textSize(15);
        textCompatible("Hand\nRotation",0,-4);
        
        popMatrix();
        
    }
    // war info
    if(showingWar){
        noStroke();
        fill(145, 145, 145,200);
        rect(20,20,560,70,4);
        textAlign(CENTER,BASELINE);
        fill(0,0,0);
        textSize(30);
        var numerals = '';
        for(var i = 0; i < age-1; i++){
             numerals += 'I';
        }
        textCompatible("END OF AGE "+numerals,300,60);
        textSize(10);
        textCompatible("Wars occur between each city and cities to the left and right",300,80);
        var num = (age-2)*2+1;
        var a = 's';
        if(num === 1){
           a = ''; 
        }
        textCompatible("Victories award "+num+" victory point"+a+" this age",300,585);
    }
    // end game tallying
    if(tallying){
        var p = players[pn];
        noStroke();
        fill(156, 156, 156,200);
        rect(5,5,590,50,4);
        
        
        var a = "Total Score: "+p.endTotal.total;
        var a2 = 0.8;
        if(tallyAnim-a2 >= 0){
        pushMatrix();
        translate(300+(18*a.length/2)-9*(p.endTotal.total.toString().length)+1,30);
        scale((tallyAnim-a2)*(1/(1-a2)));
        vp();
        popMatrix();
        }
        textAlign(CENTER,BASELINE);
        fill(0,0,0);
        textSize(30);
        textCompatible(a.substring(0,(a.length+1)*tallyAnim),300,43);
        
        pushMatrix();
        translate(300,300);
        scale(tallyAnim);
        translate(-300,-300);
        if(trueMousePressed){
        tallyAnim = lerp(tallyAnim,0,0.1);
        }else{
        tallyAnim = lerp(tallyAnim,1,0.1);
        }
        
        
        noStroke();
        fill(156, 156, 156,200);
        rect(100,60,400,500,4);
        
        var things = [p.endTotal.military,p.endTotal.gold,p.endTotal.wonder,p.endTotal.civil,p.endTotal.commercial,p.endTotal.guild,p.endTotal.science];
        for(var i = 0; i < 7; i++){
            pushMatrix();
            translate(461,94+i*40);
            scale(0.7);
            vp();
            popMatrix();
        }
        
        textAlign(LEFT,BASELINE);
        fill(0,0,0);
        textSize(25);
        textCompatible("Military",140,102);
        textCompatible("Gold",140,142);
        textCompatible("Wonder",140,182);
        textCompatible("Civil",140,222);
        textCompatible("Commercial",140,262);
        textCompatible("Guild",140,302);
        textCompatible("Science",140,342);
        textSize(20);
        textCompatible(p.endTotal.militaryLog.wins,320,102);
        textCompatible(p.endTotal.militaryLog.losses,400,102);
        textAlign(CENTER,BASELINE);
        textCompatible(p.endTotal.military,461,102);
        textCompatible("/ 3",340,142);
        textCompatible(p.endTotal.gold,461,142);
        textCompatible(p.endTotal.wonder,461,182);
        textCompatible(p.endTotal.civil,461,222);
        textCompatible(p.endTotal.commercial,461,262);
        textCompatible(p.endTotal.guild,461,302);
        textCompatible(p.endTotal.science,461,342);
        
        pushMatrix();
        translate(300,90);
        scale(1.2);
        trophy();
        popMatrix();
        
        pushMatrix();
        translate(380,105);
        scale(1.2);
        skull();
        popMatrix();
        
        pushMatrix();
        translate(300,133);
        scale(1.4);
        resourceSymbols.gold(p.endTotal.goldAmt);
        popMatrix();
        
        var q = 0;
        for(var i in p.endTotal.scienceCounts){
        fill(0,0,0);
        textAlign(CENTER,BASELINE);
        textSize(20);
        textCompatible(pow(p.endTotal.scienceCounts[i],2),160+q*90,376);
            for(var w = 0; w < p.endTotal.scienceCounts[i]; w++){
            pushMatrix();
            translate(160+q*90,400+w*25);
            scale(1.4);
            resourceSymbols[i]();
            popMatrix();
            }
            q++;
        }
        var least = 1000;
        for(var i in p.endTotal.scienceCounts){
            if(p.endTotal.scienceCounts[i] < least){
                least = p.endTotal.scienceCounts[i];
            }
        }
        fill(0,0,0);
        textAlign(LEFT,BASELINE);
        textSize(20);
        for(var i = 0; i<least; i++){
        textCompatible("7",370,408+i*25);
        }
        
        stroke(130, 130, 130);
        strokeWeight(5);
        line(440,80,440,540);
        popMatrix();
        if(pn === 0 || !tallyingQ[0]){ 
        pushMatrix();
        translate(300,560);
        scale(constrain((tallyAnim-0.975)*(1/(1-0.975)),0,1));
        var win = true;
        var tie = true;
        for(var i = 1; i < players.length; i++){
            if(players[i].endTotal.total >= players[0].endTotal.total){
            win = false;
            if(players[i].endTotal.total > players[0].endTotal.total){
            tie = false;
            }
            }
            
        }
        if(win){
        rotate(sin(frameCount*4)*10);
        }else if(tie){
        rotate(sin(frameCount*4)*4);
        }else{
        rotate(sin(frameCount)*6);
        }
        textSize(35);
        textAlign(CENTER,BASELINE);
        if(win){
        fill(54, 255, 144);
        textCompatible("You Win!",0,15);
        }else if(tie){
        fill(56, 228, 255);
        textCompatible("Tie",0,15);
        }else{
        fill(212, 0, 32);
        textCompatible("You did't win...",0,0);
        }
        popMatrix();
        }
    }
    
   
    
    if(didEndGame){
        endGame();
    }
    
    // capture screen on scene change
    if(scene !== "game"){
        popupBg = get(0,0,600,600);
    }
    //}
    break;
    case "trade":
    // {
    image(popupBg,0,0,600,600);
    
    cam.scale = 1;
    cam.x = 0;
    cam.y = 0;
    cam.rot = 0;
    
    noStroke();
    fill(196, 196, 196,220);
    rect(-10,-10,620,620);
    
    //back
    if(msx >= 270 && msx <= 330 && msy >= 140 && msy <= 174){
    cursor(HAND);
    fill(222, 222, 222);
        if(clicked){
            scene = 'game';
            clicked = false;
        }
    }else{
    fill(207, 207, 207);
    }
    stroke(0,0,0);
    strokeWeight(2);
    rect(270,140,60,34,4);
    
    fill(0,0,0);
    textAlign(CENTER,BASELINE);
    textSize(40);
    textCompatible("Trade",300,60);
    textSize(16);
    textCompatible("Back",300,163);
    textAlign(LEFT,BASELINE);
    textSize(20);
    textCompatible("Player To Left",50,92);
    textCompatible("Player To Right",350,92);
    
    noFill();
    stroke(0,0,0);
    strokeWeight(2);
    rect(35,110,225,470,4);
    rect(340,110,225,470,4);
    
    
    
    pushMatrix();
    translate(300,101);
    scale(2.2);
    resourceSymbols.gold(players[0].gold);
    popMatrix();
    for(var q = 0; q < 2; q++){
        for(var i = players[0].trades[q].length-1; i > -1;i--){
        for(var w = players[0].trades[q][i].length-1; w > -1; w--){
        if(players[0].trades[q][i]){
    tradeButton(50+w*50+q*305,124+i*25,players[0].trades[q][i][w],q,i,w);
        }
        }
        }
    }
    //}
    break;
    case "mausoleumEffect":
    //{
    image(popupBg,0,0,600,600);
    // msx = getTrueMouse().x;
    // msy = getTrueMouse().y;
    noStroke();
    fill(128, 128, 128,220);
    rect(-10,-10,620,620);
    var cNum = 0;
    var hovered = false;
    var hoveredIndex = 0;
    //println(discardedCards.length);
    var down = min(110,550/(floor((discardedCards.length-1)/7)+1));
    for(var q = 0; q < discardedCards.length;q++){
        var card = discardedCards[q];
        card.revealed = true;
        card.x = 45+cNum*80-((80*7)*floor(cNum/7));
        card.y = 60+((down)*floor(cNum/7));
        card.dx = card.x;
        card.dy = card.y;
        // card.physics();
        card.scale = lerp(card.scale,card.scaleTo,0.1);
        card.scaleTo = 1;
        card.draw();
        cNum++;
        if(card.infoCardShow){
        hovered = card;
        hoveredIndex = q;
        }
    }
    
    if(hovered){
        hovered.infoCard();
        hovered.scaleTo = 1.08;
        cursor(HAND);
        if(clicked){
            hovered.build(players[0]);
            if(hovered.data.effect){
                awaitingEffects.push([hovered.data,players[0],hovered]);
            }
            discardedCards.splice(hoveredIndex,1);
            scene = 'game';
        }
    }
    
    fill(0,0,0);
    textAlign(CENTER,BASELINE);
    textSize(15);
    textCompatible("Pick a card to build for free",300,590);
    //}
    break;
    case "confirmQuitGame":
    //{
    background(128);
    fill(255, 179, 0);
    textAlign(CENTER,BASELINE);
    textSize(40);
    text("Confirm Quit",300,250);
    backButton.y = 400;
    backButton.draw();
    backButton.y = 540;
    confirmQuitButton.draw();
    
    lastFrameScene = "settings";
    pScene = "game";
    // transition.tox = 0;
    // transition.toy = 0;
    //}
    break;
    case "thumbnail":
    //{
    transition.x = 0;
    transition.y = 0;
    makeThumbnail();
    if(clicked){
        scene = "menu";
    }
    //}
    break;
    }
    manageTransition();
    popMatrix();
    
    if(tutorialData.on){
        
        if(tutorialData.active){
    if(tutorialData.scenes[tutorialData.scene]){
        tutorialData.scenes[tutorialData.scene](tutorialData.anim);
        tutorialData.anim++;
    }
        }else{
        tutorialData.anim = 0;
        }
    }
    
    cursorImg.x = lerp(cursorImg.x,msx,0.3);
    cursorImg.y = lerp(cursorImg.y,msy,0.3);
    if(!cursorImg.x){
        cursorImg.x = 300;
    }
    if(!cursorImg.y){
        cursorImg.y = 300;
    }
    if(scene !== "loading"&&nodeNavigating){
        cursorImg.alpha = lerp(cursorImg.alpha,1,0.1);
        
        pushMatrix();
        if(scene === "game" && !(showingTurns||showingWar||tallying)){
            //translate(cam.x,cam.y);
    
    translate(300,300);
    scale(cam.scale);
    translate(-300,-300);
    translate(cam.x,cam.y);
        }
        translate(cursorImg.x,cursorImg.y);
        noStroke();
        fill(255, 153, 0);
        stroke(0,0,0);
        strokeWeight(2);
        beginShape();
        vertex(0,0);
        vertex(15,6);
        vertex(8,8);
        vertex(6,15);
        endShape(CLOSE);
        popMatrix();
    }else{
        cursorImg.alpha = lerp(cursorImg.alpha,0,0.1);
    }
    
    m.px = msx;
    m.py = msy;
    m.truePx = getTrueMouse().x;
    m.truePy = getTrueMouse().y;
    
    if(scene !== lastFrameScene){
        pScene = lastFrameScene;
        lastFrameScene = scene;
    }
    
    manageKeys();
    
    if(frameRateViewLock||(getTrueMouse().x > 480 && getTrueMouse().y < 10)){
    if(clicked&&(getTrueMouse().x > 480 && getTrueMouse().y < 10)){
        frameRateViewLock = !frameRateViewLock;
    }
    fill(255, 0, 0);
    textSize(10);
    textAlign(LEFT,BASELINE);
    textCompatible('Framerate: '+round(this.__frameRate*10)/10,500,12);
    }
    
    clicked = false;
};
function mouseClicked(){
    clicked = true;
}

// 20K lines in 2 months woooo
      </script>

    <script src="https://cdn.jsdelivr.net/gh/ackvonhuelio/chickenGameCodes/runPJS_onKA.js"></script>
        
   <script>
            let scaleFactor = 1;
            function resizeCanvas() {
                let canvas = document.querySelector("canvas");
                if (!canvas) return;

                scaleFactor = Math.min(window.innerWidth / 600, window.innerHeight / 700);
                canvas.style.transform =`scale(${scaleFactor})`;

                // Pass the scale factor to the PJS code
                window.scaleFactor = scaleFactor;
            }

            window.addEventListener("resize", resizeCanvas);
            window.addEventListener("load", resizeCanvas);
            window.addEventListener("orientationchange", resizeCanvas);

           let firstClick = true;

            document.addEventListener("click", function () {
            if (firstClick) {
            setTimeout(resizeCanvas, 10);
            firstClick = false;
            }
            });

            // NEW FIX: Handle weird mobile resizing when tapping
            if (window.visualViewport) {
window.visualViewport.addEventListener("resize", resizeCanvas);
            }
        </script>
        
</body>

</html>
